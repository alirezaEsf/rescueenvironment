"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2177],{22177:(re,g,s)=>{s.r(g),s.d(g,{default:()=>oe});var e=s(4020),l=s(77920),c=s(88834),m=s(99213),h=s(21413),p=s(56977),f=s(90882),F=s(14823),_=s(84412),M=s(88141),j=s(96697),D=s(96354),E=s(25558),u=s(18810),I=s(7673),L=s(21626);let d=(()=>{class t{constructor(i){this._httpClient=i,this._item=new _.t(null),this._items=new _.t(null)}get items$(){return this._items.asObservable()}get item$(){return this._item.asObservable()}getItems(i=null){return this._httpClient.get("api/apps/file-manager",{params:{folderId:i}}).pipe((0,M.M)(n=>{this._items.next(n)}))}getItemById(i){return this._items.pipe((0,j.s)(1),(0,D.T)(n=>{const o=[...n.folders,...n.files].find(a=>a.id===i)||null;return this._item.next(o),o}),(0,E.n)(n=>n?(0,I.of)(n):(0,u.$)("Could not found the item with id of "+i+"!")))}static{this.\u0275fac=function(n){return new(n||t)(e.KVO(L.Qq))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var G=s(27115);const T=["matDrawer"],w=()=>["/apps/file-manager"],x=t=>["/apps/file-manager/folders/",t],C=t=>["./details/",t];function X(t,r){if(1&t&&e.EFF(0),2&t){const i=e.XpG();e.Lme(" ",i.items.folders.length," folders, ",i.items.files.length," files ")}}function B(t,r){if(1&t&&(e.j41(0,"a",16),e.EFF(1),e.k0s()),2&t){const i=e.XpG().$implicit;e.Y8G("routerLink",e.eq3(2,x,i.id)),e.R7$(),e.JRh(i.name)}}function U(t,r){if(1&t&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(),e.JRh(i.name)}}function Y(t,r){1&t&&(e.j41(0,"div",17),e.EFF(1,"/"),e.k0s())}function S(t,r){if(1&t&&e.DNE(0,B,2,4,"a",16)(1,U,2,1,"div")(2,Y,2,0,"div",17),2&t){const i=r.$index,n=r.$count;e.vxM(i!==n-1?0:-1),e.R7$(),e.vxM(i===n-1?1:-1),e.R7$(),e.vxM(i!==n-1?2:-1)}}function A(t,r){if(1&t&&(e.j41(0,"div",9)(1,"a",16),e.EFF(2,"Home "),e.k0s(),e.j41(3,"div",17),e.EFF(4,"/"),e.k0s(),e.Z7z(5,S,3,3,null,null,e.BUC().trackByFn,!0),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("routerLink",e.lJ4(1,w)),e.R7$(4),e.Dyx(i.items.path)}}function Q(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(),e.SpI(" ",i.contents," ")}}function z(t,r){if(1&t){const i=e.RV6();e.j41(0,"div",20)(1,"a",21),e.bIt("click",function(o){return e.eBV(i),e.Njj(o.preventDefault())}),e.nrm(2,"mat-icon",22),e.k0s(),e.j41(3,"a",23)(4,"div",24)(5,"div",25),e.nrm(6,"mat-icon",26),e.k0s()(),e.j41(7,"div",27)(8,"div",28),e.EFF(9),e.k0s(),e.DNE(10,Q,2,1,"div",29),e.k0s()()()}if(2&t){const i=r.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(7,C,i.id)),e.R7$(),e.Y8G("svgIcon","heroicons_solid:information-circle"),e.R7$(),e.Y8G("routerLink",e.eq3(9,x,i.id)),e.R7$(3),e.Y8G("svgIcon","heroicons_solid:folder"),e.R7$(2),e.Y8G("matTooltip",i.name),e.R7$(),e.SpI(" ",i.name," "),e.R7$(),e.vxM(i.contents?10:-1)}}function J(t,r){if(1&t&&(e.j41(0,"div")(1,"div",18),e.EFF(2,"Folders"),e.k0s(),e.j41(3,"div",19),e.Z7z(4,z,11,11,"div",20,e.BUC().trackByFn,!0),e.k0s()()),2&t){const i=e.XpG(2);e.R7$(4),e.Dyx(i.items.folders)}}function N(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(),e.SpI(" ",i.contents," ")}}function V(t,r){if(1&t&&(e.j41(0,"a",30)(1,"div",24)(2,"div",25)(3,"div",31),e.nrm(4,"mat-icon",26),e.j41(5,"div",32),e.EFF(6),e.k0s()()()(),e.j41(7,"div",27)(8,"div",28),e.EFF(9),e.k0s(),e.DNE(10,N,2,1,"div",29),e.k0s()()),2&t){const i=r.$implicit;e.Y8G("routerLink",e.eq3(16,C,i.id)),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:document"),e.R7$(),e.AVh("bg-red-600","PDF"===i.type)("bg-blue-600","DOC"===i.type)("bg-green-600","XLS"===i.type)("bg-gray-600","TXT"===i.type)("bg-amber-600","JPG"===i.type),e.R7$(),e.SpI(" ",i.type.toUpperCase()," "),e.R7$(2),e.Y8G("matTooltip",i.name),e.R7$(),e.SpI(" ",i.name," "),e.R7$(),e.vxM(i.contents?10:-1)}}function W(t,r){if(1&t&&(e.j41(0,"div")(1,"div",18),e.EFF(2,"Files"),e.k0s(),e.j41(3,"div",19),e.Z7z(4,V,11,18,"a",30,e.BUC().trackByFn,!0),e.k0s()()),2&t){const i=e.XpG(2);e.R7$(4),e.Dyx(i.items.files)}}function O(t,r){if(1&t&&(e.j41(0,"div",14),e.DNE(1,J,6,0,"div")(2,W,6,0,"div"),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.vxM(i.items.folders.length>0?1:-1),e.R7$(),e.vxM(i.items.files.length>0?2:-1)}}function H(t,r){1&t&&(e.j41(0,"div",15),e.nrm(1,"mat-icon",33),e.j41(2,"div",34),e.EFF(3," There are no items! "),e.k0s()()),2&t&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:folder-open"))}let v=(()=>{class t{constructor(i,n,o,a,y){this._activatedRoute=i,this._changeDetectorRef=n,this._router=o,this._fileManagerService=a,this._fuseMediaWatcherService=y,this._unsubscribeAll=new h.B}ngOnInit(){this._fileManagerService.items$.pipe((0,p.Q)(this._unsubscribeAll)).subscribe(i=>{this.items=i,this._changeDetectorRef.markForCheck()}),this._fileManagerService.item$.pipe((0,p.Q)(this._unsubscribeAll)).subscribe(i=>{this.selectedItem=i,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,p.Q)(this._unsubscribeAll)).subscribe(i=>{this.drawerMode=i.matches?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(i,n){return n.id||i}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(l.nX),e.rXU(e.gRc),e.rXU(l.Ix),e.rXU(d),e.rXU(G.F))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["file-manager-list"]],viewQuery:function(n,o){if(1&n&&e.GBs(T,7),2&n){let a;e.mGM(a=e.lsd())&&(o.matDrawer=a.first)}},decls:21,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","h-full","flex-auto","dark:bg-transparent",3,"backdropClick"],[1,"w-full","dark:bg-gray-900","sm:w-100",3,"mode","opened","position","disableClose"],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-auto","flex-col"],[1,"bg-card","flex","flex-col","items-start","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:py-12","md:px-8"],[1,"text-4xl","font-extrabold","leading-none","tracking-tight"],[1,"text-secondary","mt-0.5","flex","items-center","font-medium"],[1,"flex","items-center","space-x-2"],[1,"mt-4","sm:mt-0"],["mat-flat-button","",3,"color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"space-y-8","p-6","md:p-8"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"cursor-pointer","text-primary",3,"routerLink"],[1,""],[1,"font-medium"],[1,"-m-2","mt-2","flex","flex-wrap"],[1,"bg-card","relative","m-2","h-40","w-40","rounded-2xl","p-4","shadow"],["mat-icon-button","",1,"absolute","right-1.5","top-1.5","z-20","h-8","min-h-8","w-8",3,"click","routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"absolute","inset-0","z-10","flex","cursor-pointer","flex-col","p-4",3,"routerLink"],[1,"aspect-[9/6]"],[1,"flex","h-full","items-center","justify-center"],[1,"text-hint","opacity-50","icon-size-14",3,"svgIcon"],[1,"flex","flex-auto","flex-col","justify-center","text-center","text-sm","font-medium"],[1,"truncate",3,"matTooltip"],[1,"text-secondary","truncate"],[1,"bg-card","m-2","flex","h-40","w-40","cursor-pointer","flex-col","rounded-2xl","p-4","shadow",3,"routerLink"],[1,"relative"],[1,"absolute","bottom-0","left-0","rounded","px-1.5","text-sm","font-semibold","leading-5","text-white"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"div",1)(1,"mat-drawer-container",2),e.bIt("backdropClick",function(){return e.eBV(a),e.Njj(o.onBackdropClicked())}),e.j41(2,"mat-drawer",3,0),e.nrm(4,"router-outlet"),e.k0s(),e.j41(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),e.EFF(10," File Manager "),e.k0s(),e.j41(11,"div",8),e.DNE(12,X,1,2)(13,A,7,2,"div",9),e.k0s()(),e.j41(14,"div",10)(15,"button",11),e.nrm(16,"mat-icon",12),e.j41(17,"span",13),e.EFF(18,"Upload file"),e.k0s()()()(),e.DNE(19,O,3,2,"div",14)(20,H,4,1,"div",15),e.k0s()()()()}2&n&&(e.R7$(2),e.Y8G("mode",o.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.R7$(10),e.vxM(o.items.path.length?-1:12),e.R7$(),e.vxM(o.items.path.length?13:-1),e.R7$(2),e.Y8G("color","primary"),e.R7$(),e.Y8G("svgIcon","heroicons_outline:plus"),e.R7$(3),e.vxM(o.items&&(o.items.folders.length>0||o.items.files.length>0)?19:20))},dependencies:[f.vg,f.qe,f.$C,f.$l,l.n3,l.Wk,c.Hl,c.$z,c.pQ,m.m_,m.An,F.uc,F.oV],encapsulation:2,changeDetection:0})}}return t})();const P=()=>["../../"];function Z(t,r){1&t&&e.nrm(0,"mat-icon",6),2&t&&e.Y8G("svgIcon","heroicons_outline:folder")}function K(t,r){1&t&&e.nrm(0,"mat-icon",6),2&t&&e.Y8G("svgIcon","heroicons_outline:document")}function q(t,r){if(1&t&&(e.j41(0,"div",12)(1,"div",13),e.EFF(2,"Contents"),e.k0s(),e.j41(3,"div"),e.EFF(4),e.k0s()()),2&t){const i=e.XpG();e.R7$(4),e.JRh(i.item.contents)}}function ee(t,r){if(1&t&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.JRh(i.item.description)}}function te(t,r){1&t&&(e.j41(0,"div",20),e.EFF(1," Click here to add a description "),e.k0s())}let k=(()=>{class t{constructor(i,n,o){this._changeDetectorRef=i,this._fileManagerListComponent=n,this._fileManagerService=o,this._unsubscribeAll=new h.B}ngOnInit(){this._fileManagerListComponent.matDrawer.open(),this._fileManagerService.item$.pipe((0,p.Q)(this._unsubscribeAll)).subscribe(i=>{this._fileManagerListComponent.matDrawer.open(),this.item=i,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._fileManagerListComponent.matDrawer.close()}trackByFn(i,n){return n.id||i}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(e.gRc),e.rXU(v),e.rXU(d))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["file-manager-details"]],decls:51,vars:28,consts:[[1,"flex","flex-auto","flex-col","p-6","md:p-8"],[1,"flex","items-center","justify-end"],["mat-icon-button","",3,"routerLink"],[3,"svgIcon"],[1,"mt-8","aspect-[9/6]"],[1,"flex","h-full","items-center","justify-center","rounded-lg","border","bg-gray-50","dark:bg-card"],[1,"text-hint","icon-size-24",3,"svgIcon"],[1,"mt-8","flex","flex-col","items-start"],[1,"text-xl","font-medium"],[1,"mt-1","rounded","px-1.5","text-sm","font-semibold","leading-5","text-white"],[1,"mt-8","text-lg","font-medium"],[1,"mt-4","flex","flex-col","divide-y","border-b","border-t","font-medium"],[1,"flex","items-center","justify-between","py-3"],[1,"text-secondary"],[1,"mt-8","flex","items-center","justify-between"],[1,"text-lg","font-medium"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"mt-2","flex","border-t"],[1,"py-3"],[1,"text-secondary","italic"],[1,"mt-8","grid","w-full","grid-cols-2","gap-4"],["mat-flat-button","",1,"flex-auto",3,"color"],["mat-stroked-button","",1,"flex-auto"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"a",2),e.nrm(3,"mat-icon",3),e.k0s()(),e.j41(4,"div",4)(5,"div",5),e.DNE(6,Z,1,1,"mat-icon",6)(7,K,1,1,"mat-icon",6),e.k0s()(),e.j41(8,"div",7)(9,"div",8),e.EFF(10),e.k0s(),e.j41(11,"div",9),e.EFF(12),e.k0s()(),e.j41(13,"div",10),e.EFF(14,"Information"),e.k0s(),e.j41(15,"div",11)(16,"div",12)(17,"div",13),e.EFF(18,"Created By"),e.k0s(),e.j41(19,"div"),e.EFF(20),e.k0s()(),e.j41(21,"div",12)(22,"div",13),e.EFF(23,"Created At"),e.k0s(),e.j41(24,"div"),e.EFF(25),e.k0s()(),e.j41(26,"div",12)(27,"div",13),e.EFF(28,"Modified At"),e.k0s(),e.j41(29,"div"),e.EFF(30),e.k0s()(),e.j41(31,"div",12)(32,"div",13),e.EFF(33,"Size"),e.k0s(),e.j41(34,"div"),e.EFF(35),e.k0s()(),e.DNE(36,q,5,1,"div",12),e.k0s(),e.j41(37,"div",14)(38,"div",15),e.EFF(39,"Description"),e.k0s(),e.j41(40,"button",16),e.nrm(41,"mat-icon",17),e.k0s()(),e.j41(42,"div",18)(43,"div",19),e.DNE(44,ee,2,1,"div")(45,te,2,0,"div",20),e.k0s()(),e.j41(46,"div",21)(47,"button",22),e.EFF(48," Download "),e.k0s(),e.j41(49,"button",23),e.EFF(50,"Delete"),e.k0s()()()),2&n&&(e.R7$(2),e.Y8G("routerLink",e.lJ4(27,P)),e.R7$(),e.Y8G("svgIcon","heroicons_outline:x-mark"),e.R7$(3),e.vxM("folder"===o.item.type?6:-1),e.R7$(),e.vxM("folder"!==o.item.type?7:-1),e.R7$(3),e.JRh(o.item.name),e.R7$(),e.AVh("bg-indigo-600","folder"===o.item.type)("bg-red-600","PDF"===o.item.type)("bg-blue-600","DOC"===o.item.type)("bg-green-600","XLS"===o.item.type)("bg-gray-600","TXT"===o.item.type)("bg-amber-600","JPG"===o.item.type),e.R7$(),e.SpI(" ",o.item.type.toUpperCase()," "),e.R7$(8),e.JRh(o.item.createdBy),e.R7$(5),e.JRh(o.item.createdAt),e.R7$(5),e.JRh(o.item.modifiedAt),e.R7$(5),e.JRh(o.item.size),e.R7$(),e.vxM(o.item.contents?36:-1),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:pencil"),e.R7$(3),e.vxM(o.item.description?44:-1),e.R7$(),e.vxM(o.item.description?-1:45),e.R7$(2),e.Y8G("color","primary"))},dependencies:[c.Hl,c.$z,c.pQ,c.iY,l.Wk,m.m_,m.An],encapsulation:2,changeDetection:0})}}return t})(),ie=(()=>{class t{constructor(){}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["file-manager"]],decls:1,vars:0,template:function(n,o){1&n&&e.nrm(0,"router-outlet")},dependencies:[l.n3],encapsulation:2,changeDetection:0})}}return t})();var b=s(99437);const R=(t,r)=>{const i=(0,e.WQX)(d),n=(0,e.WQX)(l.Ix);return i.getItemById(t.paramMap.get("id")).pipe((0,b.W)(o=>{console.error(o);const a=r.url.split("/").slice(0,-1).join("/");return n.navigateByUrl(a),(0,u.$)(o)}))},$=(t,r,i,n)=>{let o=n.root;for(;o.firstChild;)o=o.firstChild;return!(n.url.includes("/file-manager")&&!n.url.includes("/details"))||t.closeDrawer().then(()=>!0)},oe=[{path:"",component:ie,children:[{path:"folders/:folderId",component:v,resolve:{item:(t,r)=>{const i=(0,e.WQX)(d),n=(0,e.WQX)(l.Ix);return i.getItems(t.paramMap.get("folderId")).pipe((0,b.W)(o=>{console.error(o);const a=r.url.split("/").slice(0,-1).join("/");return n.navigateByUrl(a),(0,u.$)(o)}))}},children:[{path:"details/:id",component:k,resolve:{item:R},canDeactivate:[$]}]},{path:"",component:v,resolve:{items:()=>(0,e.WQX)(d).getItems()},children:[{path:"details/:id",component:k,resolve:{item:R},canDeactivate:[$]}]}]}]}}]);