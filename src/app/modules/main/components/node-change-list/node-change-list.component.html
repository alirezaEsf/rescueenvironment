<p-toast />
<app-breadcrumbs id="section" (backClicked)="BeforeButton()"></app-breadcrumbs>
<div class="grid flex-column">
    <p-panel header="لیست نود های مدیاتور">
        <div class="grid grid-cols-12">
            <div class="col-12">
                <p-table [value]="nodesList" selectionMode="single"
                         [paginator]="true" [rows]="rows" [showCurrentPageReport]="true" [(first)]="first"
                         [currentPageReportTemplate]=paginationLabel
                         [rowsPerPageOptions]="[5,10,25,50,100]">
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="row" class="row" >
                                row
                                <p-sortIcon field="row"></p-sortIcon>
                            </th>
                            <th pSortableColumn="nodeName" class="nodeName" >
                                نام نود
                                <p-sortIcon field="nodeName"></p-sortIcon>
                            </th>
                            <th pSortableColumn="nodeValue" class="nodeValue" >
                                مقدار نود
                                <p-sortIcon field="nodeValue"></p-sortIcon>
                            </th>
                            <th pSortableColumn="changeTypeId" class="changeTypeId" >
                                نوع عملیات نود
                                <p-sortIcon field="changeTypeId"></p-sortIcon>
                            </th>
                            <th pSortableColumn="schemaName" class="schemaName" >
                                مسیر نود
                                <p-sortIcon field="schemaName"></p-sortIcon>
                            </th>
                            <th pSortableColumn="status" class="status" >
                                وضعیت
                                <p-sortIcon field="status"></p-sortIcon>
                            </th>
                            <th style="text-align: right !important;border-right: 1px solid #ebe8e8;" >
                                operation
                            </th>

                        </tr>
                    </ng-template>
                    <ng-template let-i="rowIndex" pTemplate="body" let-api>
                        <tr [pSelectableRow]="api">
                            <td class="row">{{api.row}}</td>
                            <td class="nodeName" dir="ltr"
                                [pTooltip]="api.nodeName"
                                [tooltipDisabled]="api.nodeName?api.nodeName.length < 20:false"
                            >
                                {{api.nodeName|moreChar19}}
                            </td>
                            <td class="nodeValue" dir="ltr"
                                [pTooltip]="api.nodeValue"
                                [tooltipDisabled]="api.nodeValue?api.nodeValue.length < 20:false"
                            >
                                {{api.nodeValue|moreChar19}}
                            </td>
                            <td class="changeTypeId" dir="ltr">
                                {{api.changeTypeId|changeTypeId}}
                            </td>
                            <td class="schemaName" dir="ltr"
                                [pTooltip]="api.schemaName"
                                [tooltipDisabled]="api.schemaName?api.schemaName.length < 20:false"
                            >
                                {{api.schemaName|moreChar19}}
                            </td>
                            <td class="status" [ngStyle]="{'text-align': 'center !important'}">
                                <div [ngStyle]="{ 'border-radius':' 2.5px','color':api.status == true ?
                         '#258F30' :'#962515',
                         'background-color': api.status == false ?'#F18B7D' : '#85DC8F',
                         'width':'45px','margin':' 0 auto'}">
                                    {{api.status|statusPipe}}</div>
                            </td>
                            <td class="text-right border-r border-[#ebe8e8]" >
                                <button (click)="setRecord(api)" type="button" class="p-button-rounded  "
                                        pButton
                                        pRipple icon="pi pi-chevron-down" (click)="menu.toggle($event)"></button>&nbsp;
                                <p-menu appendTo="body" #menu [popup]="true" [model]="items"></p-menu>
                            </td>
                        </tr>
                    </ng-template>

                </p-table>
            </div>
            <div class="col-12" dir="ltr">
                <button (click)="BeforeButton()"
                        style="width: 30px!important;" pButton
                        class="btn-warning p-button-warning" icon="pi pi-arrow-right"
                        matTooltip="{{'بازگشت'}}"></button>
            </div>
        </div>
    </p-panel>
</div>
