<!--
<app-breadcrumbs id="section"></app-breadcrumbs>
<div class="grid flex-column">
    <p-panel header="گزارش ریز کارکرد سرویس" (keydown.enter)="onKeydown($event)">
        <div class="grid grid-cols-12">
            <div class="col-span-3">
                <label class="normal-label">
                    <span class="red-color-text">* </span>
                    <span>تاریخ شروع :</span></label>
                <p-persian-calendar class="app-persian-calendar-style" [yearRange]="'1399:1410'"
                                    [(ngModel)]="onlyFromdate"
                                    (keydown.enter)="onKeydown($event)"
                                    [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"></p-persian-calendar>
            </div>
            <div class="col-span-3">
                <label class="normal-label">
                    <span class="red-color-text">* </span>
                    <span>تاریخ پایان :</span></label>
                <p-persian-calendar class="app-persian-calendar-style" [yearRange]="'1399:1410'"
                                    [(ngModel)]="onlyTodate" [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"

                                    (keydown.enter)="onKeydown($event)"></p-persian-calendar>
            </div>

            <div class="col-span-3">
                <label class="normal-label"> <span>سازمان :</span></label>
                <p-dropdown
                    (keydown.enter)="onKeydown($event)"
                    [options]="partyListOptions"
                    [(ngModel)]="partyId"
                    optionValue="partyId"
                    [filter]="true"
                    filterBy="title"
                    optionLabel="title"
                    [ngClass]=""
                    (onChange)="OnchangeParty($event)"
                    [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined">
                </p-dropdown>
            </div>

            <div class="col-span-3 btnsSearch" dir="ltr">
                <button pButton label="{{'جستجو'}}" style="width: 110px;margin: 6px"
                        class="normal-button" icon="pi pi-search" (click)="search()"></button>&nbsp;&nbsp;
                <button pButton label="{{'button.clear'|transloco}}" [outlined]="true" icon="pi pi-filter-slash"
                        style="margin: 6px" (click)="clear()"
                        [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"></button>
            </div>

            <div class="col-span-3">
                <label class="normal-label"> <span>ماژول :</span></label>
                <p-dropdown
                    [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"
                    [options]="moduleListOptions"
                    [(ngModel)]="moduleId"
                    optionValue="moduleId"
                    [filter]="true"
                    filterBy="moduleTitle"
                    optionLabel="moduleTitle"
                    (onChange)="onchangeModule($event)"
                >
                </p-dropdown>
            </div>
            <div class="col-span-3">

                <label class="normal-label"> <span>عنوان سرویس :</span></label>
                <p-dropdown
                    [options]="apiListOptionsFirst"
                    [(ngModel)]="apiId"
                    optionValue="apiId"
                    [filter]="true"
                    filterBy="title"
                    optionLabel="title"
                    [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"
                >
                </p-dropdown>
            </div>
            <div class="col-span-3">
                <label class="normal-label"> <span>کلاینت :</span></label>
                <p-dropdown
                    optionValue="clientId"
                    optionLabel="name"
                    filterBy="name"
                    [filter]="true"
                    class="dropdown-w100"
                    [options]="clientListOptions"
                    [(ngModel)]="clientId"
                    [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"
                    (keydown.enter)="onKeydown($event)"
                >
                </p-dropdown>
            </div>

             <label class="text-gray-700 sss">:</label>
            <div class="col-2-6">
                <label class="normal-label"> </label>
                <p-persian-calendar [timeOnly]="true" [showOnFocus]="true" [showSeconds]="true"
                                    icon="pi pi-clock" class="app-persian-calendar-w10"
                                    [showTime]="true" [showIcon]="true" [(ngModel)]="onlyToTime"
                                    (keydown.enter)="onKeydown($event)" [showMilliSeconds]="true">
                </p-persian-calendar>
            </div>
            <div class="col-span-3" style="margin-top: 3%">
                <div style="margin-bottom: 1%" *ngIf="tblFlag" dir="ltr">
                    <button pButton label="دانلود"
                            icon="pi pi-download" (click)="downloadData()"
                            [ngStyle]="{'position': 'relative','direction': 'ltr'}"
                    ></button>
                </div>
            </div>

        </div>


        <p-table [value]="logList" *ngIf="tblFlag" selectionMode="single" (onRowSelect)="expandTheRowEvent($event)">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="row" class="row">
                        row
                        <p-sortIcon field="row"></p-sortIcon>
                    </th>
                    <th pSortableColumn="REQUESTDATE" class="REQUESTDATE">
                        تاریخ و زمان
                        <p-sortIcon field="REQUESTDATE"></p-sortIcon>
                    </th>
                    <th pSortableColumn="API_NAME" class="API_NAME">
                        نام سازمان
                        <p-sortIcon field="API_NAME"></p-sortIcon>
                    </th>
                    <th pSortableColumn="API_NAME" class="API_NAME">
                        نام ماژول
                        <p-sortIcon field="API_NAME"></p-sortIcon>
                    </th>
                    <th pSortableColumn="API_NAME" class="API_NAME">
                        نام سرویس
                        <p-sortIcon field="API_NAME"></p-sortIcon>
                    </th>
                    <th pSortableColumn="API_TITLE" class="API_TITLE">
                        عنوان سرویس
                        <p-sortIcon field="API_TITLE"></p-sortIcon>
                    </th>

                    <th pSortableColumn="STATUS" class="STATUS">
                        وضعیت
                        <p-sortIcon field="STATUS"></p-sortIcon>
                    </th>
                    <th style="text-align: right !important;border-right: 1px solid #ebe8e8;">
                        operation
                    </th>
                </tr>
            </ng-template>
            <ng-template let-i="rowIndex" pTemplate="body" let-log>
                <tr [pSelectableRow]="log">
                    <td class="row">{{ log.row }}</td>
                    <td class="REQUESTDATE" dir="ltr">{{ log.REQUESTDATE|castToDateTime }}</td>
                    <td class="PARTY_TITLE"
                        [pTooltip]="log.PARTY_TITLE"
                        [tooltipDisabled]="log.PARTY_TITLE?log.PARTY_TITLE.length < 20:false"
                    >
                        {{ log.PARTY_TITLE|moreChar19 }}
                    </td>
                    <td class="MODULETITLE"
                        [pTooltip]="log.MODULETITLE"
                        [tooltipDisabled]="log.MODULETITLE?log.MODULETITLE.length < 20:false"
                    >
                        {{ log.MODULETITLE|moreChar19 }}
                    </td>
                    <td class="API_NAME"
                        [pTooltip]="log.API_NAME"
                        [tooltipDisabled]="log.API_NAME?log.API_NAME.length < 20:false"
                    >
                        {{ log.API_NAME|moreChar19 }}
                    </td>
                    <td class="API_TITLE"
                        [pTooltip]="log.API_TITLE"
                        [tooltipDisabled]="log.API_TITLE?log.API_TITLE.length < 20:false"
                    >
                        {{ log.API_TITLE|moreChar19 }}
                    </td>

                    <td class="STATUS" [ngStyle]="{'text-align': 'center !important'}">
                        <div [ngStyle]="{ 'border-radius':' 2.5px','color':log.STATUS == true ?
                         '#258F30' :'#962515',
                         'background-color': log.STATUS == false ?'#F18B7D' : '#85DC8F',
                         'width':'45px','margin':' 0 auto'}">
                            {{ log.STATUS|successful }}
                        </div>
                    </td>
                    <td class="text-right border-r border-[#ebe8e8]" >
                        <button
                            *ngIf="!log.expanded"
                            pButton
                            pTooltip="اطلاعات بیشتر"
                            icon="pi pi-ellipsis-h"
                            class="p-button-rounded p-button-warning"
                            (click)="expandTheRow(log)">
                        </button>
                        <button
                            *ngIf="log.expanded"
                            pButton
                            pTooltip="بستن"
                            icon="pi pi-ellipsis-h"
                            class="p-button-rounded p-button-warning"
                            (click)="expandTheRow(log)">
                        </button>
                    </td>
                </tr>
                <tr *ngIf="log.expanded">
                    <td></td>
                    <td>
                        <label class="normal-label"> <span>نام کلاینت :</span></label>
                        <label
                            [pTooltip]="log.CLIENT_NAME"
                            [tooltipDisabled]="log.CLIENT_NAME?log.CLIENT_NAME.length < 20:false"
                        >
                            {{ log.CLIENT_NAME|moreChar19 }}
                        </label>
                    </td>
                    <td>
                        <label class="normal-label"> <span>آدرس Host :</span></label>
                        <label dir="ltr"
                               [pTooltip]="log.DESTINATIONHOST"
                               [tooltipDisabled]="log.DESTINATIONHOST?log.DESTINATIONHOST.length < 20:false"
                        >
                            {{ log.DESTINATIONHOST|moreChar19 }}
                        </label>
                    </td>
                    <td>
                        <button class="p-button-rounded  " pButton icon="pi pi-eye" pTooltip="جزئیات لاگ"
                                (click)="show(log)"></button>&nbsp;
                    </td>
                    <td></td>
                    <td></td>
                </tr>
            </ng-template>
        </p-table>
        <div class="grid text-left" *ngIf="tblFlag">

            <div class="col-1-8" style="margin-top: 12px;margin-right: 25%">
                <button pButton pRipple icon="pi pi-arrow-right"
                        pTooltip="{{'tooltip.nextPage'}}"
                        [disabled]=" this.logList.length < pagesize"
                        (click)="nextPageStatement()"
                ></button>
                <span>&nbsp;{{ pageDescription }}&nbsp;</span>
                <button pButton pRipple icon="pi pi-arrow-left"
                        pTooltip="{{'tooltip.beforePage' | transloco}}"
                        (click)="previousPageStatement()"
                        [disabled]="(this.pageno) == 0 "
                ></button>
            </div>
            <div class="col-1-2" style="margin-top: 8px;margin-left: 25%">
                <p-dropdown
                    [options]="pagesizeOptions"
                    appendTo='body'
                    optionValue="code"
                    optionLabel="name"
                    [(ngModel)]="pagesize"
                    (onChange)="OnchangePageno($event)"
                    [disabled]="nextBtnFlag"
                >

                </p-dropdown>
            </div>
            <div class="col-4-5"></div>
        </div>
        <div class="col-12" dir="ltr" *ngIf="this.inputChartCallApiReport != undefined">
            <button (click)="BeforeButton()"
                    style="width: 30px!important;" pButton
                    class="btn-warning p-button-warning" icon="pi pi-arrow-right"
                    matTooltip="{{'بازگشت' | transloco}}"></button>
        </div>
    </p-panel>
</div>
<p-toast position="top-center"></p-toast>

-->
<p-toast />
<app-breadcrumbs id="section" class="p-0 m-0" (backClicked)="BeforeButton()"></app-breadcrumbs>
<div class="content-page">
<div class="grid grid-cols-12  ">
    <div class="col-span-3 flex text-left   h-12 gap-2 mt-5-5  sm:hidden ">
        <button
            pButton
            label="{{'button.clear' | transloco}}"
            icon="pi pi-filter-slash"
            (click)="clear()"
            [outlined]="true"
            class="my-1 px-4 py-2 border normal-button"
        ></button>
        <button
            pButton
            label="{{'button.search' | transloco}}"
            icon="pi pi-search"
            (click)="search()"
            class="w-[110px] my-1 px-4 py-2 text-white normal-button"
        ></button>
    </div>
    <div class="col-span-3">
        <label class="normal-label">
            <span class="red-color-text">* </span>
            <span>{{ 'logReports.input.onlyFromDate'|transloco }} :</span></label>
        <p-persian-calendar class="app-persian-calendar-style" [yearRange]="'1399:1410'"
                            [(ngModel)]="onlyFromdate"
                            (keydown.enter)="onKeydown($event)"
                            [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"></p-persian-calendar>
    </div>
    <div class="col-span-3">
        <label class="normal-label">
            <span class="red-color-text">* </span>
            <span>{{ 'logReports.input.onlyToDate'|transloco }} :</span></label>
        <p-persian-calendar class="app-persian-calendar-style" [yearRange]="'1399:1410'"
                            [(ngModel)]="onlyTodate" [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"

                            (keydown.enter)="onKeydown($event)"></p-persian-calendar>
    </div>

    <div class="col-span-3">
        <label class="normal-label"> <span>{{ 'logReports.dropdown.party'|transloco }} :</span></label>
        <p-dropdown
            (keydown.enter)="onKeydown($event)"
            [options]="partyListOptions"
            [(ngModel)]="partyId"
            optionValue="partyId"
            [filter]="true"
            filterBy="title"
            optionLabel="title"
            class="normal-dropdown"
            (onChange)="OnchangeParty($event)"
            [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined">
        </p-dropdown>
    </div>
    <div class="hidden sm:flex sm:col-span-3 justify-start items-center gap-2 h-12 mt-5-5 rtl:flex-row-reverse">
        <button
            pButton
            label="{{'button.clear' | transloco}}"
            icon="pi pi-filter-slash"
            (click)="clear()"
            [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"
            [outlined]="true"
            class="my-1 px-4 py-2 border normal-button"
        ></button>
        <button
            pButton
            label="{{'button.search' | transloco}}"
            icon="pi pi-search"
            (click)="search()"
            class="w-[110px] my-1 px-4 py-2 text-white normal-button"
        ></button>
    </div>

    <div class="col-span-3">
        <label class="normal-label"> <span>{{ 'logReports.dropdown.module'|transloco }} :</span></label>
        <p-dropdown
            [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"
            [options]="moduleListOptions"
            [(ngModel)]="moduleId"
            optionValue="moduleId"
            [filter]="true"
            filterBy="moduleTitle"
            optionLabel="moduleTitle"
            class="normal-dropdown"
            (onChange)="onchangeModule($event)"
        >
        </p-dropdown>
    </div>
    <div class="col-span-3">

        <label class="normal-label"> <span>{{ 'logReports.dropdown.api'|transloco }} :</span></label>
        <p-dropdown
            [options]="apiListOptionsFirst"
            [(ngModel)]="apiId"
            optionValue="apiId"
            [filter]="true"
            filterBy="title"
            optionLabel="title"
            class="normal-dropdown"
            [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"
        >
        </p-dropdown>
    </div>
    <div class="col-span-3">
        <label class="normal-label"> <span>{{ 'logReports.dropdown.clientListOptions'|transloco }}  :</span></label>
        <p-dropdown
            optionValue="clientId"
            optionLabel="name"
            filterBy="name"
            [filter]="true"
            class="normal-dropdown"
            [options]="clientListOptions"
            [(ngModel)]="clientId"
            [disabled]="inputChartCallApiReport!=undefined||inputHomeBase!=undefined"
            (keydown.enter)="onKeydown($event)"
        >
        </p-dropdown>
    </div>
    <div class="col-span-3">
        <div *ngIf="tblFlag" dir="ltr">
            <button pButton label="{{'button.download'|transloco}}"
                    icon="pi pi-download" (click)="downloadData()"
                    class="w-[110px] my-1 px-4 py-2 text-white normal-button"
            ></button>
        </div>
    </div>
    <div class="col-span-12 mt-5">
        <p-table [value]="logList" *ngIf="tblFlag" selectionMode="single" (onRowSelect)="expandTheRowEvent($event)">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="row" class="row text-right">
                        {{ 'logReports.table.header.row'|transloco }}
                        <p-sortIcon field="row"></p-sortIcon>
                    </th>
                    <th pSortableColumn="REQUESTDATE" class="REQUESTDATE text-right">

                        {{ 'logReports.table.header.RequestDate'|transloco }}
                        <p-sortIcon field="REQUESTDATE"></p-sortIcon>
                    </th>
                    <th pSortableColumn="PARTY_TITLE" class="API_NAME text-right">
                        {{ 'logReports.table.header.party'|transloco }}
                        <p-sortIcon field="PARTY_TITLE"></p-sortIcon>
                    </th>
                    <th pSortableColumn="MODULETITLE" class="API_NAME text-right">
                        {{ 'logReports.table.header.module'|transloco }}
                        <p-sortIcon field="MODULETITLE"></p-sortIcon>
                    </th>
                    <th pSortableColumn="API_NAME" class="API_NAME text-right">
                        {{ 'logReports.table.header.apiName'|transloco }}
                        <p-sortIcon field="API_NAME"></p-sortIcon>
                    </th>
                    <th pSortableColumn="API_TITLE" class="API_TITLE text-right">
                        {{ 'logReports.table.header.apiTitle'|transloco }}
                        <p-sortIcon field="API_TITLE"></p-sortIcon>
                    </th>

                    <th pSortableColumn="STATUS" class="STATUS text-right">
                        {{ 'logReports.table.header.status'|transloco }}
                        <p-sortIcon field="STATUS"></p-sortIcon>
                    </th>
                    <th style="text-align: right !important;border-right: 1px solid #ebe8e8;">
                        {{ 'logReports.table.header.operation'|transloco }}
                    </th>
                </tr>
            </ng-template>
            <ng-template let-i="rowIndex" pTemplate="body" let-log>
                <tr [pSelectableRow]="log">
                    <td class="row text-right">{{ log.row }}</td>
                    <td class="REQUESTDATE text-right" dir="ltr">{{ log.REQUESTDATE|castToDateTime }}</td>
                    <td class="PARTY_TITLE text-right"
                        [pTooltip]="log.PARTY_TITLE"
                        [tooltipDisabled]="log.PARTY_TITLE?log.PARTY_TITLE.length < 20:false"
                    >
                        {{ log.PARTY_TITLE|moreChar19 }}
                    </td>
                    <td class="MODULETITLE text-right"
                        [pTooltip]="log.MODULETITLE"
                        [tooltipDisabled]="log.MODULETITLE?log.MODULETITLE.length < 20:false"
                    >
                        {{ log.MODULETITLE|moreChar19 }}
                    </td>
                    <td class="API_NAME text-right"
                        [pTooltip]="log.API_NAME"
                        [tooltipDisabled]="log.API_NAME?log.API_NAME.length < 20:false"
                    >
                        {{ log.API_NAME|moreChar19 }}
                    </td>
                    <td class="API_TITLE text-right"
                        [pTooltip]="log.API_TITLE"
                        [tooltipDisabled]="log.API_TITLE?log.API_TITLE.length < 20:false"
                    >
                        {{ log.API_TITLE|moreChar19 }}
                    </td>

                    <!--  <td class="STATUS text-right" [ngStyle]="{'text-align': 'center !important'}">
                          <div [ngStyle]="{ 'border-radius':' 2.5px','color':log.STATUS == true ?
                           '#258F30' :'#962515',
                           'background-color': log.STATUS == false ?'#F18B7D' : '#85DC8F',
                           'width':'45px','margin':' 0 auto'}" class="text-right">
                              {{ log.STATUS|successful }}
                          </div>
                      </td>-->
                    <td class="STATUS text-right">
                        <div
                            [ngStyle]="{
      'border-radius': '2.5px',
      'color': log.STATUS == true ? '#258F30' : '#962515',
      'background-color': log.STATUS == false ? '#F18B7D' : '#85DC8F',
      'width': '45%',
      'text-align': 'right',
      'padding': '0 10px'
    }"
                        >
                            {{ log.STATUS | successful }}
                        </div>
                    </td>
                    <td class="text-right border-r border-[#ebe8e8]" >
                        <button
                            *ngIf="!log.expanded"
                            pButton
                            pTooltip="{{'logReports.tooltip.more'|transloco}}"
                            icon="pi pi-ellipsis-h" severity="warn"
                            class="rounded-3xl "
                            (click)="expandTheRow(log)">
                        </button>
                        <button
                            *ngIf="log.expanded"
                            pButton
                            pTooltip="{{'logReports.tooltip.close'|transloco}}"
                            icon="pi pi-ellipsis-h" severity="warn"
                            class="rounded-3xl "
                            (click)="expandTheRow(log)">
                        </button>
                    </td>
                </tr>
                <tr *ngIf="log.expanded">
                    <td></td>
                    <td>
                        <label class="normal-label"> <span>{{ 'apiLogs.table.header.ClientName'|transloco }} :</span></label>
                        <label
                            [pTooltip]="log.CLIENT_NAME"
                            [tooltipDisabled]="log.CLIENT_NAME?log.CLIENT_NAME.length < 20:false"
                        >
                            {{ log.CLIENT_NAME|moreChar19 }}
                        </label>
                    </td>
                    <td>
                        <label class="normal-label"> <span>{{ 'logReports.table.detail.DestinationHost'|transloco }} :</span></label>
                        <label dir="ltr"
                               [pTooltip]="log.DESTINATIONHOST"
                               [tooltipDisabled]="log.DESTINATIONHOST?log.DESTINATIONHOST.length < 20:false"
                        >
                            {{ log.DESTINATIONHOST|moreChar19 }}
                        </label>
                    </td>
                    <td>
                        <button  class="rounded-3xl " pButton icon="pi pi-eye"
                                pTooltip="{{'logReports.dialog.header'|transloco}}"
                                (click)="show(log)"></button>&nbsp;
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </ng-template>
        </p-table>

    </div>
</div>


<div class="flex items-center justify-center gap-2 col-span-4 mt-6 mx-5" *ngIf="tblFlag">
    <button
        pButton
        pRipple
        icon="pi pi-arrow-right" class="normal-button"
        pTooltip="{{'tooltip.nextPage'|transloco}}"
        [disabled]="logList.length < pagesize"
        (click)="nextPageStatement()">
    </button>

    <span>&nbsp;{{ pageDescription }}&nbsp;</span>

    <button
        pButton
        pRipple class="normal-button"
        icon="pi pi-arrow-left"
        pTooltip="{{'tooltip.beforePage'|transloco}}"
        (click)="previousPageStatement()"
        [disabled]="pageno === 0">
    </button>
    <div>
        <p-dropdown class="normal-dropdown-pagination"
            [options]="pagesizeOptions"
            appendTo="body"
            optionValue="code"
            optionLabel="name"
            [(ngModel)]="pagesize"
            (onChange)="OnchangePageno($event)"
            [disabled]="nextBtnFlag">
        </p-dropdown>
    </div>
</div>
</div>
<!-- <div class="col-span-12" dir="ltr" *ngIf="this.inputChartCallApiReport != undefined">
     <button (click)="BeforeButton()"
             style="width: 30px!important;" pButton
             class="btn-warning p-button-warning" icon="pi pi-arrow-right"
             matTooltip="{{'button.back' | transloco}}"></button>
 </div>-->
<p-toast position="top-center"></p-toast>
