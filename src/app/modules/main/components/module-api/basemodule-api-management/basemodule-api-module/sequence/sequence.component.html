<p-toast />
<app-breadcrumbs id="section" (backClicked)="BeforeButton()" *ngIf="!addFlag"></app-breadcrumbs>
<div class="fle flex-col w-full px-5 gap-4 my-10 " *ngIf="!addFlag">
    <div
        class="col-span-12  flex flex-wrap gap-[1px] border-b border-black  text-[16px] items-center justify-start mb-3"
        *ngIf="sequenceFlag">
        <div disabled>
            <span [ngStyle]="{ 'color': '#37A1FF'}">{{ 'sequence.span.partyOrgApi'|transloco }}</span>
            <span [ngStyle]="{ 'color': '#7229a9'}"
            >{{ "(" + partyTitleOrg + ")" }}
                    </span>
        </div>
        <div disabled>
            &#8592;
            <span [ngStyle]="{ 'color': '#37A1FF'}">{{ 'sequence.span.moduleOrgApi'|transloco }}</span>
            <span [ngStyle]="{ 'color': '#7229a9'}"
            >{{ "(" + moduleTitleOrg + ")" }}
                    </span>
        </div>
        <div disabled>
            &#8592;
            <span [ngStyle]="{ 'color': '#37A1FF'}">{{ 'sequence.span.moduleOrgApi'|transloco }}</span>
            <span [ngStyle]="{ 'color': '#7229a9'}"
                  [pTooltip]="apiTitleOrg"
                  [tooltipDisabled]="apiTitleOrg?apiTitleOrg.length < 19:false">
                    {{ "(" + apiTitleOrg + ")"|threeDotBreadcrumbPipe }}
                    </span>
        </div>
    </div>
    <div *ngIf="!sequenceFlag">
        <p-message severity="error">{{ 'sequence.text.thereIsNotActiveSequence'|transloco }}</p-message>
    </div>

    <div class="grid grid-cols-12" *ngIf="sequenceFlag">
        <div class="col-span-6">
            <label class="normal-label">
                <span class="red-color-text">* </span>
                <span>عنوان :</span></label>
            <input pInputText [(ngModel)]="title" class="normal-input" disabled>
        </div>
        <div class="col-span-6"></div>

        <div class="col-span-12 mt-3">
            <p-fieldset legend=" سرویس اول">

                <div class=" grid grid-cols-12">
                    <div class="col-span-4">
                        <label class="normal-label">
                            <span class="red-color-text">* </span>
                            <span>نام سازمان :</span></label>
                        <p-dropdown
                            class="normal-dropdown"
                            [options]="partyListOptionsFirst"
                            [(ngModel)]="partyIdFirst"
                            optionValue="partyId"
                            [filter]="true"
                            filterBy="title"
                            optionLabel="title"
                            [disabled]=true
                        >
                        </p-dropdown>
                    </div>
                    <div class="col-span-4">
                        <label class="normal-label">
                            <span class="red-color-text">* </span>
                            <span>ماژول :</span></label>
                        <p-dropdown
                            class="normal-dropdown"
                            [options]="moduleListOptionsFirst"
                            [(ngModel)]="moduleIdFirst"
                            optionValue="moduleId"
                            [filter]="true"
                            filterBy="moduleTitle"
                            optionLabel="moduleTitle"
                            [disabled]=true
                        >
                        </p-dropdown>
                    </div>
                    <div class="col-span-4">

                        <br>
                        <div class="flex flex-wrap gap-2 ">
                            <button pButton [outlined]="true" [disabled]=true class="normal-button w-15"
                                    icon="pi pi-filter-slash"></button>

                            <button type="button" pButton (click)="setRecord(1);menu.toggle($event)"
                                    class="normal-button w-15"
                                    pRipple icon="pi pi-chevron-down"></button>

                            <button pButton label="400" severity="warn" [icon]="icon400_valFirst"
                                    class="normal-button w-15"
                                    (click)="openMessage400(1)"></button>

                            <button pButton label="500" severity="danger" [icon]="icon500_valFirst"
                                    class="normal-button w-15"
                                    (click)="openMessage500(1)"></button>


                            <div class="col-span-12">
                                <button pButton label="پیام سفارشی" class="normal-button" [icon]="iconCus_valFirst"
                                        (click)="openMessageCus(1)"></button>

                            </div>
                        </div>
                        <p-tieredMenu appendTo="body" #menu [popup]="true" [model]="itemsFirst">
                        </p-tieredMenu>
                    </div>
                    <div class="col-span-4">
                        <label class="normal-label">
                            <span class="red-color-text">* </span>
                            <span>نام سرویس :</span></label>
                        <p-dropdown
                            class="normal-dropdown"
                            [options]="apiListOptionsFirst"
                            [(ngModel)]="apiIdFirst"
                            optionValue="apiId"
                            [filter]="true"
                            filterBy="title"
                            optionLabel="title"
                            [disabled]=true
                        >
                        </p-dropdown>
                    </div>
                    <div class="col-span-4">
                        <label class="normal-label">
                            <span class="red-color-text">* </span>
                            <span>اولویت اجرا :</span></label>
                        <p-dropdown
                            class="normal-dropdown"
                            [options]="actionTypeOptionsFirst"
                            [(ngModel)]="actionTypeFirst"
                            optionValue="code"
                            optionLabel="name"
                            [disabled]=true
                        >
                        </p-dropdown>
                    </div>
                    <!--  <div class="col-span-4">
                          <label class="normal-label">
<span class="red-color-text">* </span>
<span >سرویس بعدی :</span></label>
                          <p-dropdown
                              appendTo="body"
                              [options]="afterApiOptionsFirst"
                              [(ngModel)]="afterApiFirst"
                              optionValue="code"
                              optionLabel="name"
                              [disabled]=true
                          >
                          </p-dropdown>
                      </div>-->

                    <div class="col-span-4">

                        <div class="col-span-12 mt-3 md:col-span-6 lg:col-span-4">
                            <div class="flex items-center gap-2">
                                <p-checkbox [disabled]=true [(ngModel)]="runAsyncFirst"
                                            [binary]="true" inputId="runAsyncFirst"
                                ></p-checkbox>
                                <label class="normal-label"
                                       for="runAsyncFirst">{{ 'سرویس دارای اجرای (Async) می باشد'|transloco }}</label>
                            </div>
                        </div>

                    </div>
                    <div class="col-span-12">
                        <p-table [value]="matchListFirst" selectionMode="single">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th class="row">ردیف</th>
                                    <th>نود مورد نیاز</th>
                                    <th>گروه بندی نود مورد نیاز</th>
                                    <th>مسیر نود مورد نیاز</th>
                                    <th>نود تولید شده</th>
                                    <th>گروه بندی نود تولید شده</th>
                                    <th>مسیر نود تولید شده</th>
                                </tr>
                            </ng-template>
                            <ng-template let-i="rowIndex" pTemplate="body" let-api>
                                <tr [pSelectableRow]="api">
                                    <td class="row">{{ i + 1 }}</td>
                                    <td
                                        [pTooltip]="api.requiredNodeName"
                                        [tooltipDisabled]="api.requiredNodeName?
                                    api.requiredNodeName.length < 20:false"
                                    >
                                        {{ api.requiredNodeName|moreChar19 }}
                                    </td>
                                    <td>
                                        {{ api.requiredNodePlace|detailType }}
                                    </td>
                                    <td [pTooltip]="api.requiredNodePath"
                                        [tooltipDisabled]="api.requiredNodePath?
                                    api.requiredNodePath.length < 56:false">
                                        {{ api.requiredNodePath|morChar55 }}
                                    </td>
                                    <td
                                        [pTooltip]="api.producedNodeName"
                                        [tooltipDisabled]="api.producedNodeName?
                                    api.producedNodeName.length < 20:false"
                                    >
                                        {{ api.producedNodeName|moreChar19 }}
                                    </td>
                                    <td>
                                        {{ api.producedNodePlace|detailType }}
                                    </td>
                                    <td [pTooltip]="api.producedNodePath"
                                        [tooltipDisabled]="api.producedNodePath?
                                    api.producedNodePath.length < 56:false">
                                        {{ api.producedNodePath|morChar55 }}
                                    </td>

                                    <!-- <td class="text-right border-r border-[#ebe8e8]" >
                                         <button (click)="setRecord(api)" type="button"
                                                 class="p-button-rounded  " pButton
                                                 pRipple icon="pi pi-chevron-down" (click)="menuFirstApi.toggle($event)"></button>&nbsp;
                                         <p-tieredMenu appendTo="body" #menuFirstApi [popup]="true" [model]="itemsFirst">
                                         </p-tieredMenu>
                                     </td>-->
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </p-fieldset>
        </div>
        <br hidden>
        <p-fieldset hidden>
            <ng-template pTemplate="header">
            <span style="
            background-color:#99e7d5;
            padding: 5px;
            border-radius: 4px;
            color:#034f3d;">
                سرویس دوم
            </span>
            </ng-template>
            <div class=" grid">
                <div class="col-span-4">
                    <label class="normal-label"> <span>نام سازمان :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="partyListOptionsSecond"
                        [(ngModel)]="partyIdSecond"
                        optionValue="partyId"
                        [filter]="true"
                        filterBy="title"
                        optionLabel="title"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>ماژول :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="moduleListOptionsSecond"
                        [(ngModel)]="moduleIdSecond"
                        optionValue="moduleId"
                        [filter]="true"
                        filterBy="moduleTitle"
                        optionLabel="moduleTitle"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">

                    <button pButton [outlined]="true" icon="pi pi-filter-slash" [disabled]=true
                            style="width: 30px; margin-right: 5px"></button>&nbsp;
                    <button type="button" pButton style="width: 30px" (click)="setRecord(2)"
                            pRipple icon="pi pi-chevron-down" (click)="menu.toggle($event)"
                            [disabled]="secondPart"></button>&nbsp;
                    <button pButton label="400" class="p-button-warning" [icon]="icon400_valSecond"
                            (click)="openMessage400(2)"></button>&nbsp;
                    <button pButton label="500" severity="danger" [icon]="icon500_valSecond"
                            (click)="openMessage500(2)"></button>

                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>نام سرویس :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="apiListOptionsSecond"
                        [(ngModel)]="apiIdSecond"
                        optionValue="apiId"
                        [filter]="true"
                        filterBy="title"
                        optionLabel="title"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>اولویت اجرا :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="actionTypeOptionsSecond"
                        [(ngModel)]="actionTypeSecond"
                        optionValue="code"
                        optionLabel="name"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>سرویس بعدی :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="afterApiOptionsSecond"
                        [(ngModel)]="afterApiSecond"
                        optionValue="code"
                        optionLabel="name"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <div class="grid grid-cols-12">

                        <div class="col-2-7" style="margin-right: 3px;margin-top: 5px">
                            <label style="margin-bottom: 8px"><span
                            >سرویس دارای اجرای (Async) می باشد :</span></label>
                        </div>
                        <div class="col-0-5">
                            <p-checkbox [disabled]=true [(ngModel)]="runAsyncSecond" [binary]="true"
                                        inputId="binary"></p-checkbox>
                        </div>
                    </div>
                </div>
                <div class="col-span-12">
                    <p-table [value]="matchListSecond" selectionMode="single"
                    >
                        <ng-template pTemplate="header">
                            <tr>
                                <th class="row">table.header.row</th>
                                <th>نود مورد نیاز</th>
                                <th>گروه بندی نود مورد نیاز</th>
                                <th>مسیر نود مورد نیاز</th>
                                <th>نود تولید شده</th>
                                <th>گروه بندی نود تولید شده</th>
                                <th>مسیر نود تولید شده</th>
                                <!-- <th style="text-align: right !important;border-right: 1px solid #ebe8e8;" >
                                     operation
                                 </th>-->
                            </tr>
                        </ng-template>
                        <ng-template let-i="rowIndex" pTemplate="body" let-api>
                            <tr [pSelectableRow]="api">
                                <td class="row">{{ i + 1 }}</td>
                                <td
                                    [pTooltip]="api.nodeNameRequired"
                                    [tooltipDisabled]="api.nodeNameRequired?
                                    api.nodeNameRequired.length < 20:false"
                                >
                                    {{ api.nodeNameRequired|moreChar19 }}
                                </td>
                                <td>
                                    {{ api.nodePlaceRrequired|detailType }}
                                </td>
                                <td [pTooltip]="api.nodePathRrequired"
                                    [tooltipDisabled]="api.nodePathRrequired?
                                    api.nodePathRrequired.length < 56:false">
                                    {{ api.nodePathRrequired|morChar55 }}
                                </td>
                                <td
                                    [pTooltip]="api.nodeNameProduced"
                                    [tooltipDisabled]="api.nodeNameProduced?
                                    api.nodeNameProduced.length < 20:false"
                                >
                                    {{ api.nodeNameProduced|moreChar19 }}
                                </td>
                                <td>
                                    {{ api.nodePlaceProduced|detailType }}
                                </td>
                                <td [pTooltip]="api.nodePathProduced"
                                    [tooltipDisabled]="api.nodePathProduced?
                                    api.nodePathProduced.length < 56:false">
                                    {{ api.nodePathProduced|morChar55 }}
                                </td>
                                <!-- <td class="text-right border-r border-[#ebe8e8]" >
                                     <button  [disabled]="secondPart" (click)="setRecordSecond(api)" type="button"
                                             class="p-button-rounded  " pButton
                                             pRipple icon="pi pi-chevron-down" (click)="menu.toggle($event)"></button>&nbsp;
                                     <p-tieredMenu appendTo="body" #menu [popup]="true" [model]="itemsFirst">
                                     </p-tieredMenu>
                                 </td>-->
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
        </p-fieldset>

        <p-fieldset hidden>
            <ng-template pTemplate="header">
            <span style="
            background-color:#e7e699;
            padding: 5px;
            border-radius: 4px;
            color:#4c4f03;">
                سرویس سوم
            </span>
            </ng-template>
            <div class=" grid">
                <div class="col-span-4">
                    <label class="normal-label"> <span>نام سازمان :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="partyListOptionsThird"
                        [(ngModel)]="partyIdThird"
                        optionValue="partyId"
                        [filter]="true"
                        filterBy="title"
                        optionLabel="title"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>ماژول :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="moduleListOptionsThird"
                        [(ngModel)]="moduleIdThird"
                        optionValue="moduleId"
                        [filter]="true"
                        filterBy="moduleTitle"
                        optionLabel="moduleTitle"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">

                    <button pButton [outlined]="true" icon="pi pi-filter-slash" [disabled]=true
                            style="width: 30px; margin-right: 5px"></button>&nbsp;
                    <button type="button" pButton style="width: 30px" (click)="setRecord(3)"
                            pRipple icon="pi pi-chevron-down" (click)="menu.toggle($event)"
                            [disabled]="thirdPart"></button>&nbsp;
                    <button pButton label="400" class="p-button-warning" [icon]="icon400_valThird"
                            (click)="openMessage400(3)"></button>&nbsp;
                    <button pButton label="500" severity="danger" [icon]="icon500_valThird"
                            (click)="openMessage500(3)"></button>


                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>نام سرویس :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="apiListOptionsThird"
                        [(ngModel)]="apiIdThird"
                        optionValue="apiId"
                        [filter]="true"
                        filterBy="title"
                        optionLabel="title"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>اولویت اجرا :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="actionTypeOptionsThird"
                        [(ngModel)]="actionTypeThird"
                        optionValue="code"
                        optionLabel="name"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>سرویس بعدی :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="afterApiOptionsThird"
                        [(ngModel)]="afterApiThird"
                        optionValue="code"
                        optionLabel="name"
                        [disabled]=true
                    >
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <div class="grid grid-cols-12">

                        <div class="col-2-7" style="margin-right: 3px;margin-top: 5px">
                            <label style="margin-bottom: 8px"><span
                            >سرویس دارای اجرای (Async) می باشد :</span></label>
                        </div>
                        <div class="col-0-5">
                            <p-checkbox [disabled]=true [(ngModel)]="runAsyncThird" [binary]="true"
                                        inputId="binary"></p-checkbox>
                        </div>
                    </div>
                </div>
                <div class="col-span-12 mt-3">
                    <p-table [value]="matchListThird" selectionMode="single"
                    >
                        <ng-template pTemplate="header">
                            <tr>
                                <th class="row">table.header.row</th>
                                <th>نود مورد نیاز</th>
                                <th>گروه بندی نود مورد نیاز</th>
                                <th>مسیر نود مورد نیاز</th>
                                <th>نود تولید شده</th>
                                <th>گروه بندی نود تولید شده</th>
                                <th>مسیر نود تولید شده</th>


                            </tr>
                        </ng-template>
                        <ng-template let-i="rowIndex" pTemplate="body" let-api>
                            <tr [pSelectableRow]="api">
                                <td class="row">{{ i + 1 }}</td>
                                <td
                                    [pTooltip]="api.requiredNodeName"
                                    [tooltipDisabled]="api.requiredNodeName?
                                    api.requiredNodeName.length < 20:false"
                                >
                                    {{ api.nodeNameRequired|moreChar19 }}
                                </td>
                                <td>
                                    {{ api.requiredNodePlace|detailType }}
                                </td>
                                <td [pTooltip]="api.requiredNodePath"
                                    [tooltipDisabled]="api.requiredNodePath?
                                    api.requiredNodePath.length < 56:false">
                                    {{ api.requiredNodePath|morChar55 }}
                                </td>
                                <td
                                    [pTooltip]="api.producedNodeName"
                                    [tooltipDisabled]="api.producedNodeName?
                                    api.producedNodeName.length < 20:false"
                                >
                                    {{ api.producedNodeName|moreChar19 }}
                                </td>
                                <td>
                                    {{ api.producedNodePlace|detailType }}
                                </td>
                                <td [pTooltip]="api.producedNodePath"
                                    [tooltipDisabled]="api.producedNodePath?
                                    api.producedNodePath.length < 56:false">
                                    {{ api.producedNodePath|morChar55 }}
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
        </p-fieldset>
    </div>


    <div class="grid grid-cols-12">
        <div class="col-span-12">

            <div class="col-span-12 my-4" *ngIf="!addFlag&&!sequenceFlag">
                <button pButton label="{{'sequence.button.createSequence' | transloco}}" class="normal-button"
                        icon="pi pi-plus" (click)="showAdd()"></button>
            </div>

        </div>
        <div class="col-span-12" dir="ltr">
            <button style=" margin: 5px" *ngIf="sequenceFlag" pButton
                    label="{{'غیرفعالسازی جریان پردازشی' | transloco}}"
                    severity="danger" icon="pi pi-times" [outlined]="true"
                    (click)="confirm()"></button>
        </div>
    </div>

</div>
<div class="col-span-12" *ngIf="addFlag">
    <app-sequence-register [inputSequenceRegister]="sequenceDto" (close)="onClose($event)"></app-sequence-register>
</div>

<p-confirmdialog #cd>
    <ng-template #headless let-message let-onAccept="onAccept" let-onReject="onReject">
        <div class="flex flex-col items-center p-8 bg-surface-0 dark:bg-surface-900 rounded">
            <div
                class="rounded-full bg-primary text-primary-contrast inline-flex justify-center items-center h-24 w-24 -mt-20"
            >
                <i class="pi pi-question !text-5xl"></i>
            </div>
            <span class="font-bold text-2xl block mb-2 mt-6">{{ message.header }}</span>
            <p class="mb-0">{{ message.message }}</p>
            <div class="flex items-center gap-2 mt-6">
                <button pButton label="{{'module.dialog.button.yes'|transloco}}" (click)="onAccept()"
                        class="w-32 bg-green-500 text-white border-none hover:bg-green-600 normal-button"></button>
                <button pButton label="{{'module.dialog.button.no'|transloco}}" [outlined]="true" (click)="onReject()"
                        class="w-32 bg-red-500 text-white border-none hover:bg-red-600 normal-button"></button>
            </div>
        </div>
    </ng-template>
</p-confirmdialog>
<p-dialog [style]="{'width':'60%'}" [(visible)]="dialogFirstMatchFlag"
          [modal]="true" [draggable]="false" appendTo="body"
          [resizable]="true">
    <p-panel header="{{'اتصال نود های تولید شده و نود های مورد نیاز' | transloco}}">
        <div class="content-page">
            <div class="grid grid-cols-12 " style="margin-top: 5px">
                <div class="col-span-6 my-2 mx-1">
                    <div class="grid grid-cols-12">
                        <div class="col-span-7">
                            <label class="normal-label">
                            <span  dir="rtl">
                                نود های تولید شده سرویس
                                <span [pTooltip]="apiTitleProduced"
                                      [tooltipDisabled]="apiTitleProduced?
                                    apiTitleProduced.length < 14:false">
                                    {{ apiTitleProduced|morChar13 }}
                                </span>
                            </span>
                                :
                            </label>
                        </div>
                        <div class="col-span-3" dir="ltr">
                            <label class="normal-label">
                            <span dir="rtl">
                                <span style="font-size: 10px;">قابل انتخاب</span>
                                <span style="font-size: 10px;color:#37a1ff">
                                    <span style="font-size: 10px;color:#37a1ff">(</span>
                                    <span style="font-size: 10px;color:#37a1ff">{{ countProduced }}</span>
                                    <span style="font-size: 10px;color:#37a1ff">)</span>
                                </span>
                            </span>
                            </label>
                        </div>
                    </div>

                    <p-listbox [options]="producedListFirst" [(ngModel)]="producedNode" optionLabel="nodeName">
                        <ng-template let-produced pTemplate="item">
                            <div [pTooltip]="produced.nodePath" tooltipPosition="top">
                                {{ produced.nodeName }}
                            </div>
                        </ng-template>
                    </p-listbox>
                </div>

                <div class="col-span-6 my-2 mx-1">
                    <div class="grid grid-cols-12">
                        <div class="col-span-7">
                            <label class="normal-label">
                            <span  dir="rtl">
                                نود های مورد نیاز سرویس
                                <span [pTooltip]="apiTitleRequired"
                                      [tooltipDisabled]="apiTitleRequired?
                                    apiTitleRequired.length < 14:false">
                                    {{ apiTitleRequired|morChar13 }}
                                </span>
                            </span>
                                :
                            </label>
                        </div>
                        <div class="col-span-3" dir="ltr">
                            <label class="normal-label">
                          <span  dir="rtl">
                                 <span style="font-size: 10px;">قابل انتخاب</span>
                                <span style="font-size: 10px;color:#37a1ff">
                                    <span style="font-size: 10px;color:#37a1ff">(</span>
                                    <span style="font-size: 10px;color:#37a1ff">{{ countRequired }}</span>
                                    <span style="font-size: 10px;color:#37a1ff">)</span>
                                </span>
                            </span>
                            </label>
                        </div>
                    </div>
                    <p-listbox [options]="requiredListFirst" [(ngModel)]="requiredNode" optionLabel="nodeName">
                        <ng-template let-required pTemplate="item">
                            <div [pTooltip]="required.nodePath" tooltipPosition="top">
                                {{ required.nodeName }}
                            </div>
                        </ng-template>
                    </p-listbox>
                </div>
                <div class="col-span-4"></div>
                <div class="col-span-4 my-2">
                    <button pButton label="{{'اتصال نود ها' | transloco}}" style="width: 100%;height: 30px;"
                            icon="pi pi-link " [disabled]="true"></button>
                </div>

                <div class="col-span-4"></div>
                <div class="col-span-12 mt-3">
                    <p-table [value]="matchListFirst" selectionMode="single"
                             [paginator]="false" [rows]="rows" [showCurrentPageReport]="true"
                             [(first)]="first"
                             [currentPageReportTemplate]=paginationLabel
                             [rowsPerPageOptions]="[5,10,25,50,100]">
                        <ng-template pTemplate="header">
                            <tr>
                                <th class="row">table.header.row</th>
                                <th>نود مورد نیاز</th>
                                <th>گروه بندی نود مورد نیاز</th>
                                <th>مسیر نود مورد نیاز</th>
                                <th>نود تولید شده</th>
                                <th>گروه بندی نود تولید شده</th>
                                <th>مسیر نود تولید شده</th>
                                <th style="text-align: right !important;border-right: 1px solid #ebe8e8;">
                                    operation
                                </th>

                            </tr>
                        </ng-template>
                        <ng-template let-i="rowIndex" pTemplate="body" let-api>
                            <tr [pSelectableRow]="api">
                                <td class="row">{{ i + 1 }}</td>
                                <td
                                    [pTooltip]="api.requiredNodeName"
                                    [tooltipDisabled]="api.requiredNodeName?
                                    api.requiredNodeName.length < 20:false"
                                >
                                    {{ api.requiredNodeName|moreChar19 }}
                                </td>
                                <td>
                                    {{ api.requiredNodePlace|detailType }}
                                </td>
                                <td [pTooltip]="api.requiredNodePath"
                                    [tooltipDisabled]="api.requiredNodePath?
                                    api.requiredNodePath.length < 33:false">
                                    {{ api.requiredNodePath|morChar32 }}
                                </td>
                                <td
                                    [pTooltip]="api.producedNodeName"
                                    [tooltipDisabled]="api.producedNodeName?
                                    api.producedNodeName.length < 20:false"
                                >
                                    {{ api.producedNodeName|moreChar19 }}
                                </td>
                                <td>
                                    {{ api.producedNodePlace|detailType }}
                                </td>
                                <td [pTooltip]="api.producedNodePath"
                                    [tooltipDisabled]="api.producedNodePath?
                                    api.producedNodePath.length < 33:false">
                                    {{ api.producedNodePath|morChar32 }}
                                </td>
                                <td class="text-right border-r border-[#ebe8e8]">
                                    <button type="button" [disabled]="true"
                                            class="p-button-rounded  " pButton
                                            pRipple icon="pi pi-chevron-down"></button>&nbsp;
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
                <div class="col-span-12" dir="ltr" style="margin-top: 15px">
                    <button pButton label="{{'sequence.dialog.button.close' | transloco}}"
                            severity="danger" icon="pi pi-times"
                            (click)="closeMatchNodesFirst()"></button>&nbsp;
                </div>
            </div>
        </div>
    </p-panel>
</p-dialog>
<p-dialog [style]="{'width':'60%'}" [(visible)]="message400Flag"
          [modal]="true" [draggable]="false" appendTo="body"
          [resizable]="true">
    <div style="width: 100%;margin: 1rem 1rem 0 1rem">
        <p-panel header="{{'انتخاب پیام 400' | transloco}}">
            <div class="content-page">
            <div class="grid grid-cols-12">
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>کد پیام :</span></label>
                    <p-dropdown
                        class="normal-dropdown"
                        [options]="statusCodeOptions400"
                        [(ngModel)]="codeMessage400"
                        optionValue="code"
                        optionLabel="name"
                        (onChange)="messageSearch400(this.apiNumber400)"
                        [disabled]="true"
                    >
                        <!--                        (onChange)="onchangeStatusCode()"-->
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>عنوان پیام :</span></label>
                    <input [(ngModel)]="titleMessage400" class="normal-input" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>پیام(فارسی) :</span></label>
                    <input [(ngModel)]="textMessage400" class="normal-input" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>پیام(انگلیسی) :</span></label>
                    <input [(ngModel)]="textENMessage400" class="normal-input" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>بخش پیام ها :</span></label>
                    <p-dropdown
                        class="normal-dropdown"
                        [options]="categoryMessages400"
                        optionValue="code"
                        optionLabel="name"
                        [(ngModel)]="tableIdMessage400"
                        (onChange)="messageSearch400(this.apiNumber400)"
                        [disabled]="true">
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>نوع پیام ها :</span></label>
                    <p-dropdown
                        class="normal-dropdown"
                        [options]="typeMessages400"
                        optionValue="code"
                        optionLabel="name"
                        [(ngModel)]="typeMessage400"
                        (onChange)="messageSearch400(this.apiNumber400)"
                        [disabled]="true">
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <button pButton style="margin: 6px"
                            severity="success" dir="ltr"
                            label="{{'ثبت اطلاعات و انتخاب پیام' | transloco}}"
                            icon="pi pi-check"
                            (click)="onRegisterMessage400(this.apiNumber400)"
                            disabled
                    ></button>&nbsp;
                    <!--  (click)="onRegisterMessage()"-->
                </div>
                <div class="col-span-4  my-1 px-4 py-2 " dir="ltr">
                    <button pButton label="{{'button.clear'|transloco}}" [outlined]="true" disabled
                            icon="pi pi-filter-slash" (click)="messageClear400(this.apiNumber400)"
                            class="normal-button"
                            style="margin: 6px"></button>
                    <button pButton label="{{'button.search' | transloco}}" style="width: 110px;margin: 6px"
                            class="normal-button" icon="pi pi-search" disabled
                            (click)="messageSearch400(this.apiNumber400)"></button>&nbsp;&nbsp;
                </div>
                <div class="col-span-4"></div>
                <div class="col-span-12">
                    <!--
                                                <p-card>
                    -->
                    <p-table [value]="messagesList400Temp" selectionMode="single"
                             [paginator]="true" [rows]="rows400" [showCurrentPageReport]="true"
                             [(first)]="first400"
                             [currentPageReportTemplate]=paginationLabel
                             [rowsPerPageOptions]="[5,10,25,50,100]">
                        <ng-template pTemplate="header">
                            <tr>
                                <th class="row">شناسه واحد پیام</th>
                                <th>کد پیام</th>
                                <th>عنوان پیام</th>
                                <th>بخش پیام ها</th>
                                <th>پیام سیستمی</th>
                                <th>operation</th>
                            </tr>
                        </ng-template>
                        <ng-template let-i="rowIndex" pTemplate="body" let-messages>
                            <tr [pSelectableRow]="messages">
                                <td class="row">{{ messages.messageId }}</td>
                                <td>{{ messages.code }}</td>
                                <td
                                    [pTooltip]="messages.tableId"
                                    [tooltipDisabled]="messages.tableId?messages.tableId.length < 20:false"
                                >
                                    {{ messages.title|moreChar19 }}
                                </td>
                                <td>{{ messages.tableId|messagesCategory }}</td>
                                <td>
                                    <img *ngIf="messages.isSystemMessage==1" class="w-6 h-6 object-contain block"
                                         src="assets/icons/correct.jpeg">
                                    <img *ngIf="messages.isSystemMessage==0" class="w-6 h-6 object-contain block"
                                         src="assets/icons/cross.jpeg">
                                </td>
                                <td dir="ltr">
                                    <button pButton label="انتخاب پیام" icon="pi pi-check" disabled
                                            (click)="selectedMessage400(messages,this.apiNumber400)"></button>&nbsp;
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                    <!--
                                                </p-card>
                    -->
                </div>
                <div class="col-span-12" dir="ltr" style="margin-top: 15px">
                    <button type="button" pButton severity="danger" label="بستن" class="normal-button"
                            icon="pi pi-times"
                            (click)="message400Flag=false"></button>
                </div>
            </div>
            </div>
        </p-panel>
    </div>

</p-dialog>
<p-dialog [style]="{'width':'60%'}" [(visible)]="message500Flag"
          [modal]="true" [draggable]="false" appendTo="body"
          [resizable]="true">
    <div style="width: 100%;margin: 1rem 1rem 0 1rem">
        <p-panel header="{{'انتخاب پیام 500' | transloco}}">
            <div class="content-page">
            <div class="grid grid-cols-12">
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>کد پیام :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="statusCodeOptions500"
                        [(ngModel)]="codeMessage500"
                        optionValue="code"
                        optionLabel="name"
                        [disabled]="true"
                    >
                        <!--                        (onChange)="onchangeStatusCode()"-->
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>عنوان پیام :</span></label>
                    <input [(ngModel)]="titleMessage500" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>پیام(فارسی) :</span></label>
                    <input [(ngModel)]="textMessage500" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>پیام(انگلیسی) :</span></label>
                    <input [(ngModel)]="textENMessage500" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>بخش پیام ها :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="categoryMessages500"
                        optionValue="code"
                        optionLabel="name"
                        [(ngModel)]="tableIdMessage500"
                        (onChange)="messageSearch500(this.apiNumber500)"
                        [disabled]="true">
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>نوع پیام ها :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="typeMessages500"
                        optionValue="code"
                        optionLabel="name"
                        [(ngModel)]="typeMessage500"
                        (onChange)="messageSearch500(this.apiNumber500)"
                        [disabled]="true">
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <button pButton style="margin: 6px"
                            severity="success" dir="ltr"
                            label="{{'ثبت اطلاعات و انتخاب پیام' | transloco}}"
                            icon="pi pi-check" disabled
                            (click)="onRegisterMessage500(this.apiNumber500)"
                    ></button>&nbsp;
                    <!--  (click)="onRegisterMessage()"-->
                </div>
                <div class="col-span-12" dir="ltr">

                    <button pButton label="{{'button.search' | transloco}}" style="width: 110px;margin: 6px"
                            class="normal-button" icon="pi pi-search" disabled
                            (click)="messageSearch500(this.apiNumber500)"></button>&nbsp;&nbsp;
                    <button pButton label="{{'button.clear'|transloco}}" [outlined]="true" disabled
                            icon="pi pi-filter-slash" (click)="messageClear500(this.apiNumber500)"
                            style="margin: 6px">

                    </button>
                </div>

                <div class="col-span-12">
                    <!--
                                                <p-card>
                    -->
                    <p-table [value]="messagesList500Temp" selectionMode="single"
                             [paginator]="true" [rows]="rows500" [showCurrentPageReport]="true"
                             [(first)]="first500"
                             [currentPageReportTemplate]=paginationLabel
                             [rowsPerPageOptions]="[5,10,25,50,100]">
                        <ng-template pTemplate="header">
                            <tr>
                                <th class="row">شناسه واحد پیام</th>
                                <th>کد پیام</th>
                                <th>عنوان پیام</th>
                                <th>بخش پیام ها</th>
                                <th>پیام سیستمی</th>
                                <th>operation</th>
                            </tr>
                        </ng-template>
                        <ng-template let-i="rowIndex" pTemplate="body" let-messages>
                            <tr [pSelectableRow]="messages">
                                <td class="row">{{ messages.messageId }}</td>
                                <td>{{ messages.code }}</td>
                                <td
                                    [pTooltip]="messages.tableId"
                                    [tooltipDisabled]="messages.tableId?messages.tableId.length < 20:false"
                                >
                                    {{ messages.title|moreChar19 }}
                                </td>
                                <td>{{ messages.tableId|messagesCategory }}</td>
                                <td>
                                    <img *ngIf="messages.isSystemMessage==1" class="w-6 h-6 object-contain block"
                                         src="assets/icons/correct.jpeg">
                                    <img *ngIf="messages.isSystemMessage==0" class="w-6 h-6 object-contain block"
                                         src="assets/icons/cross.jpeg">
                                </td>
                                <td dir="ltr">
                                    <button pButton label="انتخاب پیام" icon="pi pi-check"
                                            disabled (click)="selectedMessage500(messages,this.apiNumber500)"></button>&nbsp;
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                    <!--
                                                </p-card>
                    -->
                </div>
                <div class="col-span-12" dir="ltr" style="margin-top: 15px">
                    <button type="button" pButton severity="danger" label="بستن" class="normal-button"
                            icon="pi pi-times"
                            (click)="message500Flag=false"></button>
                </div>
            </div>
            </div>
        </p-panel>
    </div>

</p-dialog>
<p-dialog [style]="{'width':'60%'}" [(visible)]="messageCusFlag"
          [modal]="true" [draggable]="false" appendTo="body"
          [resizable]="true">
    <div style="width: 100%;margin: 1rem 1rem 0 1rem">
        <p-panel header="{{'انتخاب پیام سفارشی' | transloco}}">
            <div class="content-page">
            <div class="grid grid-cols-12">
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>کد پیام :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="statusCodeOptionsCus"
                        [(ngModel)]="codeMessageCus"
                        optionValue="code"
                        optionLabel="name"
                        [disabled]="true"
                    >
                        <!--                        (onChange)="onchangeStatusCode()"-->
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>عنوان پیام :</span></label>
                    <input [(ngModel)]="titleMessageCus" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>پیام(فارسی) :</span></label>
                    <input [(ngModel)]="textMessageCus" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label"> <span>پیام(انگلیسی) :</span></label>
                    <input [(ngModel)]="textENMessageCus" disabled
                           pInputText>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>بخش پیام ها :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="categoryMessagesCus"
                        optionValue="code"
                        optionLabel="name"
                        [(ngModel)]="tableIdMessageCus"
                        (onChange)="messageSearchCus(this.apiNumberCus)"
                        [disabled]="true">
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <label class="normal-label">
                        <span class="red-color-text">* </span>
                        <span>نوع پیام ها :</span></label>
                    <p-dropdown
                        appendTo="body"
                        [options]="typeMessagesCus"
                        optionValue="code"
                        optionLabel="name"
                        [(ngModel)]="typeMessageCus"
                        (onChange)="messageSearchCus(this.apiNumberCus)"
                        [disabled]="true">
                    </p-dropdown>
                </div>
                <div class="col-span-4">
                    <button pButton style="margin: 6px" disabled
                            severity="success" dir="ltr"
                            label="{{'ثبت اطلاعات و انتخاب پیام' | transloco}}"
                            icon="pi pi-check"
                            (click)="onRegisterMessageCus(this.apiNumberCus)"
                    ></button>&nbsp;
                    <!--  (click)="onRegisterMessage()"-->
                </div>
                <div class="col-span-12" dir="ltr">

                    <button pButton label="{{'button.search' | transloco}}" style="width: 110px;margin: 6px"
                            class="normal-button" icon="pi pi-search" disabled
                            (click)="messageSearchCus(this.apiNumberCus)"></button>&nbsp;&nbsp;
                    <button pButton label="{{'button.clear'|transloco}}" [outlined]="true" disabled
                            icon="pi pi-filter-slash" (click)="messageClearCus(this.apiNumberCus)"
                            style="margin: 6px">

                    </button>
                </div>

                <div class="col-span-12">
                    <!--
                                                <p-card>
                    -->
                    <p-table [value]="messagesListCusTemp" selectionMode="single" disabled
                             [paginator]="true" [rows]="rowsCus" [showCurrentPageReport]="true"
                             [(first)]="firstCus" [totalRecords]="totalRecords"
                             [currentPageReportTemplate]=paginationLabel
                             [rowsPerPageOptions]="[5,10,25,50,100]">
                        <ng-template pTemplate="header">
                            <tr>
                                <th class="row">شناسه واحد پیام</th>
                                <th>کد پیام</th>
                                <th>عنوان پیام</th>
                                <th>بخش پیام ها</th>
                                <th>پیام سیستمی</th>
                                <th>operation</th>
                            </tr>
                        </ng-template>
                        <ng-template let-i="rowIndex" pTemplate="body" let-messages>
                            <tr [pSelectableRow]="messages">
                                <td class="row">{{ messages.messageId }}</td>
                                <td>{{ messages.code }}</td>
                                <td
                                    [pTooltip]="messages.tableId"
                                    [tooltipDisabled]="messages.tableId?messages.tableId.length < 20:false"
                                >
                                    {{ messages.title|moreChar19 }}
                                </td>
                                <td>{{ messages.tableId|messagesCategory }}</td>
                                <td>
                                    <img *ngIf="messages.isSystemMessage==1" class="w-6 h-6 object-contain block"
                                         src="assets/icons/correct.jpeg">
                                    <img *ngIf="messages.isSystemMessage==0" class="w-6 h-6 object-contain block"
                                         src="assets/icons/cross.jpeg">
                                </td>
                                <td dir="ltr">
                                    <button pButton label="انتخاب پیام" icon="pi pi-check" disabled
                                            (click)="selectedMessageCus(messages,this.apiNumberCus)"></button>&nbsp;
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                    <!--
                                                </p-card>
                    -->
                </div>
                <div class="col-span-12" dir="ltr" style="margin-top: 15px">
                    <button type="button" pButton severity="danger" label="بستن" class="normal-button"
                            icon="pi pi-times"
                            (click)="messageCusFlag=false"></button>
                </div>
            </div>
            </div>
        </p-panel>
    </div>

</p-dialog>
