<p-toast />
<app-breadcrumbs id="section" (backClicked)="BeforeButton()"></app-breadcrumbs>
<div class="fle flex-col w-full px-5 gap-4 my-10 " *ngIf="!addFlag&&!updateFlag">
    <div class="grid grid-cols-12" >
        <div class="col-span-12 mb-2">
            <button pButton label="{{'requiredNode.header.requiredNode' | transloco}}"
                    icon="pi pi-plus" (click)="showAdd()" class="normal-button"></button>
        </div>
    </div>
    <p-table [value]="requirednodeList" *ngIf="!addFlag&&!updateFlag"
             selectionMode="single" [paginator]="true" [rows]="rows"
             [showCurrentPageReport]="true" [(first)]="first"
             [currentPageReportTemplate]=paginationLabel
             [rowsPerPageOptions]="[5,10,25,50,100]">
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="row" class="row">
                    {{ 'requiredNode.table.header.row'|transloco }}
                    <p-sortIcon field="row"></p-sortIcon>
                </th>
                <th pSortableColumn="nodeName" class="nodeName">
                    {{ 'requiredNode.table.header.nodeName'|transloco }}
                    <p-sortIcon field="nodeName"></p-sortIcon>
                </th>
                <th pSortableColumn="nodePlace" class="nodePlace">
                    {{ 'requiredNode.table.header.nodePlace'|transloco }}
                    <p-sortIcon field="nodePlace"></p-sortIcon>
                </th>
                <th pSortableColumn="staticTextBefore" class="staticTextBefore">
                    {{ 'requiredNode.table.header.staticTextBefore'|transloco }}
                    <p-sortIcon field="staticTextBefore"></p-sortIcon>
                </th>
                <th pSortableColumn="staticTextAfter" class="staticTextAfter">
                    {{ 'requiredNode.table.header.staticTextAfter'|transloco }}
                    <p-sortIcon field="staticTextAfter"></p-sortIcon>
                </th>
                <th pSortableColumn="nodePath" class="nodePath">
                    {{ 'requiredNode.table.header.nodePath'|transloco }}
                    <p-sortIcon field="nodePath"></p-sortIcon>
                </th>
                <th class="text-right border-r border-[#ebe8e8]">
                    {{ 'requiredNode.table.header.operation'|transloco }}
                </th>
            </tr>
        </ng-template>
        <ng-template let-i="rowIndex" pTemplate="body" let-requirednode>
            <tr [pSelectableRow]="requirednode">
                <td class="row">{{ requirednode.row }}</td>
                <td
                    class="nodeName"
                    [pTooltip]="requirednode.nodeName"
                    [tooltipDisabled]="requirednode.nodeName?requirednode.nodeName.length < 20:false"
                >
                    {{ requirednode.nodeName|moreChar19 }}
                </td>
                <td
                    class="nodePlace"
                >
                    {{ requirednode.nodePlace|detailType }}
                </td>
                <td
                    class="staticTextBefore" dir="ltr"
                >
                    {{ requirednode.staticTextBefore|moreChar19 }}
                </td>
                <td
                    class="staticTextAfter" dir="ltr"
                >
                    {{ requirednode.staticTextAfter|moreChar19 }}
                </td>
                <td
                    class="nodePath" dir="ltr"
                    [pTooltip]="requirednode.nodePath"
                    [tooltipDisabled]="requirednode.nodePath?requirednode.nodePath.length < 20:false"
                >
                    {{ requirednode.nodePath|moreChar19 }}
                </td>

                <td class="text-right border-r border-[#ebe8e8]">
                    <button  type="button"
                            class="p-button-rounded " pButton
                            pRipple icon="pi pi-chevron-down"
                            (click)="setRecord(requirednode); menu.toggle($event)"></button>&nbsp;
                    <p-menu appendTo="body" #menu [popup]="true" [model]="items"></p-menu>
                </td>
            </tr>
        </ng-template>
    </p-table>


</div>
<div class="col-12" *ngIf="addFlag">
    <app-required-node-register [requiredInput]="producedDto"
                                (close)="onClose($event)"></app-required-node-register>
</div>
