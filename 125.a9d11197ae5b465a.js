"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[125],{7125:(X,_,o)=>{o.r(_),o.d(_,{CallServicesReportComponent:()=>x});var d=o(335),h=o(1141),g=o(177),c=o(8571),m=o(5144),v=o(2936),C=o(563),p=o(7471),E=o(7722),f=o(9634),l=o(9417),e=o(4020),u=o(3400),R=o(1317),b=o(7730),T=o(507),D=o(3523),P=o(3823),F=o(5779);const I=()=>[5,10,25,50,100];function M(s,n){1&s&&e.nrm(0,"app-breadcrumbs",4)}function O(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",18)(1,"button",19),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.downloadData())}),e.k0s()()}}function A(s,n){1&s&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0631\u062f\u06cc\u0641"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0646\u0627\u0645 \u0633\u0627\u0632\u0645\u0627\u0646"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0639\u0646\u0648\u0627\u0646 \u0645\u0627\u0698\u0648\u0644"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u0639\u0646\u0648\u0627\u0646 \u0633\u0631\u0648\u06cc\u0633"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0646\u0627\u0645 \u06a9\u0644\u0627\u06cc\u0646\u062a"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u062a\u0639\u062f\u0627\u062f \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0645\u0648\u0641\u0642"),e.k0s(),e.j41(13,"th"),e.EFF(14,"\u062a\u0639\u062f\u0627\u062f \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0646\u0627\u0645\u0648\u0641\u0642"),e.k0s(),e.j41(15,"th",23),e.EFF(16),e.nI1(17,"transloco"),e.k0s()()),2&s&&(e.R7$(16),e.SpI(" ",e.bMT(17,1,"callServicesReport.table.header.operation")," "))}function B(s,n){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td",24)(16,"button",25),e.bIt("click",function(){const r=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.setRecordReport(r))})("click",function(r){e.eBV(t);const a=e.sdS(19);return e.Njj(a.toggle(r))}),e.k0s(),e.EFF(17,"\xa0 "),e.nrm(18,"p-menu",26,0),e.k0s()()}if(2&s){const t=n.rowIndex,i=n.$implicit,r=e.XpG(3);e.R7$(2),e.JRh(t+1),e.R7$(2),e.JRh(i.PARTY_TITLE),e.R7$(2),e.JRh(i.MODULE_TITLE),e.R7$(2),e.JRh(i.API_TILE),e.R7$(2),e.JRh(i.CLIENT_NAME),e.R7$(2),e.JRh(i.SUCCESSCOUNT),e.R7$(2),e.JRh(i.FAILEDCOUNT),e.R7$(4),e.Y8G("popup",!0)("model",r.itemsReport)}}function L(s,n){if(1&s){const t=e.RV6();e.j41(0,"p-table",20),e.mxI("firstChange",function(r){e.eBV(t);const a=e.XpG(2);return e.DH7(a.first,r)||(a.first=r),e.Njj(r)}),e.DNE(1,A,18,3,"ng-template",21)(2,B,20,9,"ng-template",22),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("value",t.reportApiList)("paginator",!0)("rows",t.rows)("showCurrentPageReport",!0),e.R50("first",t.first),e.Y8G("currentPageReportTemplate",t.paginationLabel)("rowsPerPageOptions",e.lJ4(7,I))}}function j(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"label",9)(5,"span",10),e.EFF(6,"* "),e.k0s(),e.j41(7,"span"),e.EFF(8,"\u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639 :"),e.k0s()(),e.j41(9,"p-persian-calendar",11),e.mxI("ngModelChange",function(r){e.eBV(t);const a=e.XpG();return e.DH7(a.fromdate,r)||(a.fromdate=r),e.Njj(r)}),e.k0s()(),e.j41(10,"div",8)(11,"label",9)(12,"span",10),e.EFF(13,"* "),e.k0s(),e.j41(14,"span"),e.EFF(15,"\u062a\u0627\u0631\u06cc\u062e \u067e\u0627\u06cc\u0627\u0646 :"),e.k0s()(),e.j41(16,"p-persian-calendar",11),e.mxI("ngModelChange",function(r){e.eBV(t);const a=e.XpG();return e.DH7(a.todate,r)||(a.todate=r),e.Njj(r)}),e.k0s()(),e.nrm(17,"div",8),e.j41(18,"div",12)(19,"button",13),e.nI1(20,"transloco"),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.clear())}),e.k0s(),e.j41(21,"button",14),e.nI1(22,"transloco"),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.search())}),e.k0s(),e.EFF(23,"\xa0\xa0 "),e.k0s(),e.j41(24,"div",15),e.DNE(25,O,2,0,"div",16),e.k0s()(),e.DNE(26,L,3,8,"p-table",17),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(9),e.Y8G("yearRange","1399:1410"),e.R50("ngModel",t.fromdate),e.R7$(7),e.Y8G("yearRange","1399:1410"),e.R50("ngModel",t.todate),e.R7$(3),e.FS9("label",e.bMT(20,9,"button.clear")),e.Y8G("outlined",!0),e.R7$(2),e.FS9("label",e.bMT(22,11,"button.search")),e.R7$(4),e.Y8G("ngIf",t.tblFlag),e.R7$(),e.Y8G("ngIf",t.tblFlag)}}function S(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",15)(1,"app-log-reports",27),e.bIt("close",function(r){e.eBV(t);const a=e.XpG();return e.Njj(a.onClose(r))}),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("inputChartCallApiReport",t.dataLog)}}let x=(()=>{class s{constructor(t,i,r,a,U,k,G,y){this.router=t,this.route=i,this.commonValidationsService=r,this.transloco=a,this.messagesApiFacadeService=U,this._primengProgressBarService=k,this.notifierService=G,this.apiGatewayService=y,this.reportApiList=[],this.itemsReport=[],this.detailsBreadObject=[],this.tblFlag=!1,this.serviceLog=!1,this.last=0,this.first=0,this.rows=5,this.totalRecords=0,this.paginationLabel=this.transloco.translate("label.pagination.table")}onClose(t){this.scrollTop(),this.detailsBreadObject=this.chooseBread("logApiBase"),this.apiGatewayService.updateApprovalDetailsBreadObject(this.detailsBreadObject),"close"==t&&(this.serviceLog=!1)}validation(){return this.fromdate?this.todate?!(this.fromdate>this.todate&&(this.notifierService.showError({detail:"\u0644\u0637\u0641\u0627 \u0628\u0627\u0632\u0647 \u062a\u0627\u0631\u06cc\u062e \u0645\u0639\u062a\u0628\u0631 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f!",life:3e3}),1)):(this.notifierService.showError({detail:"\u0644\u0637\u0641\u0627 \u062a\u0627\u0631\u06cc\u062e \u067e\u0627\u06cc\u0627\u0646 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f!",life:3e3}),!1):(this.notifierService.showError({detail:"\u0644\u0637\u0641\u0627 \u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f!",life:3e3}),!1)}downloadData(){if(this.validation()){if(0==this.reportApiList.length)return this.notifierService.showError({detail:"\u062f\u06cc\u062a\u0627\u06cc\u06cc \u062c\u0647\u062a \u062f\u0627\u0646\u0644\u0648\u062f \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f!",life:3e3}),!1;this._primengProgressBarService.show(),this.messagesApiFacadeService.DownloadStatisticReport(1,this.fromdate,this.todate).subscribe(t=>{this._primengProgressBarService.hide()},t=>{this._primengProgressBarService.hide()})}}search(){this.validation()&&(this._primengProgressBarService.show(),this.messagesApiFacadeService.getstatisticReport(0,this.fromdate,this.todate).subscribe(t=>{this._primengProgressBarService.hide(),this.tblFlag=!0,this.reportApiList=Array.isArray(t)?t:[t],this.last=Math.min(this.first+this.rows,this.totalRecords);for(let i=0;i<this.reportApiList.length;i++)this.reportApiList[i]=Object.assign(this.reportApiList[i],{row:i+1})},t=>{this._primengProgressBarService.hide()}))}clear(){this.tblFlag=!1,this.fromdate=null,this.todate=null}scrollTop(){this.route.fragment.subscribe(t=>{const i=document.querySelector("#"+t);console.log(i),i&&i.scrollIntoView(!0)})}showDetail(t){this.dataLog={SUCCESSCOUNT:null,PARTYID:null,MODULEID:null,FAILEDCOUNT:null,PARTY_TITLE:"",MODULE_TITLE:"",APIID:null,CLIENT_NAME:"",API_TILE:"",fromdate:"",todate:"",chartFlag:""},console.log("report",t),this.dataLog=t,this.dataLog.chartFlag=!1,this.dataLog.fromdate=this.fromdate,this.dataLog.todate=this.todate,this.dataLog.callApiFlag=!0,this.serviceLog=!0}setRecordReport(t){this.tempLog=t}chooseBread(t){return"logApiBase"===t?[{index:0,label_index0:"\u06af\u0632\u0627\u0631\u0634\u0627\u062a",img_index0:"assets/icons/reports.png",rout_index0:"/home",isActive0:!1},{index:1,label_index1:"\u06af\u0632\u0627\u0631\u0634 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u062a\u062c\u0645\u06cc\u0639\u06cc \u0633\u0631\u0648\u06cc\u0633 \u0647\u0627",rout_index1:"",isActive1:!0,img_index1:"assets/icons/log.png"},{label_index2:null,label_Detail_index2:null},{label_index3:null,label_Detail_index3:null},{label_index4:null,label_Detail_index4:null},{label_index5:null,label_Detail_index5:null},{label_index6:null,label_Detail_index6:null}]:null}ngOnInit(){this.detailsBreadObject=this.chooseBread("logApiBase"),this.apiGatewayService.updateApprovalDetailsBreadObject(this.detailsBreadObject),this.scrollTop(),this.itemsReport=[{items:[{label:"\u062c\u0632\u0626\u06cc\u0627\u062a",icon:"",command:()=>{this.showDetail(this.tempLog)}}]},{label:"____________________________",items:[{label:this.transloco.translate("contextMenu.cancel")}]}]}BeforeButton(){this.router.navigate(["/main/home"])}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(u.Ix),e.rXU(u.nX),e.rXU(R.Bt),e.rXU(p.JO),e.rXU(b.k),e.rXU(T.X),e.rXU(D.f),e.rXU(P.s))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-call-services-report"]],decls:4,vars:3,consts:[["menuDaily",""],["id","section",4,"ngIf"],["class","grid flex-column",4,"ngIf"],["class","col-span-12",4,"ngIf"],["id","section"],[1,"grid","flex-column"],[1,"content-page"],[1,"grid","grid-cols-12"],[1,"col-span-3"],[1,"normal-label"],[1,"red-color-text"],[1,"app-persian-calendar-style",3,"ngModelChange","yearRange","ngModel"],[1,"col-span-3","btns-search-clear"],["pButton","","icon","pi pi-filter-slash",1,"my-1","px-4","py-2","border","normal-button",3,"click","label","outlined"],["pButton","","icon","pi pi-search",1,"w-[110px]","my-1","px-4","py-2","text-white","normal-button",2,"width","110px","margin","6px",3,"click","label"],[1,"col-span-12"],["dir","ltr",4,"ngIf"],["selectionMode","single",3,"value","paginator","rows","showCurrentPageReport","first","currentPageReportTemplate","rowsPerPageOptions","firstChange",4,"ngIf"],["dir","ltr"],["pButton","","label","\u062f\u0627\u0646\u0644\u0648\u062f","icon","pi pi-download",1,"normal-button",3,"click"],["selectionMode","single",3,"firstChange","value","paginator","rows","showCurrentPageReport","first","currentPageReportTemplate","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[2,"text-align","right !important","border-right","1px solid #ebe8e8"],[1,"text-right","border-r","border-[#ebe8e8]"],["type","button","pButton","","pRipple","","icon","pi pi-chevron-down",1,"p-button-rounded",3,"click"],["appendTo","body",3,"popup","model"],[3,"close","inputChartCallApiReport"]],template:function(i,r){1&i&&(e.nrm(0,"p-toast"),e.DNE(1,M,1,0,"app-breadcrumbs",1)(2,j,27,13,"div",2)(3,S,2,1,"div",3)),2&i&&(e.R7$(),e.Y8G("ngIf",!r.serviceLog),e.R7$(),e.Y8G("ngIf",!r.serviceLog),e.R7$(),e.Y8G("ngIf",r.serviceLog))},dependencies:[d.m,h._f,c.bG,c.XI,F.Ei,m.W1,v.LogReportsComponent,g.bT,C.n0,E.y8,p.Kj,f.C,l.YN,l.BC,l.vS],styles:[".container[_ngcontent-%COMP%]{position:relative}.topright[_ngcontent-%COMP%]{position:absolute;top:8px;right:0}[_nghost-%COMP%]{width:100%}"]})}}return s})()}}]);