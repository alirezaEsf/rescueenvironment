"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[192],{793:(g,d,s)=>{s.d(d,{W:()=>k});var e=s(4020),c=s(177),l=s(9417),_=s(4823),r=s(1141),u=s(8150),x=s(5144),b=s(5473),f=s(563),p=s(8571),v=s(8542),B=s(335);let A=(()=>{class n{transform(t){switch(Number(t)){case 1:return"\u0627\u0641\u0632\u0648\u062f\u0647 \u0634\u062f\u0647";case 2:return"\u062d\u0630\u0641 \u0634\u062f\u0647"}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=e.EJ8({name:"changeTypeId",type:n,pure:!0})}}return n})();var C=s(5813),y=s(74),T=s(7722),N=s(3400),L=s(7471),F=s(7730),I=s(3523),S=s(507),D=s(3823),M=s(5779);const j=()=>[5,10,25,50,100],w=()=>({"text-align":"center !important"}),P=(n,m)=>({"border-radius":" 2.5px",color:n,"background-color":m,width:"45px",margin:" 0 auto"});function O(n,m){1&n&&(e.j41(0,"tr")(1,"th",11),e.EFF(2," row "),e.nrm(3,"p-sortIcon",12),e.k0s(),e.j41(4,"th",13),e.EFF(5," \u0646\u0627\u0645 \u0646\u0648\u062f "),e.nrm(6,"p-sortIcon",14),e.k0s(),e.j41(7,"th",15),e.EFF(8," \u0645\u0642\u062f\u0627\u0631 \u0646\u0648\u062f "),e.nrm(9,"p-sortIcon",16),e.k0s(),e.j41(10,"th",17),e.EFF(11," \u0646\u0648\u0639 \u0639\u0645\u0644\u06cc\u0627\u062a \u0646\u0648\u062f "),e.nrm(12,"p-sortIcon",18),e.k0s(),e.j41(13,"th",19),e.EFF(14," \u0645\u0633\u06cc\u0631 \u0646\u0648\u062f "),e.nrm(15,"p-sortIcon",20),e.k0s(),e.j41(16,"th",21),e.EFF(17," \u0648\u0636\u0639\u06cc\u062a "),e.nrm(18,"p-sortIcon",22),e.k0s(),e.j41(19,"th",23),e.EFF(20," operation "),e.k0s()())}function R(n,m){if(1&n){const t=e.RV6();e.j41(0,"tr",24)(1,"td",25),e.EFF(2),e.k0s(),e.j41(3,"td",26),e.EFF(4),e.nI1(5,"moreChar19"),e.k0s(),e.j41(6,"td",27),e.EFF(7),e.nI1(8,"moreChar19"),e.k0s(),e.j41(9,"td",28),e.EFF(10),e.nI1(11,"changeTypeId"),e.k0s(),e.j41(12,"td",29),e.EFF(13),e.nI1(14,"moreChar19"),e.k0s(),e.j41(15,"td",30)(16,"div",31),e.EFF(17),e.nI1(18,"statusPipe"),e.k0s()(),e.j41(19,"td",32)(20,"button",33),e.bIt("click",function(){const a=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.setRecord(a))})("click",function(a){e.eBV(t);const o=e.sdS(23);return e.Njj(o.toggle(a))}),e.k0s(),e.EFF(21,"\xa0 "),e.nrm(22,"p-menu",34,0),e.k0s()()}if(2&n){const t=m.$implicit,i=e.XpG();e.Y8G("pSelectableRow",t),e.R7$(2),e.JRh(t.row),e.R7$(),e.Y8G("pTooltip",t.nodeName)("tooltipDisabled",!!t.nodeName&&t.nodeName.length<20),e.R7$(),e.SpI(" ",e.bMT(5,17,t.nodeName)," "),e.R7$(2),e.Y8G("pTooltip",t.nodeValue)("tooltipDisabled",!!t.nodeValue&&t.nodeValue.length<20),e.R7$(),e.SpI(" ",e.bMT(8,19,t.nodeValue)," "),e.R7$(3),e.SpI(" ",e.bMT(11,21,t.changeTypeId)," "),e.R7$(2),e.Y8G("pTooltip",t.schemaName)("tooltipDisabled",!!t.schemaName&&t.schemaName.length<20),e.R7$(),e.SpI(" ",e.bMT(14,23,t.schemaName)," "),e.R7$(2),e.Y8G("ngStyle",e.lJ4(27,w)),e.R7$(),e.Y8G("ngStyle",e.l_i(28,P,1==t.status?"#258F30":"#962515",0==t.status?"#F18B7D":"#85DC8F")),e.R7$(),e.SpI(" ",e.bMT(18,25,t.status),""),e.R7$(5),e.Y8G("popup",!0)("model",i.items)}}let k=(()=>{class n{constructor(t,i,a,o,h,E){this.route=t,this.transloco=i,this.messagesApiFacadeService=a,this.notifierService=o,this._primengProgressBarService=h,this.apiGatewayService=E,this.close=new e.bkB,this.detailsBreadObject=[],this.createMediatorFlag=!0,this.countLicense=0,this.nodeName="",this.first=0,this.rows=10,this.paginationLabel=this.transloco.translate("label.pagination.table")}chooseBread(t){switch(t){case"moduleBase":return[{index:0,label_index0:"\u0635\u0641\u062d\u0647 \u0627\u0635\u0644\u06cc",img_index0:"assets/icons/home.png",rout_index0:"/home",isActive0:!1},{index:1,label_index1:"\u0645\u0627\u0698\u0648\u0644",rout_index1:"/module",isActive1:!1,img_index1:"assets/icons/module.png"},{index:2,label_index2:"\u0633\u0631\u0648\u06cc\u0633",rout_index2:null,isActive2:!1,label_Detail_index2:"("+this.moduleTitle+")",img_index2:"assets/icons/api.png"},{index:3,label_index3:"\u0644\u06cc\u0633\u062a \u0645\u062f\u06cc\u0627\u062a\u0648\u0631 \u0647\u0627",rout_index3:"",isActive3:!1,img_index3:"assets/icons/mediators.png",label_Detail_index3:"("+this.apiTitle+")"},{index:4,label_index4:"\u0644\u06cc\u0633\u062a \u0646\u0648\u062f \u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637",rout_index4:"",isActive4:!0,img_index4:"assets/icons/node.png",label_Detail_index4:"("+this.nodeName+")"},{label_index5:null,label_Detail_index5:null},{label_index6:null,label_Detail_index6:null}];case"partyBase":return[{index:0,label_index0:"\u0635\u0641\u062d\u0647 \u0627\u0635\u0644\u06cc",img_index0:"assets/icons/home.png",rout_index0:"/home",isActive0:!1},{index:1,label_index1:"\u0633\u0627\u0632\u0645\u0627\u0646",rout_index1:"/party",isActive1:!1,img_index1:"assets/icons/party.png"},{index:2,label_index2:"\u0645\u0627\u0698\u0648\u0644",rout_index2:"",isActive2:!1,label_Detail_index2:"("+this.partyTitle+")",img_index2:"assets/icons/module.png"},{index:3,label_index3:"\u0633\u0631\u0648\u06cc\u0633",rout_index3:null,isActive3:!1,label_Detail_index3:"("+this.moduleTitle+")",img_index3:"assets/icons/api.png"},{index:4,label_index4:"\u0644\u06cc\u0633\u062a \u0645\u062f\u06cc\u0627\u062a\u0648\u0631 \u0647\u0627",rout_index4:"",isActive4:!1,img_index4:"assets/icons/mediators.png",label_Detail_index4:"("+this.apiTitle+")"},{index:5,label_index5:"\u0644\u06cc\u0633\u062a \u0646\u0648\u062f \u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637",rout_index5:"",isActive5:!0,img_index5:"assets/icons/node.png",label_Detail_index5:"("+this.nodeName+")"},{label_index6:null,label_Detail_index6:null}];case"accessBase":return[{index:0,label_index0:"\u0635\u0641\u062d\u0647 \u0627\u0635\u0644\u06cc",img_index0:"assets/icons/home.png",rout_index0:"/home",isActive0:!1},{index:1,label_index1:"\u0644\u06cc\u0633\u062a \u062f\u0633\u062a\u0631\u0633\u06cc",rout_index1:"/api-gateway/access-list",isActive1:!1,img_index1:"assets/icons/access.png"},{index:2,label_index2:"\u0633\u0631\u0648\u06cc\u0633",rout_index2:null,isActive2:!1,img_index2:"assets/icons/api.png",label_Detail_index2:"("+this.moduleTitle+")"},{index:3,label_index3:"\u0644\u06cc\u0633\u062a \u0645\u062f\u06cc\u0627\u062a\u0648\u0631 \u0647\u0627",rout_index3:"",isActive3:!1,img_index3:"assets/icons/mediators.png",label_Detail_index3:"("+this.apiTitle+")"},{index:4,label_index4:"\u0644\u06cc\u0633\u062a \u0646\u0648\u062f \u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637",rout_index4:"",isActive4:!0,img_index4:"assets/icons/node.png",label_Detail_index4:"("+this.nodeName+")"},{label_index5:null,label_Detail_index5:null},{label_index6:null,label_Detail_index6:null}];case"clientBase":return[{index:0,label_index0:"\u0635\u0641\u062d\u0647 \u0627\u0635\u0644\u06cc",img_index0:"assets/icons/home.png",rout_index0:"/home",isActive0:!1},{index:1,label_index1:"\u06a9\u0644\u0627\u06cc\u0646\u062a",rout_index1:"/client",isActive1:!1,img_index1:"assets/icons/client.png"},{index:2,label_index2:"\u0644\u06cc\u0633\u062a \u062f\u0633\u062a\u0631\u0633\u06cc",rout_index2:"/api-gateway/access-list",isActive2:!1,img_index2:"assets/icons/access.png",label_Detail_index2:"("+this.clientName+")"},{index:3,label_index3:"\u0633\u0631\u0648\u06cc\u0633",rout_index3:null,isActive3:!1,label_Detail_index3:"("+this.clientName+")",img_index3:"assets/icons/api.png"},{index:4,label_index4:"\u0644\u06cc\u0633\u062a \u0645\u062f\u06cc\u0627\u062a\u0648\u0631 \u0647\u0627",rout_index4:"",isActive4:!1,img_index4:"assets/icons/mediators.png",label_Detail_index4:"("+this.apiTitle+")"},{index:5,label_index5:"\u0644\u06cc\u0633\u062a \u0646\u0648\u062f \u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637",rout_index5:"",isActive5:!0,img_index5:"assets/icons/node.png",label_Detail_index5:"("+this.nodeName+")"},{label_index6:null,label_Detail_index6:null}];case"mediatorBase":return[{index:0,label_index0:"\u0635\u0641\u062d\u0647 \u0627\u0635\u0644\u06cc",img_index0:"assets/icons/home.png",rout_index0:"/home",isActive0:!1},{index:1,label_index1:"\u0644\u06cc\u0633\u062a \u0645\u062f\u06cc\u0627\u062a\u0648\u0631 \u0647\u0627",rout_index1:"",isActive1:!1,img_index1:"assets/icons/mediators.png"},{index:2,label_index2:"\u0644\u06cc\u0633\u062a \u0646\u0648\u062f \u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637",rout_index2:"",isActive2:!0,img_index2:"assets/icons/node.png",label_Detail_index2:"("+this.nodeName+")"},{label_index3:null,label_Detail_index3:null},{label_index4:null,label_Detail_index4:null},{label_index5:null,label_Detail_index5:null},{label_index6:null,label_Detail_index6:null}];default:return null}}scrollTop(){this.route.fragment.subscribe(t=>{const i=document.querySelector("#"+t);console.log(i),i&&i.scrollIntoView(!0)})}ngOnInit(){this.scrollTop(),null!=this.inputListMedia?(this.mediatorId=this.inputListMedia.mediatorId,this.nodeName=this.inputListMedia.title,this._primengProgressBarService.show(),this.messagesApiFacadeService.findbymediatorid(this.mediatorId).subscribe(t=>{this._primengProgressBarService.hide(),Array.isArray(t)?this.nodesList=t:this.nodesList.push(t),this.nodesList.map(i=>i.status=1===i.status);for(let i=0;i<this.nodesList.length;i++)this.nodesList[i]=Object.assign(this.nodesList[i],{row:i+1})},t=>{this._primengProgressBarService.hide()}),this.detailsBreadObject=this.chooseBread("mediatorBase"),this.apiGatewayService.updateApprovalDetailsBreadObject(this.detailsBreadObject)):null!=this.inputListMediatorApi&&(this.accessBase=this.inputListMediatorApi.accessBase,this.moduleBase=this.inputListMediatorApi.moduleBase,this.partyBase=this.inputListMediatorApi.partyBase,this.clientBase=this.inputListMediatorApi.clientBase,this.moduleTitle=this.inputListMediatorApi.moduleTitle,this.clientName=this.inputListMediatorApi.clientName,this.partyTitle=this.inputListMediatorApi.partyTitle,this.mediatorId=this.inputListMediatorApi.mediatorId,this.nodeName=this.inputListMediatorApi.title,this.apiTitle=this.inputListMediatorApi.apiTitle,this.search(),this.accessBase?(this.detailsBreadObject=this.chooseBread("accessBase"),this.apiGatewayService.updateApprovalDetailsBreadObject(this.detailsBreadObject)):this.moduleBase?(this.detailsBreadObject=this.chooseBread("moduleBase"),this.apiGatewayService.updateApprovalDetailsBreadObject(this.detailsBreadObject)):this.partyBase?(this.detailsBreadObject=this.chooseBread("partyBase"),this.apiGatewayService.updateApprovalDetailsBreadObject(this.detailsBreadObject)):this.clientBase&&(this.detailsBreadObject=this.chooseBread("clientBase"),this.apiGatewayService.updateApprovalDetailsBreadObject(this.detailsBreadObject))),this.items=[{items:[{label:"\u0641\u0639\u0627\u0644\u0633\u0627\u0632\u06cc \u0646\u0648\u062f",icon:"",command:()=>{this.activationNode(this.tempNode)}},{label:"\u063a\u06cc\u0631\u0641\u0639\u0627\u0644\u0633\u0627\u0632\u06cc \u0646\u0648\u062f",icon:"",command:()=>{this.deactivationNode(this.tempNode)}}]},{label:"____________________________",items:[{label:this.transloco.translate("contextMenu.cancel")}]}]}deactivationNode(t){this.changeId=t.changeId,this._primengProgressBarService.show(),this.messagesApiFacadeService.deactiveMediatorchange(this.changeId).subscribe(i=>{this._primengProgressBarService.hide(),console.log("resB",i),this.search()},i=>{this._primengProgressBarService.hide(),this.search()})}activationNode(t){this.countLicense=0,this.nodesList.forEach(a=>{(a.status||1==a.status)&&(this.countLicense+=1)});let i=t.changeId;this._primengProgressBarService.show(),this.messagesApiFacadeService.activeMediatorchange(i).subscribe(a=>{console.log("resA",a),this._primengProgressBarService.hide(),this.search()},a=>{this._primengProgressBarService.hide(),this.search()})}onKeydown(t){"Enter"===t.key&&this.search()}search(){this._primengProgressBarService.show(),this.messagesApiFacadeService.findbymediatorid(this.mediatorId).subscribe(t=>{this._primengProgressBarService.hide(),Array.isArray(t)?this.nodesList=t:this.nodesList.push(t),this.nodesList.map(i=>i.status=1===i.status);for(let i=0;i<this.nodesList.length;i++)this.nodesList[i]=Object.assign(this.nodesList[i],{row:i+1});this.createMediatorFlag=this.disabelCheck()},t=>{this._primengProgressBarService.hide()})}disabelCheck(){return this.countLicense=0,this.nodesList.forEach(t=>{t.status&&(this.countLicense+=1)}),0!=this.countLicense}clear(){}BeforeButton(){this.close.emit("close")}setRecord(t){this.tempNode=t}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(N.nX),e.rXU(L.JO),e.rXU(F.k),e.rXU(I.f),e.rXU(S.X),e.rXU(D.s))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-node-change-list"]],inputs:{inputListMedia:"inputListMedia",inputListMediatorApi:"inputListMediatorApi"},outputs:{close:"close"},decls:11,vars:9,consts:[["menu",""],["id","section",3,"backClicked"],[1,"grid","flex-column"],["header","\u0644\u06cc\u0633\u062a \u0646\u0648\u062f \u0647\u0627\u06cc \u0645\u062f\u06cc\u0627\u062a\u0648\u0631"],[1,"grid","grid-cols-12"],[1,"col-12"],["selectionMode","single",3,"firstChange","value","paginator","rows","showCurrentPageReport","first","currentPageReportTemplate","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["dir","ltr",1,"col-12"],["pButton","","icon","pi pi-arrow-right",1,"btn-warning","p-button-warning",2,"width","30px!important",3,"click","matTooltip"],["pSortableColumn","row",1,"row"],["field","row"],["pSortableColumn","nodeName",1,"nodeName"],["field","nodeName"],["pSortableColumn","nodeValue",1,"nodeValue"],["field","nodeValue"],["pSortableColumn","changeTypeId",1,"changeTypeId"],["field","changeTypeId"],["pSortableColumn","schemaName",1,"schemaName"],["field","schemaName"],["pSortableColumn","status",1,"status"],["field","status"],[2,"text-align","right !important","border-right","1px solid #ebe8e8"],[3,"pSelectableRow"],[1,"row"],["dir","ltr",1,"nodeName",3,"pTooltip","tooltipDisabled"],["dir","ltr",1,"nodeValue",3,"pTooltip","tooltipDisabled"],["dir","ltr",1,"changeTypeId"],["dir","ltr",1,"schemaName",3,"pTooltip","tooltipDisabled"],[1,"status",3,"ngStyle"],[3,"ngStyle"],[1,"text-right","border-r","border-[#ebe8e8]"],["type","button","pButton","","pRipple","","icon","pi pi-chevron-down",1,"p-button-rounded",3,"click"],["appendTo","body",3,"popup","model"]],template:function(i,a){1&i&&(e.nrm(0,"p-toast"),e.j41(1,"app-breadcrumbs",1),e.bIt("backClicked",function(){return a.BeforeButton()}),e.k0s(),e.j41(2,"div",2)(3,"p-panel",3)(4,"div",4)(5,"div",5)(6,"p-table",6),e.mxI("firstChange",function(h){return e.DH7(a.first,h)||(a.first=h),h}),e.DNE(7,O,21,0,"ng-template",7)(8,R,24,31,"ng-template",8),e.k0s()(),e.j41(9,"div",9)(10,"button",10),e.bIt("click",function(){return a.BeforeButton()}),e.k0s()()()()()),2&i&&(e.R7$(6),e.Y8G("value",a.nodesList)("paginator",!0)("rows",a.rows)("showCurrentPageReport",!0),e.R50("first",a.first),e.Y8G("currentPageReportTemplate",a.paginationLabel)("rowsPerPageOptions",e.lJ4(8,j)),e.R7$(4),e.FS9("matTooltip","\u0628\u0627\u0632\u06af\u0634\u062a"))},dependencies:[p.bG,p.XI,M.Ei,p.Tg,p.d5,p.yc,B.m,b.Zk,l.YN,r._f,v.m_,C.M,c.B3,y.f,x.W1,f.n0,u.kr,_.oV,A,T.y8],styles:["[_nghost-%COMP%]{width:100%}  .p-tooltip{width:150px;min-width:150px;font-size:14px;max-width:250px}.nodeName[_ngcontent-%COMP%], .nodeValue[_ngcontent-%COMP%], .changeTypeId[_ngcontent-%COMP%]{width:10%}.schemaName[_ngcontent-%COMP%]{width:15%}.status[_ngcontent-%COMP%]{width:10%}"]})}}return n})()},7961:(g,d,s)=>{s.d(d,{w:()=>c});var e=s(4020);let c=(()=>{class l{transform(r){switch(Number(r)){case 0:case 2:return"\u062a\u0627\u0626\u06cc\u062f \u0646\u0634\u062f\u0647";case 1:return"\u062a\u0627\u0626\u06cc\u062f \u0634\u062f\u0647"}}static{this.\u0275fac=function(u){return new(u||l)}}static{this.\u0275pipe=e.EJ8({name:"isApproval",type:l,pure:!0})}}return l})()},8368:(g,d,s)=>{s.d(d,{R:()=>c});var e=s(4020);let c=(()=>{class l{transform(r){switch(Number(r)){case null:case 3:default:return null;case 1:return"Restful";case 2:return"soap"}}static{this.\u0275fac=function(u){return new(u||l)}}static{this.\u0275pipe=e.EJ8({name:"moduleType",type:l,pure:!0})}}return l})()}}]);