"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5952],{15952:(ie,D,c)=>{c.r(D),c.d(D,{default:()=>te});var t=c(4020),_=c(77920);let S=(()=>{class n{constructor(){}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["contacts"]],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"router-outlet")},dependencies:[_.n3],encapsulation:2,changeDetection:0})}}return n})();var k=c(84412),v=c(88141),p=c(96697),h=c(96354),d=c(25558),I=c(18810),A=c(7673),R=c(5964),V=c(21626);let g=(()=>{class n{constructor(e){this._httpClient=e,this._contact=new k.t(null),this._contacts=new k.t(null),this._countries=new k.t(null),this._tags=new k.t(null)}get contact$(){return this._contact.asObservable()}get contacts$(){return this._contacts.asObservable()}get countries$(){return this._countries.asObservable()}get tags$(){return this._tags.asObservable()}getContacts(){return this._httpClient.get("api/apps/contacts/all").pipe((0,v.M)(e=>{this._contacts.next(e)}))}searchContacts(e){return this._httpClient.get("api/apps/contacts/search",{params:{query:e}}).pipe((0,v.M)(o=>{this._contacts.next(o)}))}getContactById(e){return this._contacts.pipe((0,p.s)(1),(0,h.T)(o=>{const i=o.find(a=>a.id===e)||null;return this._contact.next(i),i}),(0,d.n)(o=>o?(0,A.of)(o):(0,I.$)("Could not found contact with id of "+e+"!")))}createContact(){return this.contacts$.pipe((0,p.s)(1),(0,d.n)(e=>this._httpClient.post("api/apps/contacts/contact",{}).pipe((0,h.T)(o=>(this._contacts.next([o,...e]),o)))))}updateContact(e,o){return this.contacts$.pipe((0,p.s)(1),(0,d.n)(i=>this._httpClient.patch("api/apps/contacts/contact",{id:e,contact:o}).pipe((0,h.T)(a=>{const r=i.findIndex(m=>m.id===e);return i[r]=a,this._contacts.next(i),a}),(0,d.n)(a=>this.contact$.pipe((0,p.s)(1),(0,R.p)(r=>r&&r.id===e),(0,v.M)(()=>(this._contact.next(a),a)))))))}deleteContact(e){return this.contacts$.pipe((0,p.s)(1),(0,d.n)(o=>this._httpClient.delete("api/apps/contacts/contact",{params:{id:e}}).pipe((0,h.T)(i=>{const a=o.findIndex(r=>r.id===e);return o.splice(a,1),this._contacts.next(o),i}))))}getCountries(){return this._httpClient.get("api/apps/contacts/countries").pipe((0,v.M)(e=>{this._countries.next(e)}))}getTags(){return this._httpClient.get("api/apps/contacts/tags").pipe((0,v.M)(e=>{this._tags.next(e)}))}createTag(e){return this.tags$.pipe((0,p.s)(1),(0,d.n)(o=>this._httpClient.post("api/apps/contacts/tag",{tag:e}).pipe((0,h.T)(i=>(this._tags.next([...o,i]),i)))))}updateTag(e,o){return this.tags$.pipe((0,p.s)(1),(0,d.n)(i=>this._httpClient.patch("api/apps/contacts/tag",{id:e,tag:o}).pipe((0,h.T)(a=>{const r=i.findIndex(m=>m.id===e);return i[r]=a,this._tags.next(i),a}))))}deleteTag(e){return this.tags$.pipe((0,p.s)(1),(0,d.n)(o=>this._httpClient.delete("api/apps/contacts/tag",{params:{id:e}}).pipe((0,h.T)(i=>{const a=o.findIndex(r=>r.id===e);return o.splice(a,1),this._tags.next(o),i}),(0,R.p)(i=>i),(0,d.n)(i=>this.contacts$.pipe((0,p.s)(1),(0,h.T)(a=>(a.forEach(r=>{const m=r.tags.findIndex(C=>C===e);m>-1&&r.tags.splice(m,1)}),i)))))))}uploadAvatar(e,o){return this.contacts$.pipe((0,p.s)(1),(0,d.n)(i=>this._httpClient.post("api/apps/contacts/avatar",{id:e,avatar:o},{headers:{"Content-Type":o.type}}).pipe((0,h.T)(a=>{const r=i.findIndex(m=>m.id===e);return i[r]=a,this._contacts.next(i),a}),(0,d.n)(a=>this.contact$.pipe((0,p.s)(1),(0,R.p)(r=>r&&r.id===e),(0,v.M)(()=>(this._contact.next(a),a)))))))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(V.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var z=c(76939),E=c(37403),x=c(60177),l=c(89417),b=c(88834),B=c(82765),F=c(3),y=c(25084),f=c(30636),$=c(99213),j=c(59042),G=c(82798),N=c(14823),P=c(68955),w=c(21413),u=c(56977),U=c(70152),T=c(90882),L=c(33726),O=c(27115);const Q=["matDrawer"],J=()=>({"=0":"No contacts","=1":"contact",other:"contacts"}),W=(n,s)=>({"dark:hover:bg-hover hover:bg-gray-100":n,"bg-primary-50 dark:bg-hover":s}),Z=n=>["./",n];function H(n,s){if(1&n&&t.EFF(0),2&n){const e=t.XpG();t.SpI(" ",e.contactsCount," ")}}function K(n,s){if(1&n&&(t.j41(0,"div",18),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.name.charAt(0)," ")}}function q(n,s){if(1&n&&t.nrm(0,"img",21),2&n){const e=t.XpG().$implicit;t.Y8G("src",e.avatar,t.B4B)}}function tt(n,s){if(1&n&&(t.j41(0,"div",22),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.name.charAt(0)," ")}}function et(n,s){if(1&n&&(t.DNE(0,K,2,1,"div",18),t.j41(1,"a",19)(2,"div",20),t.DNE(3,q,1,1,"img",21)(4,tt,2,1,"div",22),t.k0s(),t.j41(5,"div",23)(6,"div",24),t.EFF(7),t.k0s(),t.j41(8,"div",25),t.EFF(9),t.k0s()()()),2&n){const e=s.$implicit,o=s.$index,i=t.XpG(2),a=t.XpG();t.vxM(0===o||e.name.charAt(0)!==i[o-1].name.charAt(0)?0:-1),t.R7$(),t.Y8G("ngClass",t.l_i(7,W,!a.selectedContact||a.selectedContact.id!==e.id,a.selectedContact&&a.selectedContact.id===e.id))("routerLink",t.eq3(10,Z,e.id)),t.R7$(2),t.vxM(e.avatar?3:-1),t.R7$(),t.vxM(e.avatar?-1:4),t.R7$(3),t.SpI(" ",e.name," "),t.R7$(2),t.SpI(" ",e.title," ")}}function nt(n,s){if(1&n&&t.Z7z(0,et,10,12,null,null,t.BUC().trackByFn,!0),2&n){const e=t.XpG();t.Dyx(e)}}function ot(n,s){1&n&&(t.j41(0,"div",17),t.EFF(1," There are no contacts! "),t.k0s())}function it(n,s){1&n&&t.DNE(0,nt,2,0)(1,ot,2,0,"div",17),2&n&&t.vxM(s.length?0:1)}let Y=(()=>{class n{constructor(e,o,i,a,r,m){this._activatedRoute=e,this._changeDetectorRef=o,this._contactsService=i,this._document=a,this._router=r,this._fuseMediaWatcherService=m,this.contactsCount=0,this.contactsTableColumns=["name","email","phoneNumber","job"],this.searchInputControl=new l.hs,this._unsubscribeAll=new w.B}ngOnInit(){this.contacts$=this._contactsService.contacts$,this._contactsService.contacts$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(e=>{this.contactsCount=e.length,this._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(e=>{this.selectedContact=e,this._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(e=>{this.countries=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,u.Q)(this._unsubscribeAll),(0,d.n)(e=>this._contactsService.searchContacts(e))).subscribe(),this.matDrawer.openedChange.subscribe(e=>{e||(this.selectedContact=null,this._changeDetectorRef.markForCheck())}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.drawerMode=e.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()}),(0,L.R)(this._document,"keydown").pipe((0,u.Q)(this._unsubscribeAll),(0,R.p)(e=>(!0===e.ctrlKey||e.metaKey)&&"/"===e.key)).subscribe(()=>{this.createContact()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createContact(){this._contactsService.createContact().subscribe(e=>{this._router.navigate(["./",e.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}trackByFn(e,o){return o.id||e}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(_.nX),t.rXU(t.gRc),t.rXU(g),t.rXU(x.qQ),t.rXU(_.Ix),t.rXU(O.F))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["contacts-list"]],viewQuery:function(o,i){if(1&o&&t.GBs(Q,7),2&o){let a;t.mGM(a=t.lsd())&&(i.matDrawer=a.first)}},decls:27,vars:19,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","h-full","flex-auto","dark:bg-transparent",3,"backdropClick"],[1,"w-full","dark:bg-gray-900","md:w-160",3,"mode","opened","position","disableClose"],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-auto","flex-col","justify-between","border-b","px-6","py-8","sm:flex-row","md:flex-col","md:px-8"],[1,"text-4xl","font-extrabold","leading-none","tracking-tight"],[1,"text-secondary","ml-0.5","font-medium"],[1,"mt-4","flex","items-center","sm:mt-0","md:mt-4"],["subscriptSizing","dynamic",1,"fuse-mat-dense","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"relative"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"text-secondary","sticky","top-0","z-10","-mt-px","border-b","border-t","bg-gray-50","px-6","py-1","font-medium","uppercase","dark:bg-gray-900","md:px-8"],[1,"z-20","flex","cursor-pointer","items-center","border-b","px-6","py-4","md:px-8",3,"ngClass","routerLink"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["alt","Contact avatar",1,"h-full","w-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-lg","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"ml-4","min-w-0"],[1,"truncate","font-medium","leading-5"],[1,"text-secondary","truncate","leading-5"]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"div",1)(1,"mat-drawer-container",2),t.bIt("backdropClick",function(){return t.eBV(a),t.Njj(i.onBackdropClicked())}),t.j41(2,"mat-drawer",3,0),t.nrm(4,"router-outlet"),t.k0s(),t.j41(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),t.EFF(10," Contacts "),t.k0s(),t.j41(11,"div",8),t.DNE(12,H,1,1),t.EFF(13),t.nI1(14,"i18nPlural"),t.k0s()(),t.j41(15,"div",9)(16,"div",5)(17,"mat-form-field",10),t.nrm(18,"mat-icon",11)(19,"input",12),t.k0s()(),t.j41(20,"button",13),t.bIt("click",function(){return t.eBV(a),t.Njj(i.createContact())}),t.nrm(21,"mat-icon",14),t.j41(22,"span",15),t.EFF(23,"Add"),t.k0s()()()(),t.j41(24,"div",16),t.DNE(25,it,2,1),t.nI1(26,"async"),t.k0s()()()()()}if(2&o){let a;t.R7$(2),t.Y8G("mode",i.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.R7$(10),t.vxM(i.contactsCount>0?12:-1),t.R7$(),t.SpI(" ",t.i5U(14,13,i.contactsCount,t.lJ4(18,J))," "),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:magnifying-glass"),t.R7$(),t.Y8G("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Search contacts"),t.R7$(),t.Y8G("color","primary"),t.R7$(),t.Y8G("svgIcon","heroicons_outline:plus"),t.R7$(4),t.vxM((a=t.bMT(26,16,i.contacts$))?25:-1,a)}},dependencies:[T.vg,T.qe,T.$C,T.$l,_.n3,f.RG,f.rl,f.JW,$.m_,$.An,j.fS,j.fg,l.YN,l.me,l.BC,l.X1,l.l_,b.Hl,b.$z,x.YU,_.Wk,x.Jj,x.jo],encapsulation:2,changeDetection:0})}}return n})();var at=c(46601),st=c(47987);const ct=["avatarFileInput"],rt=["tagsPanel"],lt=["tagsPanelOrigin"],X=()=>["../"],M=n=>({"mt-6":n});function mt(n,s){if(1&n&&t.nrm(0,"img",7),2&n){const e=t.XpG(2);t.Y8G("src",e.contact.background,t.B4B)}}function dt(n,s){if(1&n&&t.nrm(0,"img",15),2&n){const e=t.XpG(2);t.Y8G("src",e.contact.avatar,t.B4B)}}function pt(n,s){if(1&n&&(t.j41(0,"div",16),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.contact.name.charAt(0)," ")}}function ut(n,s){if(1&n&&(t.j41(0,"div",26)(1,"span",27),t.EFF(2),t.k0s()()),2&n){const e=s.$implicit;t.R7$(2),t.JRh(e.title)}}function _t(n,s){if(1&n&&(t.j41(0,"div",22),t.Z7z(1,ut,3,1,"div",26,t.BUC().trackByFn,!0),t.nI1(3,"fuseFindByKey"),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Dyx(t.brH(3,0,e.contact.tags,"id",e.tags))}}function ht(n,s){if(1&n&&(t.j41(0,"div",24),t.nrm(1,"mat-icon",28),t.j41(2,"div",29),t.EFF(3),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("svgIcon","heroicons_outline:briefcase"),t.R7$(2),t.SpI(" ",e.contact.title," ")}}function ft(n,s){if(1&n&&(t.j41(0,"div",24),t.nrm(1,"mat-icon",28),t.j41(2,"div",29),t.EFF(3),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("svgIcon","heroicons_outline:building-office-2"),t.R7$(2),t.SpI(" ",e.contact.company," ")}}function gt(n,s){if(1&n&&(t.j41(0,"div",33)(1,"span",34),t.EFF(2,"\u2022"),t.k0s(),t.j41(3,"span",35),t.EFF(4),t.k0s()()),2&n){const e=t.XpG().$implicit;t.R7$(4),t.JRh(e.label)}}function Ct(n,s){if(1&n&&(t.j41(0,"div",31)(1,"a",32),t.EFF(2),t.k0s(),t.DNE(3,gt,5,1,"div",33),t.k0s()),2&n){const e=s.$implicit;t.R7$(),t.Y8G("href","mailto:"+e.email,t.B4B),t.R7$(),t.SpI(" ",e.email," "),t.R7$(),t.vxM(e.label?3:-1)}}function vt(n,s){if(1&n&&(t.j41(0,"div",25),t.nrm(1,"mat-icon",28),t.j41(2,"div",30),t.Z7z(3,Ct,4,3,"div",31,t.BUC().trackByFn,!0),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("svgIcon","heroicons_outline:envelope"),t.R7$(2),t.Dyx(e.contact.emails)}}function xt(n,s){if(1&n&&(t.j41(0,"div",33)(1,"span",34),t.EFF(2,"\u2022"),t.k0s(),t.j41(3,"span",35),t.EFF(4),t.k0s()()),2&n){const e=t.XpG().$implicit;t.R7$(4),t.JRh(e.label)}}function bt(n,s){if(1&n&&(t.j41(0,"div",31),t.nrm(1,"div",36),t.j41(2,"div",37),t.EFF(3),t.k0s(),t.j41(4,"div",38),t.EFF(5),t.k0s(),t.DNE(6,xt,5,1,"div",33),t.k0s()),2&n){const e=s.$implicit,o=t.XpG(3);t.R7$(),t.xc7("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",o.getCountryByIso(e.country).flagImagePos),t.Y8G("matTooltip",o.getCountryByIso(e.country).name),t.R7$(2),t.SpI(" ",o.getCountryByIso(e.country).code," "),t.R7$(2),t.SpI(" ",e.phoneNumber," "),t.R7$(),t.vxM(e.label?6:-1)}}function kt(n,s){if(1&n&&(t.j41(0,"div",25),t.nrm(1,"mat-icon",28),t.j41(2,"div",30),t.Z7z(3,bt,7,10,"div",31,t.BUC().trackByFn,!0),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("svgIcon","heroicons_outline:phone"),t.R7$(2),t.Dyx(e.contact.phoneNumbers)}}function Rt(n,s){if(1&n&&(t.j41(0,"div",24),t.nrm(1,"mat-icon",28),t.j41(2,"div",29),t.EFF(3),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("svgIcon","heroicons_outline:map-pin"),t.R7$(2),t.SpI(" ",e.contact.address," ")}}function Ft(n,s){if(1&n&&(t.j41(0,"div",24),t.nrm(1,"mat-icon",28),t.j41(2,"div",29),t.EFF(3),t.nI1(4,"date"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("svgIcon","heroicons_outline:cake"),t.R7$(2),t.SpI(" ",t.i5U(4,2,e.contact.birthday,"longDate")," ")}}function yt(n,s){if(1&n&&(t.j41(0,"div",25),t.nrm(1,"mat-icon",28)(2,"div",39),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("svgIcon","heroicons_outline:bars-3-bottom-left"),t.R7$(),t.Y8G("innerHTML",e.contact.notes,t.npT)}}function $t(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",6),t.DNE(1,mt,1,1,"img",7),t.j41(2,"div",8)(3,"a",9),t.nrm(4,"mat-icon",10),t.k0s()()(),t.j41(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14),t.DNE(9,dt,1,1,"img",15)(10,pt,2,1,"div",16),t.k0s(),t.j41(11,"div",17)(12,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleEditMode(!0))}),t.nrm(13,"mat-icon",19),t.j41(14,"span",20),t.EFF(15,"Edit"),t.k0s()()()(),t.j41(16,"div",21),t.EFF(17),t.k0s(),t.DNE(18,_t,4,4,"div",22),t.j41(19,"div",23),t.DNE(20,ht,4,2,"div",24)(21,ft,4,2,"div",24)(22,vt,5,1,"div",25)(23,kt,5,1,"div",25)(24,Rt,4,2,"div",24)(25,Ft,5,5,"div",24)(26,yt,3,2,"div",25),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(),t.vxM(e.contact.background?1:-1),t.R7$(2),t.Y8G("matTooltip","Close")("routerLink",t.lJ4(16,X)),t.R7$(),t.Y8G("svgIcon","heroicons_outline:x-mark"),t.R7$(5),t.vxM(e.contact.avatar?9:-1),t.R7$(),t.vxM(e.contact.avatar?-1:10),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:pencil-square"),t.R7$(4),t.SpI(" ",e.contact.name," "),t.R7$(),t.vxM(e.contact.tags.length?18:-1),t.R7$(2),t.vxM(e.contact.title?20:-1),t.R7$(),t.vxM(e.contact.company?21:-1),t.R7$(),t.vxM(e.contact.emails.length?22:-1),t.R7$(),t.vxM(e.contact.phoneNumbers.length?23:-1),t.R7$(),t.vxM(e.contact.address?24:-1),t.R7$(),t.vxM(e.contact.birthday?25:-1),t.R7$(),t.vxM(e.contact.notes?26:-1)}}function jt(n,s){if(1&n&&t.nrm(0,"img",7),2&n){const e=t.XpG(2);t.Y8G("src",e.contact.background,t.B4B)}}function Tt(n,s){if(1&n&&t.nrm(0,"img",15),2&n){const e=t.XpG(2);t.Y8G("src",e.contact.avatar,t.B4B)}}function Gt(n,s){if(1&n&&(t.j41(0,"div",16),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.contact.name.charAt(0)," ")}}function Dt(n,s){if(1&n&&(t.j41(0,"div",66)(1,"span",67),t.EFF(2),t.k0s()()),2&n){const e=s.$implicit;t.R7$(2),t.JRh(e.title)}}function It(n,s){if(1&n&&(t.Z7z(0,Dt,3,1,"div",66,t.BUC().trackByFn,!0),t.nI1(2,"fuseFindByKey")),2&n){const e=t.XpG(2);t.Dyx(t.brH(2,0,e.contact.tags,"id",e.tags))}}function Et(n,s){1&n&&(t.nrm(0,"mat-icon",19),t.j41(1,"span",68),t.EFF(2,"Edit"),t.k0s()),2&n&&t.Y8G("svgIcon","heroicons_solid:pencil-square")}function Bt(n,s){1&n&&(t.nrm(0,"mat-icon",19),t.j41(1,"span",68),t.EFF(2,"Add"),t.k0s()),2&n&&t.Y8G("svgIcon","heroicons_solid:plus-circle")}function Nt(n,s){1&n&&t.nrm(0,"mat-icon",19),2&n&&t.Y8G("svgIcon","heroicons_solid:pencil-square")}function wt(n,s){1&n&&t.nrm(0,"mat-icon",19),2&n&&t.Y8G("svgIcon","heroicons_solid:check")}function Yt(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",78),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(4);return t.Njj(a.toggleContactTag(i))}),t.nrm(1,"mat-checkbox",79),t.j41(2,"div"),t.EFF(3),t.k0s()()}if(2&n){const e=s.$implicit,o=t.XpG(4);t.R7$(),t.Y8G("checked",o.contact.tags.includes(e.id))("color","primary")("disableRipple",!0),t.R7$(2),t.JRh(e.title)}}function Xt(n,s){if(1&n&&t.Z7z(0,Yt,4,4,"div",77,t.BUC().trackByFn,!0),2&n){const e=t.XpG(3);t.Dyx(e.filteredTags)}}function Mt(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",71)(1,"mat-form-field",80)(2,"input",81),t.bIt("input",function(i){const a=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.updateTagTitle(a,i))}),t.k0s(),t.j41(3,"button",82),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(4);return t.Njj(a.deleteTag(i))}),t.nrm(4,"mat-icon",83),t.k0s()()()}if(2&n){const e=s.$implicit;t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("value",e.title),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:trash")}}function St(n,s){if(1&n&&(t.j41(0,"div",75),t.Z7z(1,Mt,5,3,"div",71,t.BUC().trackByFn,!0),t.k0s()),2&n){const e=t.XpG(3);t.R7$(),t.Dyx(e.filteredTags)}}function At(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",84),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(6);return t.XpG(2).createTag(i.value),t.Njj(i.value="")}),t.nrm(1,"mat-icon",85),t.j41(2,"div",86),t.EFF(3,' Create "'),t.j41(4,"b"),t.EFF(5),t.k0s(),t.EFF(6,'" '),t.k0s()()}if(2&n){t.XpG();const e=t.sdS(6);t.R7$(),t.Y8G("svgIcon","heroicons_solid:plus-circle"),t.R7$(4),t.JRh(e.value)}}function Vt(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",69)(1,"div",70)(2,"div",71),t.nrm(3,"mat-icon",19),t.j41(4,"div",20)(5,"input",72,4),t.bIt("input",function(i){t.eBV(e);const a=t.XpG(2);return t.Njj(a.filterTags(i))})("keydown",function(i){t.eBV(e);const a=t.XpG(2);return t.Njj(a.filterTagsInputKeyDown(i))}),t.k0s()()(),t.j41(7,"button",73),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.toggleTagsEditMode())}),t.DNE(8,Nt,1,1,"mat-icon",19)(9,wt,1,1,"mat-icon",19),t.k0s()(),t.j41(10,"div",74),t.DNE(11,Xt,2,0)(12,St,3,0,"div",75)(13,At,7,2,"div",76),t.k0s()()}if(2&n){const e=t.sdS(6),o=t.XpG(2);t.R7$(3),t.Y8G("svgIcon","heroicons_solid:magnifying-glass"),t.R7$(2),t.Y8G("maxLength",30),t.R7$(3),t.vxM(o.tagsEditMode?-1:8),t.R7$(),t.vxM(o.tagsEditMode?9:-1),t.R7$(2),t.vxM(o.tagsEditMode?-1:11),t.R7$(),t.vxM(o.tagsEditMode?12:-1),t.R7$(),t.vxM(o.shouldShowCreateTagButton(e.value)?13:-1)}}function zt(n,s){1&n&&(t.j41(0,"mat-label"),t.EFF(1,"Email"),t.k0s())}function Pt(n,s){1&n&&(t.j41(0,"mat-label"),t.EFF(1,"Label"),t.k0s())}function Ut(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",91)(1,"button",92),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$index,a=t.XpG(2);return t.Njj(a.removeEmailField(i))}),t.nrm(2,"mat-icon",19),t.k0s()()}if(2&n){const e=t.XpG().$index;t.Y8G("ngClass",t.eq3(2,M,0===e)),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:trash")}}function Lt(n,s){if(1&n&&(t.j41(0,"div",25)(1,"mat-form-field",87),t.DNE(2,zt,2,0,"mat-label"),t.nrm(3,"mat-icon",50)(4,"input",88),t.k0s(),t.j41(5,"mat-form-field",89),t.DNE(6,Pt,2,0,"mat-label"),t.nrm(7,"mat-icon",50)(8,"input",90),t.k0s(),t.DNE(9,Ut,3,4,"div",91),t.k0s()),2&n){const e=s.$implicit,o=s.$index,i=s.$count;t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.vxM(0===o?2:-1),t.R7$(),t.Y8G("svgIcon","heroicons_solid:envelope"),t.R7$(),t.Y8G("formControl",e.get("email"))("placeholder","Email address")("spellcheck",!1),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.vxM(0===o?6:-1),t.R7$(),t.Y8G("svgIcon","heroicons_solid:tag"),t.R7$(),t.Y8G("formControl",e.get("label"))("placeholder","Label"),t.R7$(),t.vxM(0===o&&o===i-1?-1:9)}}function Ot(n,s){1&n&&(t.j41(0,"mat-label"),t.EFF(1,"Phone"),t.k0s())}function Qt(n,s){if(1&n&&(t.j41(0,"mat-option",96)(1,"span",71),t.nrm(2,"span",97),t.j41(3,"span",20),t.EFF(4),t.k0s(),t.j41(5,"span",98),t.EFF(6),t.k0s()()()),2&n){const e=s.$implicit;t.Y8G("value",e.iso),t.R7$(2),t.xc7("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",e.flagImagePos),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.code)}}function Jt(n,s){1&n&&(t.j41(0,"mat-label"),t.EFF(1,"Label"),t.k0s())}function Wt(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",91)(1,"button",92),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$index,a=t.XpG(2);return t.Njj(a.removePhoneNumberField(i))}),t.nrm(2,"mat-icon",19),t.k0s()()}if(2&n){const e=t.XpG().$index;t.Y8G("ngClass",t.eq3(2,M,0===e)),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:trash")}}function Zt(n,s){if(1&n&&(t.j41(0,"div",58)(1,"mat-form-field",87),t.DNE(2,Ot,2,0,"mat-label"),t.nrm(3,"input",90),t.j41(4,"mat-select",93)(5,"mat-select-trigger")(6,"span",71),t.nrm(7,"span",94),t.j41(8,"span",95),t.EFF(9),t.k0s()()(),t.Z7z(10,Qt,7,9,"mat-option",96,t.BUC().trackByFn,!0),t.k0s()(),t.j41(12,"mat-form-field",89),t.DNE(13,Jt,2,0,"mat-label"),t.nrm(14,"mat-icon",50)(15,"input",90),t.k0s(),t.DNE(16,Wt,3,4,"div",91),t.k0s()),2&n){const e=s.$implicit,o=s.$index,i=s.$count,a=t.XpG(2);t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.vxM(0===o?2:-1),t.R7$(),t.Y8G("formControl",e.get("phoneNumber"))("placeholder","Phone"),t.R7$(),t.Y8G("formControl",e.get("country")),t.R7$(3),t.xc7("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",a.getCountryByIso(e.get("country").value).flagImagePos),t.R7$(2),t.JRh(a.getCountryByIso(e.get("country").value).code),t.R7$(),t.Dyx(a.countries),t.R7$(2),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.vxM(0===o?13:-1),t.R7$(),t.Y8G("svgIcon","heroicons_solid:tag"),t.R7$(),t.Y8G("formControl",e.get("label"))("placeholder","Label"),t.R7$(),t.vxM(0===o&&o===i-1?-1:16)}}function Ht(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",6),t.DNE(1,jt,1,1,"img",7),t.j41(2,"div",8)(3,"a",9),t.nrm(4,"mat-icon",10),t.k0s()()(),t.j41(5,"div",40)(6,"div",12)(7,"form",41)(8,"div",13)(9,"div",42),t.nrm(10,"div",43),t.j41(11,"div",44)(12,"div")(13,"input",45,0),t.bIt("change",function(){t.eBV(e);const i=t.sdS(14),a=t.XpG();return t.Njj(a.uploadAvatar(i.files))}),t.k0s(),t.j41(15,"label",46),t.nrm(16,"mat-icon",10),t.k0s()(),t.j41(17,"div")(18,"button",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeAvatar())}),t.nrm(19,"mat-icon",10),t.k0s()()(),t.DNE(20,Tt,1,1,"img",15)(21,Gt,2,1,"div",16),t.k0s()(),t.j41(22,"div",48)(23,"mat-form-field",49)(24,"mat-label"),t.EFF(25,"Name"),t.k0s(),t.nrm(26,"mat-icon",50)(27,"input",51),t.k0s()(),t.j41(28,"div",52),t.DNE(29,It,3,4),t.j41(30,"div",53,1),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openTagsPanel())}),t.DNE(32,Et,3,1)(33,Bt,3,1)(34,Vt,14,7,"ng-template",null,2,t.C5r),t.k0s()(),t.j41(36,"div",48)(37,"mat-form-field",49)(38,"mat-label"),t.EFF(39,"Title"),t.k0s(),t.nrm(40,"mat-icon",50)(41,"input",54),t.k0s()(),t.j41(42,"div",48)(43,"mat-form-field",49)(44,"mat-label"),t.EFF(45,"Company"),t.k0s(),t.nrm(46,"mat-icon",50)(47,"input",54),t.k0s()(),t.j41(48,"div",48)(49,"div",55),t.Z7z(50,Lt,10,12,"div",25,t.BUC().trackByFn,!0),t.k0s(),t.j41(52,"div",56),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addEmailField())}),t.nrm(53,"mat-icon",19),t.j41(54,"span",57),t.EFF(55,"Add an email address"),t.k0s()()(),t.j41(56,"div",48)(57,"div",55),t.Z7z(58,Zt,17,18,"div",58,t.BUC().trackByFn,!0),t.k0s(),t.j41(60,"div",56),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addPhoneNumberField())}),t.nrm(61,"mat-icon",19),t.j41(62,"span",57),t.EFF(63,"Add a phone number"),t.k0s()()(),t.j41(64,"div",48)(65,"mat-form-field",49)(66,"mat-label"),t.EFF(67,"Address"),t.k0s(),t.nrm(68,"mat-icon",50)(69,"input",54),t.k0s()(),t.j41(70,"div",48)(71,"mat-form-field",49)(72,"mat-label"),t.EFF(73,"Birthday"),t.k0s(),t.nrm(74,"mat-icon",50)(75,"input",59)(76,"mat-datepicker-toggle",60)(77,"mat-datepicker",null,3),t.k0s()(),t.j41(79,"div",48)(80,"mat-form-field",49)(81,"mat-label"),t.EFF(82,"Notes"),t.k0s(),t.nrm(83,"mat-icon",50)(84,"textarea",61),t.k0s()(),t.j41(85,"div",62)(86,"button",63),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.deleteContact())}),t.EFF(87," Delete "),t.k0s(),t.j41(88,"button",64),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleEditMode(!1))}),t.EFF(89," Cancel "),t.k0s(),t.j41(90,"button",65),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.updateContact())}),t.EFF(91," Save "),t.k0s()()()()()}if(2&n){const e=t.sdS(78),o=t.XpG();t.R7$(),t.vxM(o.contact.background?1:-1),t.R7$(2),t.Y8G("matTooltip","Close")("routerLink",t.lJ4(51,X)),t.R7$(),t.Y8G("svgIcon","heroicons_outline:x-mark"),t.R7$(3),t.Y8G("formGroup",o.contactForm),t.R7$(6),t.Y8G("multiple",!1)("accept","image/jpeg, image/png"),t.R7$(3),t.Y8G("svgIcon","heroicons_outline:camera"),t.R7$(3),t.Y8G("svgIcon","heroicons_outline:trash"),t.R7$(),t.vxM(o.contact.avatar?20:-1),t.R7$(),t.vxM(o.contact.avatar?-1:21),t.R7$(2),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:user-circle"),t.R7$(),t.Y8G("formControlName","name")("placeholder","Name")("spellcheck",!1),t.R7$(2),t.vxM(o.contact.tags.length?29:-1),t.R7$(3),t.vxM(o.contact.tags.length?32:-1),t.R7$(),t.vxM(o.contact.tags.length?-1:33),t.R7$(4),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:briefcase"),t.R7$(),t.Y8G("formControlName","title")("placeholder","Job title"),t.R7$(2),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:building-office-2"),t.R7$(),t.Y8G("formControlName","company")("placeholder","Company"),t.R7$(3),t.Dyx(o.contactForm.get("emails").controls),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:plus-circle"),t.R7$(5),t.Dyx(o.contactForm.get("phoneNumbers").controls),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:plus-circle"),t.R7$(4),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:map-pin"),t.R7$(),t.Y8G("formControlName","address")("placeholder","Address"),t.R7$(2),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:cake"),t.R7$(),t.Y8G("matDatepicker",e)("formControlName","birthday")("placeholder","Birthday"),t.R7$(),t.Y8G("for",e),t.R7$(4),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:bars-3-bottom-left"),t.R7$(),t.Y8G("formControlName","notes")("placeholder","Notes")("rows",5)("spellcheck",!1),t.R7$(2),t.Y8G("color","warn")("matTooltip","Delete"),t.R7$(2),t.Y8G("matTooltip","Cancel"),t.R7$(2),t.Y8G("color","primary")("disabled",o.contactForm.invalid)("matTooltip","Save")}}let Kt=(()=>{class n{constructor(e,o,i,a,r,m,C,ee,ne,oe){this._activatedRoute=e,this._changeDetectorRef=o,this._contactsListComponent=i,this._contactsService=a,this._formBuilder=r,this._fuseConfirmationService=m,this._renderer2=C,this._router=ee,this._overlay=ne,this._viewContainerRef=oe,this.editMode=!1,this.tagsEditMode=!1,this._unsubscribeAll=new w.B}ngOnInit(){this._contactsListComponent.matDrawer.open(),this.contactForm=this._formBuilder.group({id:[""],avatar:[null],name:["",[l.k0.required]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),title:[""],company:[""],birthday:[null],address:[null],notes:[null],tags:[[]]}),this._contactsService.contacts$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(e=>{this.contacts=e,this._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(e=>{this._contactsListComponent.matDrawer.open(),this.contact=e,this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear(),this.contactForm.patchValue(e);const o=[];e.emails.length>0?e.emails.forEach(a=>{o.push(this._formBuilder.group({email:[a.email],label:[a.label]}))}):o.push(this._formBuilder.group({email:[""],label:[""]})),o.forEach(a=>{this.contactForm.get("emails").push(a)});const i=[];e.phoneNumbers.length>0?e.phoneNumbers.forEach(a=>{i.push(this._formBuilder.group({country:[a.country],phoneNumber:[a.phoneNumber],label:[a.label]}))}):i.push(this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]})),i.forEach(a=>{this.contactForm.get("phoneNumbers").push(a)}),this.toggleEditMode(!1),this._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(e=>{this.countries=e,this._changeDetectorRef.markForCheck()}),this._contactsService.tags$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(e=>{this.tags=e,this.filteredTags=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}closeDrawer(){return this._contactsListComponent.matDrawer.close()}toggleEditMode(e=null){this.editMode=null===e?!this.editMode:e,this._changeDetectorRef.markForCheck()}updateContact(){const e=this.contactForm.getRawValue();e.emails=e.emails.filter(o=>o.email),e.phoneNumbers=e.phoneNumbers.filter(o=>o.phoneNumber),this._contactsService.updateContact(e.id,e).subscribe(()=>{this.toggleEditMode(!1)})}deleteContact(){this._fuseConfirmationService.open({title:"Delete contact",message:"Are you sure you want to delete this contact? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(o=>{if("confirmed"===o){const i=this.contact.id,a=this.contacts.findIndex(C=>C.id===i),m=1===this.contacts.length&&this.contacts[0].id===i?null:this.contacts[a+(a===this.contacts.length-1?-1:1)].id;this._contactsService.deleteContact(i).subscribe(C=>{C&&(this._router.navigate(m?["../",m]:["../"],{relativeTo:this._activatedRoute}),this.toggleEditMode(!1))}),this._changeDetectorRef.markForCheck()}})}uploadAvatar(e){if(!e.length)return;const i=e[0];["image/jpeg","image/png"].includes(i.type)&&this._contactsService.uploadAvatar(this.contact.id,i).subscribe()}removeAvatar(){this.contactForm.get("avatar").setValue(null),this._avatarFileInput.nativeElement.value=null,this.contact.avatar=null}openTagsPanel(){this._tagsPanelOverlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._tagsPanelOrigin.nativeElement).withFlexibleDimensions(!0).withViewportMargin(64).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this._tagsPanelOverlayRef.attachments().subscribe(()=>{this._renderer2.addClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef.overlayElement.querySelector("input").focus()});const e=new z.VA(this._tagsPanel,this._viewContainerRef);this._tagsPanelOverlayRef.attach(e),this._tagsPanelOverlayRef.backdropClick().subscribe(()=>{this._renderer2.removeClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.hasAttached()&&(this._tagsPanelOverlayRef.detach(),this.filteredTags=this.tags,this.tagsEditMode=!1),e&&e.isAttached&&e.detach()})}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(e){const o=e.target.value.toLowerCase();this.filteredTags=this.tags.filter(i=>i.title.toLowerCase().includes(o))}filterTagsInputKeyDown(e){if("Enter"!==e.key)return;if(0===this.filteredTags.length)return this.createTag(e.target.value),void(e.target.value="");const o=this.filteredTags[0];this.contact.tags.find(a=>a===o.id)?this.removeTagFromContact(o):this.addTagToContact(o)}createTag(e){this._contactsService.createTag({title:e}).subscribe(i=>{this.addTagToContact(i)})}updateTagTitle(e,o){e.title=o.target.value,this._contactsService.updateTag(e.id,e).pipe((0,U.B)(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(e){this._contactsService.deleteTag(e.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToContact(e){this.contact.tags.unshift(e.id),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}removeTagFromContact(e){this.contact.tags.splice(this.contact.tags.findIndex(o=>o===e.id),1),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}toggleContactTag(e){this.contact.tags.includes(e.id)?this.removeTagFromContact(e):this.addTagToContact(e)}shouldShowCreateTagButton(e){return!(""===e||this.tags.findIndex(o=>o.title.toLowerCase()===e.toLowerCase())>-1)}addEmailField(){const e=this._formBuilder.group({email:[""],label:[""]});this.contactForm.get("emails").push(e),this._changeDetectorRef.markForCheck()}removeEmailField(e){this.contactForm.get("emails").removeAt(e),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const e=this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]});this.contactForm.get("phoneNumbers").push(e),this._changeDetectorRef.markForCheck()}removePhoneNumberField(e){this.contactForm.get("phoneNumbers").removeAt(e),this._changeDetectorRef.markForCheck()}getCountryByIso(e){return this.countries.find(o=>o.iso===e)}trackByFn(e,o){return o.id||e}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(_.nX),t.rXU(t.gRc),t.rXU(Y),t.rXU(g),t.rXU(l.ze),t.rXU(at.G),t.rXU(t.sFG),t.rXU(_.Ix),t.rXU(st.hJ),t.rXU(t.c1b))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["contacts-details"]],viewQuery:function(o,i){if(1&o&&(t.GBs(ct,5),t.GBs(rt,5),t.GBs(lt,5)),2&o){let a;t.mGM(a=t.lsd())&&(i._avatarFileInput=a.first),t.mGM(a=t.lsd())&&(i._tagsPanel=a.first),t.mGM(a=t.lsd())&&(i._tagsPanelOrigin=a.first)}},decls:3,vars:2,consts:[["avatarFileInput",""],["tagsPanelOrigin",""],["tagsPanel",""],["birthdayDatepicker",""],["newTagInput",""],[1,"flex","w-full","flex-col"],[1,"relative","h-40","w-full","bg-accent-100","px-8","dark:bg-accent-700","sm:h-48","sm:px-12"],[1,"absolute","inset-0","h-full","w-full","object-cover",3,"src"],[1,"mx-auto","flex","w-full","max-w-3xl","items-center","justify-end","pt-6"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-auto","flex-col","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"-mt-16","flex","flex-auto","items-end"],[1,"ring-bg-card","flex","h-32","w-32","items-center","justify-center","overflow-hidden","rounded-full","ring-4"],[1,"h-full","w-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","overflow-hidden","rounded","bg-gray-200","text-8xl","font-bold","uppercase","leading-none","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"mb-1","ml-auto","flex","items-center"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","truncate","text-4xl","font-bold"],[1,"mt-2","flex","flex-wrap","items-center"],[1,"mt-4","flex","flex-col","space-y-8","border-t","pt-6"],[1,"flex","sm:items-center"],[1,"flex"],[1,"mb-3","mr-3","flex","items-center","justify-center","rounded-full","bg-gray-100","px-3","py-1","leading-normal","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"whitespace-nowrap","text-sm","font-medium"],[3,"svgIcon"],[1,"ml-6","leading-6"],[1,"ml-6","min-w-0","space-y-1"],[1,"flex","items-center","leading-6"],["target","_blank",1,"text-primary-500","hover:underline",3,"href"],[1,"text-secondary","truncate","text-md"],[1,"mx-2"],[1,"font-medium"],[1,"hidden","h-4","w-6","overflow-hidden","sm:flex",3,"matTooltip"],[1,"font-mono","sm:ml-3"],[1,"ml-2.5","font-mono"],[1,"prose","prose-sm","ml-6","max-w-none",3,"innerHTML"],[1,"relative","flex","flex-auto","flex-col","items-center","px-6","sm:px-12"],[3,"formGroup"],[1,"ring-bg-card","relative","flex","h-32","w-32","items-center","justify-center","overflow-hidden","rounded-full","ring-4"],[1,"absolute","inset-0","z-10","bg-black","bg-opacity-50"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["id","avatar-file-input","type","file",1,"pointer-events-none","invisible","absolute","h-0","w-0","opacity-0",3,"change","multiple","accept"],["for","avatar-file-input","matRipple","",1,"flex","h-10","w-10","cursor-pointer","items-center","justify-center","rounded-full","hover:bg-hover"],["mat-icon-button","",3,"click"],[1,"mt-8"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","",3,"formControlName","placeholder","spellcheck"],[1,"-m-1.5","mt-6","flex","flex-wrap","items-center"],[1,"m-1.5","flex","cursor-pointer","items-center","justify-center","rounded-full","bg-gray-100","px-4","leading-9","text-gray-500","dark:bg-gray-700","dark:text-gray-300",3,"click"],["matInput","",3,"formControlName","placeholder"],[1,"space-y-4"],[1,"group","-ml-4","mt-2","inline-flex","cursor-pointer","items-center","rounded","px-4","py-2",3,"click"],[1,"text-secondary","ml-2","font-medium","group-hover:underline"],[1,"relative","flex"],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matSuffix","",3,"for"],["matInput","","cdkTextareaAutosize","",3,"formControlName","placeholder","rows","spellcheck"],[1,"-mx-6","mt-10","flex","items-center","border-t","bg-gray-50","py-4","pl-1","pr-4","dark:bg-transparent","sm:-mx-12","sm:pl-7","sm:pr-12"],["mat-button","",3,"click","color","matTooltip"],["mat-button","",1,"ml-auto",3,"click","matTooltip"],["mat-flat-button","",1,"ml-2",3,"click","color","disabled","matTooltip"],[1,"m-1.5","flex","items-center","justify-center","rounded-full","bg-gray-100","px-4","leading-9","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"whitespace-nowrap","text-md","font-medium"],[1,"ml-1.5","whitespace-nowrap","text-md","font-medium"],[1,"bg-card","w-60","rounded","border","shadow-md"],[1,"m-3","mr-2","flex","items-center"],[1,"flex","items-center"],["type","text","placeholder","Enter tag name",1,"w-full","min-w-0","border-0","py-1",3,"input","keydown","maxLength"],["mat-icon-button","",1,"ml-1",3,"click"],[1,"flex","max-h-64","flex-col","overflow-y-auto","border-t","py-2"],[1,"space-y-2","py-2"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","pl-4","pr-3","leading-none","hover:bg-hover"],["matRipple","",1,"flex","h-10","min-h-10","cursor-pointer","items-center","pl-1","pr-4","hover:bg-hover"],["matRipple","",1,"flex","h-10","min-h-10","cursor-pointer","items-center","pl-1","pr-4","hover:bg-hover",3,"click"],[1,"pointer-events-none","flex","h-10","min-h-10","items-center",3,"checked","color","disableRipple"],[1,"fuse-mat-dense","mx-4","w-full",3,"subscriptSizing"],["matInput","",3,"input","value"],["mat-icon-button","","matSuffix","",3,"click"],[1,"ml-2","icon-size-5",3,"svgIcon"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","pl-4","pr-3","leading-none","hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"flex-auto",3,"subscriptSizing"],["matInput","",3,"formControl","placeholder","spellcheck"],[1,"ml-2","w-full","max-w-24","flex-auto","sm:ml-4","sm:max-w-40",3,"subscriptSizing"],["matInput","",3,"formControl","placeholder"],[1,"flex","w-10","items-center","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Remove",1,"h-8","min-h-8","w-8",3,"click"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"mr-1","hidden","h-4","w-6","overflow-hidden","sm:flex"],[1,"text-default","font-medium","sm:mx-0.5"],[3,"value"],[1,"h-4","w-6","overflow-hidden"],[1,"ml-2","font-medium"]],template:function(o,i){1&o&&(t.j41(0,"div",5),t.DNE(1,$t,27,17)(2,Ht,92,52),t.k0s()),2&o&&(t.R7$(),t.vxM(i.editMode?-1:1),t.R7$(),t.vxM(i.editMode?2:-1))},dependencies:[b.Hl,b.$z,b.pQ,b.iY,N.uc,N.oV,_.Wk,$.m_,$.An,l.YN,l.qT,l.me,l.BC,l.cb,l.X1,l.l_,l.j4,l.JD,F.pZ,F.r6,f.RG,f.rl,f.nJ,f.JW,f.yw,j.fS,j.fg,E.xb,B.g7,B.So,x.YU,G.Ve,G.VO,G.$2,F.wT,F.Sy,y.X6,y.Vh,y.bZ,y.bU,E.EE,P.H,x.vh],encapsulation:2,changeDetection:0})}}return n})();var qt=c(99437);const te=[{path:"",component:S,resolve:{tags:()=>(0,t.WQX)(g).getTags()},children:[{path:"",component:Y,resolve:{contacts:()=>(0,t.WQX)(g).getContacts(),countries:()=>(0,t.WQX)(g).getCountries()},children:[{path:":id",component:Kt,resolve:{contact:(n,s)=>{const e=(0,t.WQX)(g),o=(0,t.WQX)(_.Ix);return e.getContactById(n.paramMap.get("id")).pipe((0,qt.W)(i=>{console.error(i);const a=s.url.split("/").slice(0,-1).join("/");return o.navigateByUrl(a),(0,I.$)(i)}))},countries:()=>(0,t.WQX)(g).getCountries()},canDeactivate:[(n,s,e,o)=>{let i=o.root;for(;i.firstChild;)i=i.firstChild;return!(o.url.includes("/contacts")&&!i.paramMap.get("id"))||n.closeDrawer().then(()=>!0)}]}]}]}]}}]);