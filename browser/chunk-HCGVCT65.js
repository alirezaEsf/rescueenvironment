import{a as ee,b as vt,c as xt}from"./chunk-QBRFK6CX.js";import{a as te,c as ie}from"./chunk-JWYE4QUG.js";import{a as ut,b as _t}from"./chunk-BROE2CMP.js";import{a as Ye,b as Ze}from"./chunk-5N4IIOUD.js";import{a as He}from"./chunk-RZWL4VHX.js";import"./chunk-TFZKTK72.js";import{a as Ke,b as We}from"./chunk-OBMFXYQV.js";import"./chunk-YCUPTL4E.js";import"./chunk-2WF3BAZE.js";import"./chunk-J44A7NQY.js";import"./chunk-K5KQA6TL.js";import"./chunk-6VFWJ4EV.js";import{a as ht,b as ft}from"./chunk-N7K7PRKT.js";import{d as pt,e as gt}from"./chunk-7FJFN7F7.js";import{a as Re,d as $e,e as je,i as Z,j as Ge}from"./chunk-E3OPEBBX.js";import"./chunk-YYH5TD5H.js";import{b as Xe,d as et,f as tt,g as it,j as nt,l as ot,m as at,n as rt,o as lt,r as st,v as ct,w as dt,x as mt}from"./chunk-FD45J2AH.js";import{a as Ue,c as J,e as X}from"./chunk-IDU54J7C.js";import{b as Qe,c as qe}from"./chunk-FLSFYQN3.js";import{D as Be,E as Ne,K as Y,N as Ae}from"./chunk-4RUIE36X.js";import"./chunk-ILZLEP6A.js";import{a as Je}from"./chunk-GOAOR4JZ.js";import"./chunk-BPAYJYXU.js";import{c as Ve}from"./chunk-KU56Z7YF.js";import{c as Oe}from"./chunk-DT5IGS4I.js";import{h as Fe,l as ze,m as Le,u as De}from"./chunk-XQUWTDXC.js";import{B as he,Bc as Ee,C as oe,Cc as Me,Fb as Q,G as ae,Gb as u,Ha as Ie,I as T,Ib as V,Jb as w,Kb as k,Lb as r,Mb as o,Mc as K,Nb as p,Pc as W,Qb as Pe,Qc as R,Rb as I,W as C,X as M,Xb as f,Z as z,Zb as g,_a as re,aa as U,ba as fe,bb as s,bc as le,cb as P,cc as se,da as ve,dc as ce,ec as A,f as G,fa as xe,fc as d,g as E,ga as L,gc as q,h as ge,ha as be,hc as b,ia as Ce,ic as we,la as D,m as ue,ma as ye,n as _e,pc as B,qc as ke,r as S,rb as Te,rc as de,wa as v,xa as x,xb as h,xc as H,ya as N,yb as O,yc as me,za as Se,zb as c}from"./chunk-ABXAS3LN.js";import"./chunk-UGUGGRN7.js";var bt=(()=>{let l=class l{constructor(){}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=D({type:l,selectors:[["inventory"]],standalone:!0,features:[B],decls:1,vars:0,template:function(i,a){i&1&&p(0,"router-outlet")},dependencies:[Ve],encapsulation:2,changeDetection:0});let t=l;return t})();var F=(()=>{let l=class l{constructor(e){this._httpClient=e,this._brands=new E(null),this._categories=new E(null),this._pagination=new E(null),this._product=new E(null),this._products=new E(null),this._tags=new E(null),this._vendors=new E(null)}get brands$(){return this._brands.asObservable()}get categories$(){return this._categories.asObservable()}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}get tags$(){return this._tags.asObservable()}get vendors$(){return this._vendors.asObservable()}getBrands(){return this._httpClient.get("api/apps/ecommerce/inventory/brands").pipe(z(e=>{this._brands.next(e)}))}getCategories(){return this._httpClient.get("api/apps/ecommerce/inventory/categories").pipe(z(e=>{this._categories.next(e)}))}getProducts(e=0,i=10,a="name",m="asc",_=""){return this._httpClient.get("api/apps/ecommerce/inventory/products",{params:{page:""+e,size:""+i,sort:a,order:m,search:_}}).pipe(z(y=>{this._pagination.next(y.pagination),this._products.next(y.products)}))}getProductById(e){return this._products.pipe(T(1),S(i=>{let a=i.find(m=>m.id===e)||null;return this._product.next(a),a}),C(i=>i?ue(i):_e("Could not found product with id of "+e+"!")))}createProduct(){return this.products$.pipe(T(1),C(e=>this._httpClient.post("api/apps/ecommerce/inventory/product",{}).pipe(S(i=>(this._products.next([i,...e]),i)))))}updateProduct(e,i){return this.products$.pipe(T(1),C(a=>this._httpClient.patch("api/apps/ecommerce/inventory/product",{id:e,product:i}).pipe(S(m=>{let _=a.findIndex(y=>y.id===e);return a[_]=m,this._products.next(a),m}),C(m=>this.product$.pipe(T(1),oe(_=>_&&_.id===e),z(()=>(this._product.next(m),m)))))))}deleteProduct(e){return this.products$.pipe(T(1),C(i=>this._httpClient.delete("api/apps/ecommerce/inventory/product",{params:{id:e}}).pipe(S(a=>{let m=i.findIndex(_=>_.id===e);return i.splice(m,1),this._products.next(i),a}))))}getTags(){return this._httpClient.get("api/apps/ecommerce/inventory/tags").pipe(z(e=>{this._tags.next(e)}))}createTag(e){return this.tags$.pipe(T(1),C(i=>this._httpClient.post("api/apps/ecommerce/inventory/tag",{tag:e}).pipe(S(a=>(this._tags.next([...i,a]),a)))))}updateTag(e,i){return this.tags$.pipe(T(1),C(a=>this._httpClient.patch("api/apps/ecommerce/inventory/tag",{id:e,tag:i}).pipe(S(m=>{let _=a.findIndex(y=>y.id===e);return a[_]=m,this._tags.next(a),m}))))}deleteTag(e){return this.tags$.pipe(T(1),C(i=>this._httpClient.delete("api/apps/ecommerce/inventory/tag",{params:{id:e}}).pipe(S(a=>{let m=i.findIndex(_=>_.id===e);return i.splice(m,1),this._tags.next(i),a}),oe(a=>a),C(a=>this.products$.pipe(T(1),S(m=>(m.forEach(_=>{let y=_.tags.findIndex(j=>j===e);y>-1&&_.tags.splice(y,1)}),a)))))))}getVendors(){return this._httpClient.get("api/apps/ecommerce/inventory/vendors").pipe(z(e=>{this._vendors.next(e)}))}};l.\u0275fac=function(i){return new(i||l)(xe(Oe))},l.\u0275prov=U({token:l,factory:l.\u0275fac,providedIn:"root"});let t=l;return t})();function It(t,l){if(t&1&&(r(0,"mat-option",16),d(1),o()),t&2){let n=l.$implicit;c("value",n),s(),b(" ",n," ")}}function Tt(t,l){if(t&1){let n=I();r(0,"mat-form-field",13)(1,"mat-select",15),f("selectionChange",function(i){v(n);let a=g(2);return x(a._changePageSize(i.value))}),w(2,It,2,2,"mat-option",16,V),o()()}if(t&2){let n=g(2);c("appearance",n._formFieldAppearance)("color",n.color),s(),c("value",n.pageSize)("disabled",n.disabled)("aria-labelledby",n._pageSizeLabelId)("panelClass",n.selectConfig.panelClass||"")("disableOptionCentering",n.selectConfig.disableOptionCentering),s(),k(n._displayedPageSizeOptions)}}function Pt(t,l){if(t&1&&(r(0,"div",14),d(1),o()),t&2){let n=g(2);s(),q(n.pageSize)}}function wt(t,l){if(t&1&&(r(0,"div",2)(1,"div",12),d(2),o(),h(3,Tt,4,7,"mat-form-field",13)(4,Pt,2,1,"div",14),o()),t&2){let n=g();s(),O("id",n._pageSizeLabelId),s(),b(" ",n._intl.itemsPerPageLabel," "),s(),u(n._displayedPageSizeOptions.length>1?3:-1),s(),u(n._displayedPageSizeOptions.length<=1?4:-1)}}function kt(t,l){if(t&1){let n=I();r(0,"button",17),f("click",function(){v(n);let i=g();return x(i.firstPage())}),N(),r(1,"svg",7),p(2,"path",18),o()()}if(t&2){let n=g();c("matTooltip",n._intl.firstPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),O("aria-label",n._intl.firstPageLabel)}}function Et(t,l){if(t&1){let n=I();r(0,"button",19),f("click",function(){v(n);let i=g();return x(i.lastPage())}),N(),r(1,"svg",7),p(2,"path",20),o()()}if(t&2){let n=g();c("matTooltip",n._intl.lastPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),O("aria-label",n._intl.lastPageLabel)}}var ne=(()=>{let l=class l{constructor(){this.changes=new G,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,a)=>{if(a==0||i==0)return`0 of ${a}`;a=Math.max(a,0);let m=e*i,_=m<a?Math.min(m+i,a):m+i;return`${m+1} \u2013 ${_} of ${a}`}}};l.\u0275fac=function(i){return new(i||l)},l.\u0275prov=U({token:l,factory:l.\u0275fac,providedIn:"root"});let t=l;return t})();function Mt(t){return t||new ne}var Ft={provide:ne,deps:[[new be,new Ce,ne]],useFactory:Mt},zt=50;var Lt=new ve("MAT_PAGINATOR_DEFAULT_OPTIONS"),Dt=0,$=(()=>{let l=class l{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(i=>R(i,0)),this._updateDisplayedPageSizeOptions()}constructor(e,i,a){if(this._intl=e,this._changeDetectorRef=i,this._pageSizeLabelId=`mat-paginator-page-size-label-${Dt++}`,this._isInitialized=!1,this._initializedStream=new ge(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new Ie,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),a){let{pageSize:m,pageSizeOptions:_,hidePageSize:y,showFirstLastButtons:j}=a;m!=null&&(this._pageSize=m),_!=null&&(this._pageSizeOptions=_),y!=null&&(this.hidePageSize=y),j!=null&&(this.showFirstLastButtons=j)}this._formFieldAppearance=a?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let e=this.getNumberOfPages()-1;return this.pageIndex<e&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){let i=this.pageIndex*this.pageSize,a=this.pageIndex;this.pageIndex=Math.floor(i/e)||0,this.pageSize=e,this._emitPageEvent(a)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:zt),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,i)=>e-i),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}};l.\u0275fac=function(i){return new(i||l)(P(ne),P(K),P(Lt,8))},l.\u0275cmp=D({type:l,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",R],length:[2,"length","length",R],pageSize:[2,"pageSize","pageSize",R],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",W],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",W],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",W]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[Te,B],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(i,a){i&1&&(r(0,"div",0)(1,"div",1),h(2,wt,5,4,"div",2),r(3,"div",3)(4,"div",4),d(5),o(),h(6,kt,3,5,"button",5),r(7,"button",6),f("click",function(){return a.previousPage()}),N(),r(8,"svg",7),p(9,"path",8),o()(),Se(),r(10,"button",9),f("click",function(){return a.nextPage()}),N(),r(11,"svg",7),p(12,"path",10),o()(),h(13,Et,3,5,"button",11),o()()()),i&2&&(s(2),u(a.hidePageSize?-1:2),s(3),b(" ",a._intl.getRangeLabel(a.pageIndex,a.pageSize,a.length)," "),s(),u(a.showFirstLastButtons?6:-1),s(),c("matTooltip",a._intl.previousPageLabel)("matTooltipDisabled",a._previousButtonsDisabled())("matTooltipPosition","above")("disabled",a._previousButtonsDisabled()),O("aria-label",a._intl.previousPageLabel),s(3),c("matTooltip",a._intl.nextPageLabel)("matTooltipDisabled",a._nextButtonsDisabled())("matTooltipPosition","above")("disabled",a._nextButtonsDisabled()),O("aria-label",a._intl.nextPageLabel),s(3),u(a.showFirstLastButtons?13:-1))},dependencies:[Z,te,Y,J,Ke],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=l;return t})(),Ct=(()=>{let l=class l{};l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=ye({type:l}),l.\u0275inj=fe({providers:[Ft],imports:[X,ie,We,$]});let t=l;return t})();var Vt=t=>({"pointer-events-none":t}),Bt=()=>[5,10,25,100],Nt=t=>({$implicit:t});function At(t,l){t&1&&(r(0,"div",4),p(1,"mat-progress-bar",15),o()),t&2&&(s(),c("mode","indeterminate"))}function Rt(t,l){if(t&1&&p(0,"img",28),t&2){let n=g().$implicit;c("alt","Product thumbnail image")("src",n.thumbnail,re)}}function $t(t,l){t&1&&(r(0,"div",29),d(1," NO THUMB "),o())}function jt(t,l){t&1&&(r(0,"div",34),p(1,"div",42),o())}function Gt(t,l){t&1&&(r(0,"div",35),p(1,"div",43),o())}function Ut(t,l){t&1&&(r(0,"div",36),p(1,"div",44),o())}function Qt(t,l){t&1&&p(0,"mat-icon",38),t&2&&c("svgIcon","heroicons_solid:check")}function qt(t,l){t&1&&p(0,"mat-icon",39),t&2&&c("svgIcon","heroicons_solid:x-mark")}function Ht(t,l){t&1&&Pe(0)}function Kt(t,l){if(t&1&&h(0,Ht,1,0,"ng-container",45),t&2){let n=g().$implicit;g(4);let e=A(18);c("ngTemplateOutlet",e)("ngTemplateOutletContext",de(2,Nt,n))}}function Wt(t,l){if(t&1){let n=I();r(0,"div",25)(1,"div",26)(2,"div",27),h(3,Rt,1,2,"img",28)(4,$t,2,0,"div",29),o()(),r(5,"div",30),d(6),o(),r(7,"div",31),d(8),o(),r(9,"div",23),d(10),H(11,"currency"),o(),r(12,"div",32)(13,"div",33),d(14),o(),h(15,jt,2,0,"div",34)(16,Gt,2,0,"div",35)(17,Ut,2,0,"div",36),o(),r(18,"div",37),h(19,Qt,1,1,"mat-icon",38)(20,qt,1,1,"mat-icon",39),o(),r(21,"div")(22,"button",40),f("click",function(){let i=v(n).$implicit,a=g(4);return x(a.toggleDetails(i.id))}),p(23,"mat-icon",41),o()()(),r(24,"div",17),h(25,Kt,1,4,"ng-container"),o()}if(t&2){let n=l.$implicit,e=g(4);s(3),u(n.thumbnail?3:-1),s(),u(n.thumbnail?-1:4),s(2),b(" ",n.sku," "),s(2),b(" ",n.name," "),s(2),b(" ",Ee(11,13,n.price,"USD","symbol","1.2-2")," "),s(4),b(" ",n.stock," "),s(),u(n.stock<20?15:-1),s(),u(n.stock>=20&&n.stock<30?16:-1),s(),u(n.stock>=30?17:-1),s(2),u(n.active?19:-1),s(),u(n.active?-1:20),s(3),c("svgIcon",(e.selectedProduct==null?null:e.selectedProduct.id)===n.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),s(2),u((e.selectedProduct==null?null:e.selectedProduct.id)===n.id?25:-1)}}function Yt(t,l){t&1&&w(0,Wt,26,18,null,null,Q().trackByFn,!0),t&2&&k(l)}function Zt(t,l){if(t&1&&(r(0,"div",17)(1,"div",18),p(2,"div"),r(3,"div",19),d(4," SKU "),o(),r(5,"div",20),d(6,"Name"),o(),r(7,"div",21),d(8," Price "),o(),r(9,"div",22),d(10," Stock "),o(),r(11,"div",22),d(12," Active "),o(),r(13,"div",23),d(14,"Details"),o()(),h(15,Yt,2,0),H(16,"async"),o(),p(17,"mat-paginator",24)),t&2){let n,e=g(2);s(3),c("mat-sort-header","sku"),s(2),c("mat-sort-header","name"),s(2),c("mat-sort-header","price"),s(2),c("mat-sort-header","stock"),s(2),c("mat-sort-header","active"),s(4),u((n=me(16,12,e.products$))?15:-1,n),s(2),c("ngClass",de(14,Vt,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",ke(16,Bt))("showFirstLastButtons",!0)}}function Jt(t,l){t&1&&(r(0,"div",16),d(1," There are no products! "),o())}function Xt(t,l){t&1&&h(0,Zt,18,17)(1,Jt,2,0,"div",16),t&2&&u(l.length>0?0:1)}function ei(t,l){if(t&1&&p(0,"img",53),t&2){let n=g(2);c("src",n.selectedProductForm.get("images").value[n.selectedProductForm.get("currentImageIndex").value],re)}}function ti(t,l){t&1&&(r(0,"span",54),d(1,"NO IMAGE"),o())}function ii(t,l){if(t&1){let n=I();r(0,"div",55)(1,"button",87),f("click",function(){v(n);let i=g(2);return x(i.cycleImages(!1))}),p(2,"mat-icon",41),o(),r(3,"span",88),d(4),o(),r(5,"button",87),f("click",function(){v(n);let i=g(2);return x(i.cycleImages(!0))}),p(6,"mat-icon",41),o()()}if(t&2){let n=g(2);s(2),c("svgIcon","heroicons_mini:arrow-long-left"),s(2),we(" ",n.selectedProductForm.get("currentImageIndex").value+1," of ",n.selectedProductForm.get("images").value.length," "),s(2),c("svgIcon","heroicons_mini:arrow-long-right")}}function ni(t,l){if(t&1&&(r(0,"mat-option",67),d(1),o()),t&2){let n=l.$implicit;c("value",n.id),s(),b(" ",n.name," ")}}function oi(t,l){if(t&1&&(r(0,"mat-option",67),d(1),o()),t&2){let n=l.$implicit;c("value",n.id),s(),b(" ",n.name," ")}}function ai(t,l){if(t&1&&(r(0,"mat-option",67),d(1),o()),t&2){let n=l.$implicit;c("value",n.id),s(),b(" ",n.name," ")}}function ri(t,l){t&1&&p(0,"mat-icon",41),t&2&&c("svgIcon","heroicons_solid:pencil-square")}function li(t,l){t&1&&p(0,"mat-icon",41),t&2&&c("svgIcon","heroicons_solid:check")}function si(t,l){if(t&1){let n=I();r(0,"mat-checkbox",90),f("change",function(i){let a=v(n).$implicit,m=g(3);return x(m.toggleProductTag(a,i))}),d(1),o()}if(t&2){let n=l.$implicit,e=g(3);c("color","primary")("checked",e.selectedProduct.tags.includes(n.id)),s(),b(" ",n.title," ")}}function ci(t,l){if(t&1&&w(0,si,2,3,"mat-checkbox",89,Q().trackByFn,!0),t&2){let n=g(2);k(n.filteredTags)}}function di(t,l){if(t&1){let n=I();r(0,"mat-form-field",91)(1,"input",92),f("input",function(i){let a=v(n).$implicit,m=g(3);return x(m.updateTagTitle(a,i))}),o(),r(2,"button",93),f("click",function(){let i=v(n).$implicit,a=g(3);return x(a.deleteTag(i))}),p(3,"mat-icon",41),o()()}if(t&2){let n=l.$implicit;c("subscriptSizing","dynamic"),s(),c("value",n.title),s(2),c("svgIcon","heroicons_solid:trash")}}function mi(t,l){if(t&1&&(r(0,"div",81),w(1,di,4,3,"mat-form-field",91,Q().trackByFn,!0),o()),t&2){let n=g(2);s(),k(n.filteredTags)}}function pi(t,l){if(t&1){let n=I();r(0,"div",94),f("click",function(){v(n),g();let i=A(97);return g().createTag(i.value),x(i.value="")}),p(1,"mat-icon",95),r(2,"div",96),d(3,' Create "'),r(4,"b"),d(5),o(),d(6,'" '),o()()}if(t&2){g();let n=A(97);s(),c("svgIcon","heroicons_solid:plus-circle"),s(4),q(n.value)}}function gi(t,l){t&1&&(p(0,"mat-icon",97),r(1,"span",98),d(2,"Product updated"),o()),t&2&&c("svgIcon","heroicons_outline:check")}function ui(t,l){t&1&&(p(0,"mat-icon",99),r(1,"span",98),d(2,"An error occurred, try again!"),o()),t&2&&c("svgIcon","heroicons_outline:x-mark")}function _i(t,l){if(t&1&&(r(0,"div",85),h(1,gi,3,1)(2,ui,3,1),o()),t&2){let n=g(2);s(),u(n.flashMessage==="success"?1:-1),s(),u(n.flashMessage==="error"?2:-1)}}function hi(t,l){if(t&1){let n=I();r(0,"div",46)(1,"div",47)(2,"form",48)(3,"div",49)(4,"div",50)(5,"div",51)(6,"div",52),h(7,ei,1,1,"img",53)(8,ti,2,0,"span",54),o(),h(9,ii,7,4,"div",55),o(),r(10,"div",56)(11,"span",57),d(12,"Product status"),o(),r(13,"mat-slide-toggle",58),d(14),o()()(),r(15,"div",59)(16,"div",60)(17,"mat-form-field",61)(18,"mat-label"),d(19,"Name"),o(),p(20,"input",62),o(),r(21,"div",63)(22,"mat-form-field",64)(23,"mat-label"),d(24,"SKU"),o(),p(25,"input",62),o(),r(26,"mat-form-field",65)(27,"mat-label"),d(28,"Barcode"),o(),p(29,"input",62),o()(),r(30,"div",63)(31,"mat-form-field",64)(32,"mat-label"),d(33,"Category"),o(),r(34,"mat-select",66),w(35,ni,2,2,"mat-option",67,V),o()(),r(37,"mat-form-field",68)(38,"mat-label"),d(39,"Brand"),o(),r(40,"mat-select",66),w(41,oi,2,2,"mat-option",67,V),o()(),r(43,"mat-form-field",69)(44,"mat-label"),d(45,"Vendor"),o(),r(46,"mat-select",66),w(47,ai,2,2,"mat-option",67,V),o()()(),r(49,"div",63)(50,"mat-form-field",64)(51,"mat-label"),d(52,"Stock"),o(),p(53,"input",70),o(),r(54,"mat-form-field",69)(55,"mat-label"),d(56,"Reserved"),o(),p(57,"input",70),o()()(),r(58,"div",71)(59,"mat-form-field",61)(60,"mat-label"),d(61,"Cost"),o(),r(62,"span",72),d(63,"$"),o(),p(64,"input",62),o(),r(65,"mat-form-field",61)(66,"mat-label"),d(67,"Base Price"),o(),r(68,"span",72),d(69,"$"),o(),p(70,"input",62),o(),r(71,"mat-form-field",61)(72,"mat-label"),d(73,"Tax"),o(),r(74,"span",73),d(75,"%"),o(),p(76,"input",70),o(),r(77,"mat-form-field",61)(78,"mat-label"),d(79,"Price"),o(),r(80,"span",73),d(81,"$"),o(),p(82,"input",62),o()(),r(83,"div",71)(84,"mat-form-field",61)(85,"mat-label"),d(86,"Weight"),o(),r(87,"span",73),d(88,"lbs."),o(),p(89,"input",62),o(),r(90,"span",74),d(91,"Tags"),o(),r(92,"div",75)(93,"div",76)(94,"div",77),p(95,"mat-icon",41),r(96,"input",78,1),f("input",function(i){v(n);let a=g();return x(a.filterTags(i))})("keydown",function(i){v(n);let a=g();return x(a.filterTagsInputKeyDown(i))}),o()(),r(98,"button",79),f("click",function(){v(n);let i=g();return x(i.toggleTagsEditMode())}),h(99,ri,1,1,"mat-icon",41)(100,li,1,1,"mat-icon",41),o()(),r(101,"div",80),h(102,ci,2,0)(103,mi,3,0,"div",81)(104,pi,7,2,"div",82),o()()()()(),r(105,"div",83)(106,"button",84),f("click",function(){v(n);let i=g();return x(i.deleteSelectedProduct())}),d(107," Delete "),o(),r(108,"div",26),h(109,_i,3,2,"div",85),r(110,"button",86),f("click",function(){v(n);let i=g();return x(i.updateSelectedProduct())}),d(111," Update "),o()()()()()()}if(t&2){let n=A(97),e=g();s(2),c("formGroup",e.selectedProductForm),s(5),u(e.selectedProductForm.get("images").value.length?7:8),s(2),u(e.selectedProductForm.get("images").value.length?9:-1),s(4),c("formControlName","active")("color","primary"),s(),b(" ",e.selectedProductForm.get("active").value===!0?"Active":"Disabled"," "),s(6),c("formControlName","name"),s(5),c("formControlName","sku"),s(4),c("formControlName","barcode"),s(5),c("formControlName","category"),s(),k(e.categories),s(5),c("formControlName","brand"),s(),k(e.brands),s(5),c("formControlName","vendor"),s(),k(e.vendors),s(6),c("formControlName","stock"),s(4),c("formControlName","reserved"),s(7),c("formControlName","cost"),s(6),c("formControlName","basePrice"),s(6),c("formControlName","taxPercent"),s(6),c("formControlName","price"),s(7),c("formControlName","weight"),s(6),c("svgIcon","heroicons_solid:magnifying-glass"),s(),c("maxLength",50),s(3),u(e.tagsEditMode?-1:99),s(),u(e.tagsEditMode?100:-1),s(2),u(e.tagsEditMode?-1:102),s(),u(e.tagsEditMode?103:-1),s(),u(e.shouldShowCreateTagButton(n.value)?104:-1),s(2),c("color","warn"),s(3),u(e.flashMessage?109:-1),s(),c("color","primary")}}var yt=(()=>{let l=class l{constructor(e,i,a,m){this._changeDetectorRef=e,this._fuseConfirmationService=i,this._formBuilder=a,this._inventoryService=m,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new nt,this.selectedProduct=null,this.tagsEditMode=!1,this._unsubscribeAll=new G}ngOnInit(){this.selectedProductForm=this._formBuilder.group({id:[""],category:[""],name:["",[et.required]],description:[""],tags:[[]],sku:[""],barcode:[""],brand:[""],vendor:[""],stock:[""],reserved:[""],cost:[""],basePrice:[""],taxPercent:[""],price:[""],weight:[""],thumbnail:[""],images:[[]],currentImageIndex:[0],active:[!1]}),this._inventoryService.brands$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.brands=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.categories$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.categories=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.pagination$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.products$=this._inventoryService.products$,this._inventoryService.tags$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.tags=e,this.filteredTags=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.vendors$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.vendors=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe(M(this._unsubscribeAll),ae(300),C(e=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(0,10,"name","asc",e))),S(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe(M(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),he(this._sort.sortChange,this._paginator.page).pipe(C(()=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),S(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(e){if(this.selectedProduct&&this.selectedProduct.id===e){this.closeDetails();return}this._inventoryService.getProductById(e).subscribe(i=>{this.selectedProduct=i,this.selectedProductForm.patchValue(i),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedProduct=null}cycleImages(e=!0){let i=this.selectedProductForm.get("images").value.length,a=this.selectedProductForm.get("currentImageIndex").value,m=a+1===i?0:a+1,_=a-1<0?i-1:a-1;e?this.selectedProductForm.get("currentImageIndex").setValue(m):this.selectedProductForm.get("currentImageIndex").setValue(_)}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(e){let i=e.target.value.toLowerCase();this.filteredTags=this.tags.filter(a=>a.title.toLowerCase().includes(i))}filterTagsInputKeyDown(e){if(e.key!=="Enter")return;if(this.filteredTags.length===0){this.createTag(e.target.value),e.target.value="";return}let i=this.filteredTags[0];this.selectedProduct.tags.find(m=>m===i.id)?this.removeTagFromProduct(i):this.addTagToProduct(i)}createTag(e){let i={title:e};this._inventoryService.createTag(i).subscribe(a=>{this.addTagToProduct(a)})}updateTagTitle(e,i){e.title=i.target.value,this._inventoryService.updateTag(e.id,e).pipe(ae(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(e){this._inventoryService.deleteTag(e.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(e){this.selectedProduct.tags.unshift(e.id),this.selectedProductForm.get("tags").patchValue(this.selectedProduct.tags),this._changeDetectorRef.markForCheck()}removeTagFromProduct(e){this.selectedProduct.tags.splice(this.selectedProduct.tags.findIndex(i=>i===e.id),1),this.selectedProductForm.get("tags").patchValue(this.selectedProduct.tags),this._changeDetectorRef.markForCheck()}toggleProductTag(e,i){i.checked?this.addTagToProduct(e):this.removeTagFromProduct(e)}shouldShowCreateTagButton(e){return!(e===""||this.tags.findIndex(i=>i.title.toLowerCase()===e.toLowerCase())>-1)}createProduct(){this._inventoryService.createProduct().subscribe(e=>{this.selectedProduct=e,this.selectedProductForm.patchValue(e),this._changeDetectorRef.markForCheck()})}updateSelectedProduct(){let e=this.selectedProductForm.getRawValue();delete e.currentImageIndex,this._inventoryService.updateProduct(e.id,e).subscribe(()=>{this.showFlashMessage("success")})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"Delete product",message:"Are you sure you want to remove this product? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{if(i==="confirmed"){let a=this.selectedProductForm.getRawValue();this._inventoryService.deleteProduct(a.id).subscribe(()=>{this.closeDetails()})}})}showFlashMessage(e){this.flashMessage=e,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(e,i){return i.id||e}};l.\u0275fac=function(i){return new(i||l)(P(K),P(He),P(ct),P(F))},l.\u0275cmp=D({type:l,selectors:[["inventory-list"]],viewQuery:function(i,a){if(i&1&&(le($,5),le(ee,5)),i&2){let m;se(m=ce())&&(a._paginator=m.first),se(m=ce())&&(a._sort=m.first)}},standalone:!0,features:[B],decls:19,vars:11,consts:[["rowDetailsTemplate",""],["newTagInput",""],[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"absolute","inset-x-0","bottom-0"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"mode"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","text-secondary","sticky","top-0","z-10","grid","gap-4","bg-gray-50","px-6","py-4","text-md","font-semibold","shadow","dark:bg-black","dark:bg-opacity-5","md:px-8"],[1,"hidden","md:block",3,"mat-sort-header"],[3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"z-10","border-b","bg-gray-50","dark:bg-transparent","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-b-0","sm:border-t",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inventory-grid","grid","items-center","gap-4","border-b","px-6","py-3","md:px-8"],[1,"flex","items-center"],[1,"relative","mr-6","flex","h-12","w-12","flex-0","items-center","justify-center","overflow-hidden","rounded","border"],[1,"w-8",3,"alt","src"],[1,"flex","h-full","w-full","items-center","justify-center","text-center","text-xs","font-semibold","uppercase","leading-none"],[1,"hidden","truncate","md:block"],[1,"truncate"],[1,"hidden","items-center","lg:flex"],[1,"min-w-4"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-red-200"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-orange-200"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-green-100"],[1,"hidden","lg:block"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"h-7","min-h-7","min-w-10","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","h-1/3","w-full","bg-red-600"],[1,"flex","h-2/4","w-full","bg-orange-400"],[1,"flex","h-full","w-full","bg-green-400"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"overflow-hidden","shadow-lg"],[1,"flex","border-b"],[1,"flex","w-full","flex-col",3,"formGroup"],[1,"flex","flex-col","p-8","sm:flex-row"],[1,"mb-8","flex","flex-col","items-center","sm:mb-0","sm:items-start"],[1,"flex","flex-col","items-center"],[1,"h-44","w-32","overflow-hidden","rounded","border"],[1,"h-full","w-full","object-cover",3,"src"],[1,"flex","min-h-20","items-center","text-lg","font-semibold"],[1,"mt-2","flex","items-center","whitespace-nowrap"],[1,"mt-8","flex","flex-col"],[1,"mb-2","font-semibold"],[3,"formControlName","color"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","w-full","flex-col","sm:pl-8","lg:w-2/4"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex"],[1,"w-1/3","pr-2"],[1,"w-2/3","pl-2"],[3,"formControlName"],[3,"value"],[1,"w-1/3","px-2"],[1,"w-1/3","pl-2"],["type","number","matInput","",3,"formControlName"],[1,"flex","w-full","flex-col","sm:pl-8","lg:w-1/4"],["matPrefix",""],["matSuffix",""],[1,"mb-px","font-medium","leading-tight"],[1,"mt-1.5","overflow-hidden","rounded-md","border","border-gray-300","shadow-sm","dark:border-gray-500"],[1,"-my-px","flex","items-center","px-3","py-2"],[1,"flex","min-w-0","flex-auto","items-center"],["type","text","placeholder","Enter tag name",1,"ml-2","min-w-0","border-0","py-1",3,"input","keydown","maxLength"],["mat-icon-button","",1,"ml-3","h-8","min-h-8","w-8",3,"click"],[1,"h-44","overflow-y-auto","border-t","border-gray-300","leading-none","dark:border-gray-500"],[1,"space-y-2","p-4"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","border-t","pl-4","pr-3","leading-none","dark:hover:bg-hover","hover:bg-gray-50"],[1,"flex","w-full","items-center","justify-between","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"click","color"],[1,"mr-4","flex","items-center"],["mat-flat-button","",3,"click","color"],["mat-icon-button","",3,"click"],[1,"font-sm","mx-2"],[1,"flex","h-10","min-h-10","items-center","pl-1","pr-4",3,"color","checked"],[1,"flex","h-10","min-h-10","items-center","pl-1","pr-4",3,"change","color","checked"],[1,"fuse-mat-dense","w-full",3,"subscriptSizing"],["matInput","",3,"input","value"],["mat-icon-button","","matSuffix","",3,"click"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","border-t","pl-4","pr-3","leading-none","dark:hover:bg-hover","hover:bg-gray-50",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"]],template:function(i,a){if(i&1){let m=I();r(0,"div",2)(1,"div",3),h(2,At,2,1,"div",4),r(3,"div",5),d(4,"Inventory"),o(),r(5,"div",6)(6,"mat-form-field",7),p(7,"mat-icon",8)(8,"input",9),o(),r(9,"button",10),f("click",function(){return v(m),x(a.createProduct())}),p(10,"mat-icon",11),r(11,"span",12),d(12,"Add"),o()()()(),r(13,"div",13)(14,"div",14),h(15,Xt,2,1),H(16,"async"),h(17,hi,112,29,"ng-template",null,0,Me),o()()()}if(i&2){let m;s(2),u(a.isLoading?2:-1),s(4),c("subscriptSizing","dynamic"),s(),c("svgIcon","heroicons_solid:magnifying-glass"),s(),c("formControl",a.searchInputControl)("autocomplete","off")("placeholder","Search products"),s(),c("color","primary"),s(),c("svgIcon","heroicons_outline:plus"),s(5),u((m=me(16,9,a.products$))?15:-1,m)}},dependencies:[Ze,Ye,Ge,Z,Re,$e,je,qe,Qe,gt,pt,dt,ot,Xe,at,tt,it,mt,rt,lt,st,X,Ue,J,xt,ee,vt,ze,Ct,$,Fe,_t,ut,ie,te,Y,Ae,ft,ht,Ne,Be,Le,De],styles:[`.inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:48px 112px auto 112px 96px 96px 72px}}
`],encapsulation:2,data:{animation:Je},changeDetection:0});let t=l;return t})();var _n=[{path:"",pathMatch:"full",redirectTo:"inventory"},{path:"inventory",component:bt,children:[{path:"",component:yt,resolve:{brands:()=>L(F).getBrands(),categories:()=>L(F).getCategories(),products:()=>L(F).getProducts(),tags:()=>L(F).getTags(),vendors:()=>L(F).getVendors()}}]}];export{_n as default};
