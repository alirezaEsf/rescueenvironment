import{a as Me,b as pt,c as ut,d as ft,e as bt,f as ht}from"./chunk-TUIOFNLW.js";import{a as at,b as st,d as lt,e as dt,f as ct,g as mt}from"./chunk-USWXAYLQ.js";import{b as U}from"./chunk-YOCESGKY.js";import{a as Xe,b as Ye,c as Ze,d as et}from"./chunk-PKGH4TD3.js";import{a as We}from"./chunk-RZWL4VHX.js";import{a as Pe,c as Ge}from"./chunk-TFZKTK72.js";import{a as Ke}from"./chunk-YCUPTL4E.js";import"./chunk-2WF3BAZE.js";import{b as we}from"./chunk-J44A7NQY.js";import"./chunk-K5KQA6TL.js";import"./chunk-6VFWJ4EV.js";import{a as ot,b as nt}from"./chunk-N7K7PRKT.js";import{a as ke,b as Se,d as it,e as rt}from"./chunk-7FJFN7F7.js";import{a as Qe,i as qe,j as He}from"./chunk-E3OPEBBX.js";import"./chunk-YYH5TD5H.js";import{b as Z,d as tt,f as ee,g as te,l as ie,o as re,r as oe,v as q,w as ne,x as ae}from"./chunk-FD45J2AH.js";import{a as P,b as Je,c as G,e as Q}from"./chunk-IDU54J7C.js";import{b as T,c as B}from"./chunk-FLSFYQN3.js";import"./chunk-4RUIE36X.js";import"./chunk-ILZLEP6A.js";import"./chunk-BPAYJYXU.js";import{b as $e,c as Ue,d as pe,e as Ce}from"./chunk-KU56Z7YF.js";import{c as Ne}from"./chunk-DT5IGS4I.js";import{h as $,p as ye}from"./chunk-XQUWTDXC.js";import{Bb as _e,E as Fe,Fb as me,G as Ae,Gb as M,Ha as be,I as D,Jb as A,Kb as R,Lb as l,Mb as m,Mc as V,Nb as f,Rb as j,W as F,X as O,Xb as _,Z as S,Zb as g,_a as he,aa as Re,bb as s,bc as H,cb as v,cc as K,dc as J,ec as W,f as X,fa as je,fc as p,g as fe,ga as Y,gc as ve,hc as C,la as w,m as Le,n as ce,pc as k,qc as ze,r as x,rc as I,tc as Oe,wa as b,xa as h,xb as N,xc as ge,zb as c,zc as xe}from"./chunk-ABXAS3LN.js";import{a as Ee}from"./chunk-UGUGGRN7.js";var ue=class{constructor(r){this.id=r.id||null,this.title=r.title,this.description=r.description||null,this.icon=r.icon||null,this.lastActivity=r.lastActivity||null,this.lists=[],this.labels=[],this.members=[],r.lists&&(this.lists=r.lists.map(a=>a instanceof E?a:new E(a))),r.labels&&(this.labels=r.labels.map(a=>a instanceof se?a:new se(a))),r.members&&(this.members=r.members.map(a=>a instanceof Ie?a:new Ie(a)))}},E=class{constructor(r){this.id=r.id||null,this.boardId=r.boardId,this.position=r.position,this.title=r.title,this.cards=[],r.cards&&(this.cards=r.cards.map(a=>a instanceof z?a:new z(a)))}},z=class{constructor(r){this.id=r.id||null,this.boardId=r.boardId,this.listId=r.listId,this.position=r.position,this.title=r.title,this.description=r.description||null,this.labels=[],this.dueDate=r.dueDate||null,r.labels&&(this.labels=r.labels.map(a=>a instanceof se?a:new se(a)))}},Ie=class{constructor(r){this.id=r.id||null,this.name=r.name,this.avatar=r.avatar||null}},se=class{constructor(r){this.id=r.id||null,this.boardId=r.boardId,this.title=r.title}};var kt=["titleInput"],St=["titleAutosize"],It=n=>({"pointer-events-none opacity-0":n}),Dt=n=>({"opacity-0":n}),_t=(()=>{let r=class r{constructor(e,t){this._changeDetectorRef=e,this._formBuilder=t,this.buttonTitle="Add a card",this.saved=new be,this.formVisible=!1}ngOnInit(){this.form=this._formBuilder.group({title:[""]})}save(){let e=this.form.get("title").value;!e||e.trim()===""||(this.saved.next(e.trim()),this.formVisible=!1,this.form.get("title").setValue(""),setTimeout(()=>{this.titleInput.nativeElement.value="",this.titleAutosize.reset()}),this._changeDetectorRef.markForCheck())}toggleFormVisibility(){this.formVisible=!this.formVisible,this.formVisible&&this.titleInput.nativeElement.focus()}};r.\u0275fac=function(t){return new(t||r)(v(V),v(q))},r.\u0275cmp=w({type:r,selectors:[["scrumboard-board-add-card"]],viewQuery:function(t,i){if(t&1&&(H(kt,5),H(St,5)),t&2){let o;K(o=J())&&(i.titleInput=o.first),K(o=J())&&(i.titleAutosize=o.first)}},inputs:{buttonTitle:"buttonTitle"},outputs:{saved:"saved"},standalone:!0,features:[k],decls:17,vars:18,consts:[["titleInput","","titleAutosize","cdkTextareaAutosize"],[1,"p-3","pt-0"],[1,"relative","flex","h-full","w-full","rounded-lg"],["mat-button","","disableRipple","",1,"absolute","inset-0","w-full","justify-start","rounded-lg",3,"click","ngClass"],[1,"icon-size-5",3,"svgIcon"],[1,"text-secondary","ml-2"],[1,"flex","w-full","flex-col","items-start",3,"ngClass","formGroup"],[1,"bg-card","flex","w-full","rounded-lg","p-5","shadow"],["cdkTextareaAutosize","",1,"w-full","text-lg","font-medium","leading-5",3,"keydown.enter","spellcheck","formControlName","placeholder"],[1,"mt-2","flex","items-center"],["mat-flat-button","",1,"h-8","min-h-8",3,"click","color","type"],["mat-icon-button","",1,"ml-1","h-8","min-h-8","w-8",3,"click","type"],[1,"icon-size-4",3,"svgIcon"]],template:function(t,i){if(t&1){let o=j();l(0,"div",1)(1,"div",2)(2,"button",3),_("click",function(){return b(o),h(i.toggleFormVisibility())}),f(3,"mat-icon",4),l(4,"span",5),p(5),m()(),l(6,"form",6)(7,"div",7)(8,"textarea",8,0),_("keydown.enter",function(){return b(o),h(i.save())}),p(11,"                "),m()(),l(12,"div",9)(13,"button",10),_("click",function(){return b(o),h(i.save())}),p(14," Add card "),m(),l(15,"button",11),_("click",function(){return b(o),h(i.toggleFormVisibility())}),f(16,"mat-icon",12),m()()()()()}t&2&&(_e("h-13",!i.formVisible),s(2),c("ngClass",I(14,It,i.formVisible)),s(),c("svgIcon","heroicons_outline:plus-circle"),s(2),ve(i.buttonTitle),s(),c("ngClass",I(16,Dt,!i.formVisible))("formGroup",i.form),s(2),c("spellcheck","off")("formControlName","title")("placeholder","Enter card title..."),s(5),c("color","primary")("type","button"),s(2),c("type","button"),s(),c("svgIcon","heroicons_solid:x-mark"))},dependencies:[Q,P,G,$,B,T,ne,ie,Z,ee,te,ae,re,oe,Se,ke],encapsulation:2,changeDetection:0});let n=r;return n})();var Ft=["titleInput"],Mt=n=>({"pointer-events-none opacity-0":n}),Vt=n=>({"opacity-0":n}),vt=(()=>{let r=class r{constructor(e,t){this._changeDetectorRef=e,this._formBuilder=t,this.buttonTitle="Add a list",this.saved=new be,this.formVisible=!1}ngOnInit(){this.form=this._formBuilder.group({title:[""]})}save(){let e=this.form.get("title").value;!e||e.trim()===""||(this.saved.next(e.trim()),this.form.get("title").setValue(""),this.formVisible=!1,this._changeDetectorRef.markForCheck())}toggleFormVisibility(){this.formVisible=!this.formVisible,this.formVisible&&this.titleInput.nativeElement.focus()}};r.\u0275fac=function(t){return new(t||r)(v(V),v(q))},r.\u0275cmp=w({type:r,selectors:[["scrumboard-board-add-list"]],viewQuery:function(t,i){if(t&1&&H(Ft,5),t&2){let o;K(o=J())&&(i.titleInput=o.first)}},inputs:{buttonTitle:"buttonTitle"},outputs:{saved:"saved"},standalone:!0,features:[k],decls:14,vars:18,consts:[["titleInput",""],[1,"mt-11","w-64","px-2","py-2.5"],[1,"relative","flex","h-full","w-full","overflow-hidden","rounded-xl","bg-gray-200","dark:bg-gray-700"],["mat-button","","disableRipple","",1,"absolute","inset-0","w-full","justify-start","rounded-xl","bg-transparent","px-3",3,"click","ngClass"],[1,"icon-size-5",3,"svgIcon"],[1,"text-secondary","ml-2"],[1,"flex","w-full","flex-col","items-start","p-3",3,"ngClass","formGroup"],[1,"w-full","rounded-md","border","border-gray-300","bg-white","px-3","py-2","leading-5","shadow-sm","focus:border-primary","dark:border-gray-500","dark:bg-black","dark:bg-opacity-5","dark:focus:border-primary",3,"keydown.enter","autocomplete","formControlName","placeholder"],[1,"mt-2","flex","items-center"],["mat-flat-button","",1,"h-8","min-h-8",3,"click","color","type"],["mat-icon-button","",1,"ml-1","h-8","min-h-8","w-8",3,"click","type"],[1,"icon-size-4",3,"svgIcon"]],template:function(t,i){if(t&1){let o=j();l(0,"div",1)(1,"div",2)(2,"button",3),_("click",function(){return b(o),h(i.toggleFormVisibility())}),f(3,"mat-icon",4),l(4,"span",5),p(5),m()(),l(6,"form",6)(7,"input",7,0),_("keydown.enter",function(){return b(o),h(i.save())}),m(),l(9,"div",8)(10,"button",9),_("click",function(){return b(o),h(i.save())}),p(11," Add list "),m(),l(12,"button",10),_("click",function(){return b(o),h(i.toggleFormVisibility())}),f(13,"mat-icon",11),m()()()()()}t&2&&(_e("h-15",!i.formVisible),s(2),c("ngClass",I(14,Mt,i.formVisible)),s(),c("svgIcon","heroicons_outline:plus-circle"),s(2),ve(i.buttonTitle),s(),c("ngClass",I(16,Vt,!i.formVisible))("formGroup",i.form),s(),c("autocomplete","off")("formControlName","title")("placeholder","Enter list title..."),s(3),c("color","primary")("type","button"),s(2),c("type","button"),s(),c("svgIcon","heroicons_solid:x-mark"))},dependencies:[Q,P,G,$,B,T,ne,ie,Z,ee,te,ae,re,oe],encapsulation:2,changeDetection:0});let n=r;return n})();var L=(()=>{let r=class r{constructor(e){this._httpClient=e,this._board=new fe(null),this._boards=new fe(null),this._card=new fe(null)}get board$(){return this._board.asObservable()}get boards$(){return this._boards.asObservable()}get card$(){return this._card.asObservable()}getBoards(){return this._httpClient.get("api/apps/scrumboard/boards").pipe(x(e=>e.map(t=>new ue(t))),S(e=>this._boards.next(e)))}getBoard(e){return this._httpClient.get("api/apps/scrumboard/board",{params:{id:e}}).pipe(x(t=>new ue(t)),S(t=>this._board.next(t)))}createBoard(e){return this.boards$.pipe(D(1),F(t=>this._httpClient.put("api/apps/scrumboard/board",{board:e}).pipe(x(i=>(this._boards.next([...t,i]),i)))))}updateBoard(e,t){return this.boards$.pipe(D(1),F(i=>this._httpClient.patch("api/apps/scrumboard/board",{id:e,board:t}).pipe(x(o=>{let d=i.findIndex(u=>u.id===e);return i[d]=o,this._boards.next(i),o}))))}deleteBoard(e){return this.boards$.pipe(D(1),F(t=>this._httpClient.delete("api/apps/scrumboard/board",{params:{id:e}}).pipe(x(i=>{let o=t.findIndex(d=>d.id===e);return t.splice(o,1),this._boards.next(t),this._board.next(null),this._card.next(null),i}))))}createList(e){return this._httpClient.post("api/apps/scrumboard/board/list",{list:e}).pipe(x(t=>new E(t)),S(t=>{let i=this._board.value;i.lists=[...i.lists,t],i.lists.sort((o,d)=>o.position-d.position),this._board.next(i)}))}updateList(e){return this._httpClient.patch("api/apps/scrumboard/board/list",{list:e}).pipe(x(t=>new E(t)),S(t=>{let i=this._board.value,o=i.lists.findIndex(d=>d.id===e.id);i.lists[o]=t,i.lists.sort((d,u)=>d.position-u.position),this._board.next(i)}))}updateLists(e){return this._httpClient.patch("api/apps/scrumboard/board/lists",{lists:e}).pipe(x(t=>t.map(i=>new E(i))),S(t=>{let i=this._board.value;t.forEach(o=>{let d=i.lists.findIndex(u=>u.id===o.id);i.lists[d]=o}),i.lists.sort((o,d)=>o.position-d.position),this._board.next(i)}))}deleteList(e){return this._httpClient.delete("api/apps/scrumboard/board/list",{params:{id:e}}).pipe(S(t=>{let i=this._board.value,o=i.lists.findIndex(d=>d.id===e);i.lists.splice(o,1),i.lists.sort((d,u)=>d.position-u.position),this._board.next(i)}))}getCard(e){return this._board.pipe(D(1),x(t=>{let i=t.lists.find(o=>o.cards.some(d=>d.id===e)).cards.find(o=>o.id===e);return this._card.next(i),i}),F(t=>t?Le(t):ce("Could not found the card with id of "+e+"!")))}createCard(e){return this._httpClient.put("api/apps/scrumboard/board/card",{card:e}).pipe(x(t=>new z(t)),S(t=>{let i=this._board.value;return i.lists.forEach((o,d,u)=>{o.id===t.listId&&u[d].cards.push(t)}),this._board.next(i),t}))}updateCard(e,t){return this.board$.pipe(D(1),F(i=>this._httpClient.patch("api/apps/scrumboard/board/card",{id:e,card:t}).pipe(x(o=>(i.lists.forEach(d=>{d.cards.forEach((u,y,de)=>{u.id===e&&(de[y]=o)})}),this._board.next(i),this._card.next(o),o)))))}updateCards(e){return this._httpClient.patch("api/apps/scrumboard/board/cards",{cards:e}).pipe(x(t=>t.map(i=>new z(i))),S(t=>{let i=this._board.value;t.forEach(o=>{let d=i.lists.findIndex(y=>y.id===o.listId),u=i.lists[d].cards.findIndex(y=>y.id===o.id);i.lists[d].cards[u]=o,i.lists[d].cards.sort((y,de)=>y.position-de.position)}),this._board.next(i)}))}deleteCard(e){return this.board$.pipe(D(1),F(t=>this._httpClient.delete("api/apps/scrumboard/board/card",{params:{id:e}}).pipe(x(i=>(t.lists.forEach(o=>{o.cards.forEach((d,u,y)=>{d.id===e&&y.splice(u,1)})}),this._board.next(t),this._card.next(null),i)))))}createLabel(e){return this.board$.pipe(D(1),F(t=>this._httpClient.post("api/apps/scrumboard/board/label",{label:e}).pipe(x(i=>(t.labels=[...t.labels,i],this._board.next(t),i)))))}updateLabel(e,t){return this.board$.pipe(D(1),F(i=>this._httpClient.patch("api/apps/scrumboard/board/label",{id:e,label:t}).pipe(x(o=>{let d=i.labels.findIndex(u=>u.id===e);return i.labels[d]=o,this._board.next(i),o}))))}deleteLabel(e){return this.board$.pipe(D(1),F(t=>this._httpClient.delete("api/apps/scrumboard/board/label",{params:{id:e}}).pipe(x(i=>{let o=t.labels.findIndex(d=>d.id===e);return t.labels.splice(o,1),i&&t.lists.forEach(d=>{d.cards.forEach(u=>{let y=u.labels.findIndex(de=>de.id===e);y>-1&&u.labels.splice(y,1)})}),this._board.next(t),i}))))}search(e){return this._httpClient.get("api/apps/scrumboard/board/search",{params:{query:e}})}};r.\u0275fac=function(t){return new(t||r)(je(Ne))},r.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();var Tt=()=>[".."],Bt=n=>["card",n],Et=n=>({"text-red-600":n});function Lt(n,r){if(n&1&&(l(0,"div",27),f(1,"img",30),m()),n&2){let a=g().$implicit;s(),c("src",a.coverImage,he)}}function At(n,r){if(n&1&&(l(0,"div",32),p(1),m()),n&2){let a=r.$implicit;s(),C(" ",a.title," ")}}function Rt(n,r){if(n&1&&(l(0,"div")(1,"div",31),A(2,At,2,1,"div",32,me().trackByFn,!0),m()()),n&2){let a=g().$implicit;s(2),R(a.labels)}}function jt(n,r){if(n&1&&(l(0,"div",29),f(1,"mat-icon",33),l(2,"div",21),p(3),ge(4,"date"),m()()),n&2){let a=g().$implicit,e=g(2);c("ngClass",I(6,Et,e.isOverdue(a.dueDate))),s(),c("svgIcon","heroicons_outline:clock"),s(2),C(" ",xe(4,3,a.dueDate,"longDate")," ")}}function zt(n,r){if(n&1&&(l(0,"a",26),N(1,Lt,2,1,"div",27),l(2,"div",28),p(3),m(),N(4,Rt,4,0,"div")(5,jt,5,8,"div",29),m()),n&2){let a=r.$implicit;c("routerLink",I(5,Bt,a.id)),s(),M(a.coverImage?1:-1),s(2),C(" ",a.title," "),s(),M(a.labels.length?4:-1),s(),M(a.dueDate?5:-1)}}function Ot(n,r){if(n&1){let a=j();l(0,"div",14)(1,"div",17)(2,"div",18)(3,"input",19,0),_("focusout",function(t){let i=b(a).$implicit,o=g();return h(o.updateListTitle(t,i))})("keydown.enter",function(){b(a);let t=W(4);return h(t.blur())}),m()(),l(5,"div",20),p(6),m(),l(7,"div",21)(8,"button",22),f(9,"mat-icon",8),m(),l(10,"mat-menu",null,1)(12,"button",23),_("click",function(){b(a);let t=W(4),i=g();return h(i.renameList(t))}),f(13,"mat-icon",8),p(14," Rename list "),m(),l(15,"button",23),_("click",function(){let t=b(a).$implicit,i=g();return h(i.deleteList(t.id))}),f(16,"mat-icon",8),p(17," Delete list "),m()()()(),l(18,"div",24)(19,"div",25),_("cdkDropListDropped",function(t){b(a);let i=g();return h(i.cardDropped(t))}),A(20,zt,6,7,"a",26,me().trackByFn,!0),m(),l(22,"scrumboard-board-add-card",15),_("saved",function(t){let i=b(a).$implicit,o=g();return h(o.addCard(i,t))}),m()()()}if(n&2){let a=r.$implicit,e=W(11);c("cdkDragLockAxis","x"),s(3),c("spellcheck","false")("value",a.title),s(3),C(" ",a.cards.length," "),s(2),c("matMenuTriggerFor",e),s(),c("svgIcon","heroicons_solid:ellipsis-vertical"),s(4),c("svgIcon","heroicons_solid:pencil-square"),s(3),c("svgIcon","heroicons_solid:trash"),s(3),c("id",a.id)("cdkDropListData",a.cards),s(),R(a.cards),s(2),c("buttonTitle",a.cards.length?"Add another card":"Add a card")}}var gt=(()=>{let r=class r{constructor(e,t,i,o){this._changeDetectorRef=e,this._formBuilder=t,this._fuseConfirmationService=i,this._scrumboardService=o,this._positionStep=65536,this._maxListCount=200,this._maxPosition=this._positionStep*500,this._unsubscribeAll=new X}ngOnInit(){this.listTitleForm=this._formBuilder.group({title:[""]}),this._scrumboardService.board$.pipe(O(this._unsubscribeAll)).subscribe(e=>{this.board=Ee({},e),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}renameList(e){setTimeout(()=>{e.focus()})}addList(e){if(this.board.lists.length>=this._maxListCount)return;let t=new E({boardId:this.board.id,position:this.board.lists.length?this.board.lists[this.board.lists.length-1].position+this._positionStep:this._positionStep,title:e});this._scrumboardService.createList(t).subscribe()}updateListTitle(e,t){let i=e.target,o=i.value;if(!o||o.trim()===""){i.value=t.title;return}t.title=i.value=o.trim(),this._scrumboardService.updateList(t).subscribe()}deleteList(e){this._fuseConfirmationService.open({title:"Delete list",message:"Are you sure you want to delete this list and its cards? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{i==="confirmed"&&this._scrumboardService.deleteList(e).subscribe()})}addCard(e,t){let i=new z({boardId:this.board.id,listId:e.id,position:e.cards.length?e.cards[e.cards.length-1].position+this._positionStep:this._positionStep,title:t});this._scrumboardService.createCard(i).subscribe()}listDropped(e){Me(e.container.data,e.previousIndex,e.currentIndex);let t=this._calculatePositions(e);this._scrumboardService.updateLists(t).subscribe()}cardDropped(e){e.previousContainer===e.container?Me(e.container.data,e.previousIndex,e.currentIndex):(pt(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),e.container.data[e.currentIndex].listId=e.container.id);let t=this._calculatePositions(e);this._scrumboardService.updateCards(t).subscribe()}isOverdue(e){return U.fromISO(e).startOf("day")<U.now().startOf("day")}trackByFn(e,t){return t.id||e}_calculatePositions(e){let t=e.container.data,i=t[e.currentIndex],o=t[e.currentIndex-1]||null,d=t[e.currentIndex+1]||null;return o?d?i.position=(o.position+d.position)/2:i.position=o.position+this._positionStep:d?i.position=d.position/2:i.position=this._positionStep,!Number.isInteger(i.position)||i.position>=this._maxPosition?(t=t.map((u,y)=>(u.position=(y+1)*this._positionStep,u)),t):[i]}};r.\u0275fac=function(t){return new(t||r)(v(V),v(q),v(We),v(L))},r.\u0275cmp=w({type:r,selectors:[["scrumboard-board"]],standalone:!0,features:[k],decls:22,vars:8,consts:[["listTitleInput",""],["listMenu","matMenu"],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-8"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-stroked-button","",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-stroked-button","",1,"ml-3"],["cdkScrollable","",1,"flex-auto","overflow-y-auto","p-6","sm:p-8","sm:pt-4"],["cdkDropList","",1,"flex",3,"cdkDropListDropped","cdkDropListData","cdkDropListOrientation"],["cdkDropListGroup","",1,"flex","items-start"],["cdkDrag","",1,"bg-default","w-72","flex-0","rounded-2xl","p-2",3,"cdkDragLockAxis"],[3,"saved","buttonTitle"],[1,"pointer-events-none","invisible","absolute","h-0","w-0","opacity-0"],["cdkDragHandle","",1,"flex","items-center","justify-between"],[1,"flex","w-full","cursor-text","items-center","rounded-md","border","border-transparent","px-3","py-2","focus-within:border-primary","focus-within:bg-white","focus-within:shadow-sm","dark:focus-within:bg-gray-900"],[1,"w-full","bg-transparent","font-medium","leading-5",3,"focusout","keydown.enter","spellcheck","value"],[1,"text-secondary","ml-4","flex","min-w-6","items-center","justify-center","rounded-full","bg-gray-300","text-sm","font-semibold","leading-6","dark:bg-gray-700"],[1,"ml-1"],["mat-icon-button","",1,"h-8","min-h-8","w-8",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"mt-2","rounded-xl","bg-gray-400","bg-opacity-12","dark:border","dark:bg-transparent"],["cdkDropList","",1,"p-3","pb-0",3,"cdkDropListDropped","id","cdkDropListData"],["cdkDrag","",1,"bg-card","mb-3","flex","flex-col","items-start","space-y-3","overflow-hidden","rounded-lg","p-5","shadow",3,"routerLink"],[1,"-mx-5","-mt-5","mb-2"],[1,"text-lg","font-medium","leading-5"],[1,"text-secondary","flex","items-center","rounded","text-sm","font-medium","leading-5",3,"ngClass"],[1,"w-full","object-cover",3,"src"],[1,"-mx-1","-mb-2","flex","flex-wrap"],[1,"mx-1","mb-2","rounded-full","bg-gray-100","px-3","py-0.5","text-sm","font-medium","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"text-current","icon-size-4",3,"svgIcon"]],template:function(t,i){t&1&&(l(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2",5),p(4),m()(),l(5,"div",6)(6,"a",7),f(7,"mat-icon",8),l(8,"span",9),p(9,"Boards"),m()(),l(10,"button",10),f(11,"mat-icon",8),l(12,"span",9),p(13,"Settings"),m()()()(),l(14,"div",11)(15,"div",12),_("cdkDropListDropped",function(d){return i.listDropped(d)}),l(16,"div",13),A(17,Ot,23,11,"div",14,i.trackByFn,!0),l(19,"scrumboard-board-add-list",15),_("saved",function(d){return i.addList(d)}),m()()()()(),l(20,"div",16),f(21,"router-outlet"),m()),t&2&&(s(4),C(" ",i.board.title," "),s(2),c("routerLink",ze(7,Tt)),s(),c("svgIcon","heroicons_solid:view-columns"),s(4),c("svgIcon","heroicons_solid:cog-8-tooth"),s(4),c("cdkDropListData",i.board.lists)("cdkDropListOrientation","horizontal"),s(2),R(i.board.lists),s(2),c("buttonTitle",i.board.lists.length?"Add another list":"Add a list"))},dependencies:[Q,Je,P,G,Ce,B,T,we,ht,bt,ft,ut,et,Ye,Xe,Ze,$,_t,vt,Ue,ye],styles:[`.cdk-drag-preview{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging div:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}
`],encapsulation:2,changeDetection:0});let n=r;return n})();var Nt=n=>[n];function $t(n,r){if(n&1&&f(0,"img",16),n&2){let a=r.$implicit;c("src",a.avatar,he)}}function Ut(n,r){if(n&1&&(l(0,"div",17)(1,"div",18),p(2),m()()),n&2){let a=g(2).$implicit;s(2),C(" +",a.members.slice(5).length," ")}}function Pt(n,r){if(n&1&&(f(0,"div",14),l(1,"div",15),A(2,$t,1,1,"img",16,me().trackByFn,!0),N(4,Ut,3,1,"div",17),m()),n&2){let a=g().$implicit;s(2),R(a.members.slice(0,5)),s(2),M(a.members.length>5?4:-1)}}function Gt(n,r){if(n&1&&(l(0,"a",4)(1,"div",7),f(2,"mat-icon",8),m(),l(3,"div",9),p(4),m(),l(5,"div",10),p(6),m(),N(7,Pt,5,1),l(8,"div",11)(9,"div",12),p(10,"Edited:"),m(),l(11,"div",13),p(12),m()()()),n&2){let a=r.$implicit,e=g();c("routerLink",I(6,Nt,a.id)),s(2),c("svgIcon",a.icon),s(2),C(" ",a.title," "),s(2),C(" ",a.description," "),s(),M(a.members!=null&&a.members.length?7:-1),s(5),C(" ",e.formatDateAsRelative(a.lastActivity)," ")}}var xt=(()=>{let r=class r{constructor(e,t){this._changeDetectorRef=e,this._scrumboardService=t,this._unsubscribeAll=new X}ngOnInit(){this._scrumboardService.boards$.pipe(O(this._unsubscribeAll)).subscribe(e=>{this.boards=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}formatDateAsRelative(e){return U.fromISO(e).toRelative()}trackByFn(e,t){return t.id||e}};r.\u0275fac=function(t){return new(t||r)(v(V),v(L))},r.\u0275cmp=w({type:r,selectors:[["scrumboard-boards"]],standalone:!0,features:[k],decls:9,vars:1,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-y-auto"],[1,"flex","flex-auto","flex-col","items-center","p-6","sm:p-10"],[1,"mt-4","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:mt-24","md:text-6xl"],[1,"mt-8","grid","grid-cols-1","gap-4","sm:grid-cols-2","md:mt-16","lg:grid-cols-4"],[1,"bg-card","flex","w-56","flex-col","items-start","rounded-lg","p-6","shadow","transition-shadow","duration-150","ease-in-out","hover:shadow-xl",3,"routerLink"],[1,"flex","w-56","cursor-pointer","flex-col","items-center","justify-center","rounded-lg","border-2","border-dashed","border-gray-300","transition-colors","duration-150","ease-in-out","hover:bg-hover"],[1,"text-hint","icon-size-12",3,"svgIcon"],[1,"flex","items-center","justify-center","rounded-full","bg-primary-50","p-4","text-primary-700","dark:bg-primary","dark:text-on-primary"],[1,"text-current",3,"svgIcon"],[1,"mt-5","text-lg","font-medium","leading-5"],[1,"text-secondary","mt-0.5","line-clamp-2"],[1,"font-md","mt-4","flex","items-center","text-md"],[1,"text-secondary"],[1,"ml-1"],[1,"mt-6","h-1","w-12","border-t-2"],[1,"mt-6","flex","items-center","-space-x-1.5"],["alt","Member avatar",1,"ring-bg-card","h-8","w-8","flex-0","rounded-full","object-cover","ring","ring-offset-1","ring-offset-transparent",3,"src"],[1,"ring-bg-card","flex","h-8","w-8","flex-0","items-center","justify-center","rounded-full","bg-gray-200","text-gray-500","ring","ring-offset-1","ring-offset-transparent"],[1,"text-md","font-semibold"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),p(3," Scrumboard Boards "),m(),l(4,"div",3),A(5,Gt,13,8,"a",4,i.trackByFn,!0),l(7,"div",5),f(8,"mat-icon",6),m()()()()),t&2&&(s(5),R(i.boards),s(3),c("svgIcon","heroicons_outline:plus"))},dependencies:[we,Ce,B,T],encapsulation:2,changeDetection:0});let n=r;return n})();var qt=["labelInput"],Ht=(n,r,a)=>({"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-300":n,"bg-green-200 text-green-800 dark:bg-green-500 dark:text-green-100":r,"bg-red-200 text-red-800 dark:bg-red-500 dark:text-red-100":a});function Kt(n,r){if(n&1&&(p(0),ge(1,"date")),n&2){let a=g();C(" ",xe(1,1,a.card.dueDate,"longDate")," ")}}function Jt(n,r){n&1&&p(0," Not set ")}function Wt(n,r){if(n&1){let a=j();l(0,"mat-checkbox",25),_("change",function(t){let i=b(a).$implicit,o=g();return h(o.toggleProductTag(i,t))}),p(1),m()}if(n&2){let a=r.$implicit,e=g();c("color","primary")("checked",e.hasLabel(a)),s(),C(" ",a.title," ")}}var yt=(()=>{let r=class r{constructor(e,t,i,o){this.matDialogRef=e,this._changeDetectorRef=t,this._formBuilder=i,this._scrumboardService=o,this._unsubscribeAll=new X}ngOnInit(){this._scrumboardService.board$.pipe(O(this._unsubscribeAll)).subscribe(e=>{this.board=e,this.labels=this.filteredLabels=e.labels}),this._scrumboardService.card$.pipe(O(this._unsubscribeAll)).subscribe(e=>{this.card=e}),this.cardForm=this._formBuilder.group({id:[""],title:["",tt.required],description:[""],labels:[[]],dueDate:[null]}),this.cardForm.setValue({id:this.card.id,title:this.card.title,description:this.card.description,labels:this.card.labels,dueDate:this.card.dueDate}),this.cardForm.valueChanges.pipe(S(e=>{this.card=Ke(this.card,e)}),Ae(300),O(this._unsubscribeAll)).subscribe(e=>{this._scrumboardService.updateCard(e.id,e).subscribe(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}hasLabel(e){return!!this.card.labels.find(t=>t.id===e.id)}filterLabels(e){let t=e.target.value.toLowerCase();this.filteredLabels=this.labels.filter(i=>i.title.toLowerCase().includes(t))}filterLabelsInputKeyDown(e){if(e.key!=="Enter"||this.filteredLabels.length===0)return;let t=this.filteredLabels[0];this.card.labels.find(o=>o.id===t.id)?this.removeLabelFromCard(t):this.addLabelToCard(t)}toggleProductTag(e,t){t.checked?this.addLabelToCard(e):this.removeLabelFromCard(e)}addLabelToCard(e){this.card.labels.unshift(e),this.cardForm.get("labels").patchValue(this.card.labels),this._changeDetectorRef.markForCheck()}removeLabelFromCard(e){this.card.labels.splice(this.card.labels.findIndex(t=>t.id===e.id),1),this.cardForm.get("labels").patchValue(this.card.labels),this._changeDetectorRef.markForCheck()}isOverdue(e){return U.fromISO(e).startOf("day")<U.now().startOf("day")}trackByFn(e,t){return t.id||e}_readAsDataURL(e){return new Promise((t,i)=>{let o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=d=>{i(d)},o.readAsDataURL(e)})}};r.\u0275fac=function(t){return new(t||r)(v(Pe),v(V),v(q),v(L))},r.\u0275cmp=w({type:r,selectors:[["scrumboard-card-details"]],viewQuery:function(t,i){if(t&1&&H(qt,5),t&2){let o;K(o=J())&&(i.labelInput=o.first)}},standalone:!0,features:[k],decls:45,vars:25,consts:[["dueDatePicker",""],[1,"-m-6","flex","max-h-160","flex-auto","flex-col","overflow-y-auto","md:w-160","md:min-w-160"],[1,"flex","h-16","flex-0","items-center","justify-between","bg-primary","pl-6","pr-3","text-on-primary","sm:pl-8","sm:pr-5"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"click","tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","w-full","flex-0","flex-col","items-start","space-y-6","overflow-y-auto","p-6","sm:p-8",3,"formGroup"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"formControlName","rows","cdkAutosizeMinRows"],[1,"font-medium"],[1,"relative","mt-1.5","flex","cursor-pointer","items-center","rounded-full","px-4","leading-9",3,"click","ngClass"],[1,"text-current","icon-size-5",3,"svgIcon"],[1,"ml-2","text-md","font-medium"],[1,"fuse-mat-dense","pointer-events-none","invisible","absolute","inset-0","-mt-2.5","opacity-0",3,"subscriptSizing"],["matInput","",3,"formControlName","matDatepicker"],["mat-button","","matDatepickerCancel","",3,"click"],["mat-flat-button","","matDatepickerApply","",3,"color"],[1,"w-full"],[1,"mt-1","overflow-hidden","rounded-md","border","border-gray-300","shadow-sm"],[1,"mx-3","my-2","flex","items-center"],[1,"flex","min-w-0","flex-auto","items-center"],[1,"icon-size-5",3,"svgIcon"],["type","text","placeholder","Enter label name",1,"ml-2","min-w-0","border-0","py-1",3,"input","keydown","maxLength"],[1,"max-h-40","overflow-y-auto","border-t","leading-none"],[1,"flex","h-10","min-h-10","items-center","pl-1","pr-4",3,"color","checked"],[1,"flex","h-10","min-h-10","items-center","pl-1","pr-4",3,"change","color","checked"]],template:function(t,i){if(t&1){let o=j();l(0,"div",1)(1,"div",2)(2,"div",3),p(3,"Card"),m(),l(4,"button",4),_("click",function(){return b(o),h(i.matDialogRef.close())}),f(5,"mat-icon",5),m()(),l(6,"form",6)(7,"mat-form-field",7)(8,"mat-label"),p(9,"Title"),m(),l(10,"textarea",8),p(11,"            "),m()(),l(12,"mat-form-field",7)(13,"mat-label"),p(14,"Description"),m(),l(15,"textarea",8),p(16,"            "),m()(),l(17,"div")(18,"div",9),p(19,"Due date"),m(),l(20,"div",10),_("click",function(){b(o);let u=W(28);return h(u.open())}),f(21,"mat-icon",11),l(22,"span",12),N(23,Kt,2,4)(24,Jt,1,0),m(),l(25,"mat-form-field",13),f(26,"input",14),l(27,"mat-datepicker",null,0)(29,"mat-datepicker-actions")(30,"button",15),_("click",function(){return b(o),h(i.cardForm.get("dueDate").setValue(null))}),p(31," Clear "),m(),l(32,"button",16),p(33," Select "),m()()()()()(),l(34,"div",17)(35,"div",9),p(36,"Labels"),m(),l(37,"div",18)(38,"div",19)(39,"div",20),f(40,"mat-icon",21),l(41,"input",22),_("input",function(u){return b(o),h(i.filterLabels(u))})("keydown",function(u){return b(o),h(i.filterLabelsInputKeyDown(u))}),m()()(),l(42,"div",23),A(43,Wt,2,3,"mat-checkbox",24,i.trackByFn,!0),m()()()()()}if(t&2){let o=W(28);s(4),c("tabIndex",-1),s(),c("svgIcon","heroicons_outline:x-mark"),s(),c("formGroup",i.cardForm),s(),c("subscriptSizing","dynamic"),s(3),c("formControlName","title")("rows",1)("cdkAutosizeMinRows",1),s(2),c("subscriptSizing","dynamic"),s(3),c("formControlName","description")("rows",1)("cdkAutosizeMinRows",1),s(5),c("ngClass",Oe(21,Ht,!i.card.dueDate,i.card.dueDate&&!i.isOverdue(i.card.dueDate),i.card.dueDate&&i.isOverdue(i.card.dueDate))),s(),c("svgIcon","heroicons_solid:calendar"),s(2),M(i.card.dueDate?23:-1),s(),M(i.card.dueDate?-1:24),s(),c("subscriptSizing","dynamic"),s(),c("formControlName","dueDate")("matDatepicker",o),s(6),c("color","primary"),s(8),c("svgIcon","heroicons_solid:magnifying-glass"),s(),c("maxLength",50),s(2),R(i.filteredLabels)}},dependencies:[Q,P,G,B,T,ne,ie,Z,ee,te,ae,re,oe,He,qe,Qe,rt,it,ke,Se,$,mt,at,st,ct,dt,lt,nt,ot,ye],encapsulation:2,changeDetection:0});let n=r;return n})();var Ct=(()=>{let r=class r{constructor(e,t,i){this._activatedRoute=e,this._matDialog=t,this._router=i}ngOnInit(){this._matDialog.open(yt,{autoFocus:!1}).afterClosed().subscribe(()=>{this._router.navigate(["./../.."],{relativeTo:this._activatedRoute})})}};r.\u0275fac=function(t){return new(t||r)(v($e),v(Ge),v(pe))},r.\u0275cmp=w({type:r,selectors:[["scrumboard-card"]],standalone:!0,features:[k],decls:1,vars:0,template:function(t,i){t&1&&p(0,`SCRUMBOARD -> BOARDS -> LIST -> CARD
`)},encapsulation:2,changeDetection:0});let n=r;return n})();var Xt=(n,r)=>{let a=Y(L),e=Y(pe);return a.getBoard(n.paramMap.get("boardId")).pipe(Fe(t=>{console.error(t);let i=r.url.split("/").slice(0,-1).join("/");return e.navigateByUrl(i),ce(t)}))},Yt=(n,r)=>{let a=Y(L),e=Y(pe);return a.getCard(n.paramMap.get("cardId")).pipe(Fe(t=>{console.error(t);let i=r.url.split("/").slice(0,-1).join("/");return e.navigateByUrl(i),ce(t)}))},wr=[{path:"",component:xt,resolve:{boards:()=>Y(L).getBoards()}},{path:":boardId",component:gt,resolve:{board:Xt},children:[{path:"card/:cardId",component:Ct,resolve:{card:Yt}}]}];export{wr as default};
