import{a as hi}from"./chunk-ABILAWDZ.js";import{a as fi}from"./chunk-GDNUC2DO.js";import{a as li,b as si,c as ci}from"./chunk-JWYE4QUG.js";import{a as mi,b as di,c as ui,d as pi}from"./chunk-VVQWPJ3X.js";import{a as Xt,d as Zt}from"./chunk-2KSCVQJP.js";import{a as Gt,b as Qt}from"./chunk-5N4IIOUD.js";import{a as Yt,b as Wt,c as Jt,d as Kt}from"./chunk-PKGH4TD3.js";import{a as Bt,c as Pt}from"./chunk-TFZKTK72.js";import"./chunk-OBMFXYQV.js";import{c as Ht}from"./chunk-W4IV6SAA.js";import{e as Ut}from"./chunk-YCUPTL4E.js";import{f as zt}from"./chunk-2WF3BAZE.js";import"./chunk-J44A7NQY.js";import{b as At}from"./chunk-K5KQA6TL.js";import"./chunk-6VFWJ4EV.js";import{a as ri,b as ai}from"./chunk-N7K7PRKT.js";import"./chunk-I56K5UOM.js";import{d as se,e as ce}from"./chunk-7FJFN7F7.js";import{a as De,d as $t,e as Te,i as re,j as ae}from"./chunk-E3OPEBBX.js";import"./chunk-YYH5TD5H.js";import{a as ei,b as Ve,c as ti,d as j,f as Re,g as Oe,l as qe,n as ii,o as je,p as ni,q as oi,r as Ne,v as Ae,w as ze,x as Be}from"./chunk-FD45J2AH.js";import{a as le,c as G,d as Le,e as q}from"./chunk-IDU54J7C.js";import{b as D,c as T}from"./chunk-FLSFYQN3.js";import{D as Ot,E as qt,K as jt,N as Nt}from"./chunk-4RUIE36X.js";import"./chunk-ILZLEP6A.js";import"./chunk-GOAOR4JZ.js";import"./chunk-BPAYJYXU.js";import{b as Rt,c as Ie,d as ge,e as Fe}from"./chunk-KU56Z7YF.js";import{c as Lt,i as Vt}from"./chunk-DT5IGS4I.js";import{d as it,h as ee,j as It,k as Ft,p as ke,s as Dt,y as Tt}from"./chunk-XQUWTDXC.js";import{$ as Xe,$b as Ee,Aa as gt,Ac as St,Ca as Ye,Cc as Et,E as Qe,Ea as we,Fa as g,Fb as Se,G as pe,Ga as he,Gb as h,Ha as A,I as U,Ib as X,Jb as R,Kb as O,Lb as l,M as dt,Ma as vt,Mb as s,Mc as kt,Nb as u,Rb as S,T as ut,W as H,X as w,Xb as b,Ya as xt,Z as N,Za as We,Zb as p,_a as Je,_b as yt,a as rt,aa as Me,bb as a,bc as Y,c as Ce,cb as x,cc as W,da as pt,dc as J,ec as ne,f as P,fa as fe,fc as d,g as V,ga as y,gc as K,hb as Ke,hc as M,jb as Ze,la as k,m as ie,n as $,na as ft,nb as _t,o as at,oc as Mt,pb as et,pc as I,q as lt,qb as Ct,qc as wt,r as ue,rc as Z,sc as tt,t as st,ua as ht,va as bt,w as ct,wa as _,x as mt,xa as C,xb as v,xc as oe,y as ye,zb as c,zc as be}from"./chunk-ABXAS3LN.js";import{h as Ge}from"./chunk-UGUGGRN7.js";var bi=["gray","red","orange","yellow","green","teal","blue","indigo","purple","pink"],me={gray:{text:"text-gray-500",bg:"bg-gray-500",combined:"text-gray-800 bg-gray-100"},red:{text:"text-red-500",bg:"bg-red-500",combined:"text-red-800 bg-red-100"},orange:{text:"text-orange-500",bg:"bg-orange-500",combined:"text-orange-800 bg-orange-100"},yellow:{text:"text-yellow-500",bg:"bg-yellow-500",combined:"text-yellow-800 bg-yellow-100"},green:{text:"text-green-500",bg:"bg-green-500",combined:"text-green-800 bg-green-100"},teal:{text:"text-teal-500",bg:"bg-teal-500",combined:"text-teal-800 bg-teal-100"},blue:{text:"text-blue-500",bg:"bg-blue-500",combined:"text-blue-800 bg-blue-100"},indigo:{text:"text-indigo-500",bg:"bg-indigo-500",combined:"text-indigo-800 bg-indigo-100"},purple:{text:"text-purple-500",bg:"bg-purple-500",combined:"text-purple-800 bg-purple-100"},pink:{text:"text-pink-500",bg:"bg-pink-500",combined:"text-pink-800 bg-pink-100"}};var F=(()=>{let o=class o{constructor(e){this._httpClient=e,this.selectedMailChanged=new V(null),this._category=new V(null),this._filters=new V(null),this._folders=new V(null),this._labels=new V(null),this._mails=new V(null),this._mailsLoading=new V(!1),this._mail=new V(null),this._pagination=new V(null)}get category$(){return this._category.asObservable()}get filters$(){return this._filters.asObservable()}get folders$(){return this._folders.asObservable()}get labels$(){return this._labels.asObservable()}get mails$(){return this._mails.asObservable()}get mailsLoading$(){return this._mailsLoading.asObservable()}get mail$(){return this._mail.asObservable()}get pagination$(){return this._pagination.asObservable()}getFilters(){return this._httpClient.get("api/apps/mailbox/filters").pipe(N(e=>{this._filters.next(e)}))}getFolders(){return this._httpClient.get("api/apps/mailbox/folders").pipe(N(e=>{this._folders.next(e)}))}getLabels(){return this._httpClient.get("api/apps/mailbox/labels").pipe(N(e=>{this._labels.next(e)}))}getMailsByFilter(e,t="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{filter:e,page:t}}).pipe(N(n=>{this._category.next({type:"filter",name:e}),this._mails.next(n.mails),this._pagination.next(n.pagination),this._mailsLoading.next(!1)}),H(n=>n.mails===null?$({message:"Requested page is not available!",pagination:n.pagination}):ie(n)))}getMailsByFolder(e,t="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{folder:e,page:t}}).pipe(N(n=>{this._category.next({type:"folder",name:e}),this._mails.next(n.mails),this._pagination.next(n.pagination),this._mailsLoading.next(!1)}),H(n=>n.mails===null?$({message:"Requested page is not available!",pagination:n.pagination}):ie(n)))}getMailsByLabel(e,t="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{label:e,page:t}}).pipe(N(n=>{this._category.next({type:"label",name:e}),this._mails.next(n.mails),this._pagination.next(n.pagination),this._mailsLoading.next(!1)}),H(n=>n.mails===null?$({message:"Requested page is not available!",pagination:n.pagination}):ie(n)))}getMailById(e){return this._mails.pipe(U(1),ue(t=>{let n=t.find(m=>m.id===e)||null;return this._mail.next(n),n}),H(t=>t?ie(t):$("Could not found mail with id of "+e+"!")))}updateMail(e,t){return this._httpClient.patch("api/apps/mailbox/mail",{id:e,mail:t}).pipe(N(()=>{this.getFolders().subscribe()}))}resetMail(){return ie(!0).pipe(U(1),N(()=>{this._mail.next(null)}))}addLabel(e){return this.labels$.pipe(U(1),H(t=>this._httpClient.post("api/apps/mailbox/label",{label:e}).pipe(ue(n=>(this._labels.next([...t,n]),n)))))}updateLabel(e,t){return this.labels$.pipe(U(1),H(n=>this._httpClient.patch("api/apps/mailbox/label",{id:e,label:t}).pipe(ue(m=>{let f=n.findIndex(E=>E.id===e);return n[f]=m,this._labels.next(n),m}))))}deleteLabel(e){return this.labels$.pipe(U(1),H(t=>this._httpClient.delete("api/apps/mailbox/label",{params:{id:e}}).pipe(ue(n=>{let m=t.findIndex(f=>f.id===e);return t.splice(m,1),this._labels.next(t),n}))))}};o.\u0275fac=function(t){return new(t||o)(fe(Lt))},o.\u0275prov=Me({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})();var Di=["infoDetailsPanelOrigin"],Ti=["infoDetailsPanel"],Li=()=>["./../"],Vi=i=>({"text-red-600 dark:text-red-500":i}),Ri=i=>({"text-orange-500 dark:text-red-400":i});function Oi(i,o){if(i&1){let r=S();l(0,"div",36),b("click",function(){let t=_(r).$implicit,n=p(2);return C(n.toggleLabel(t))}),l(1,"mat-checkbox",37),d(2),s()()}if(i&2){let r=o.$implicit,e=p(2);a(),c("color","primary")("checked",e.mail.labels.includes(r.id))("disableRipple",!0),a(),M(" ",r.title," ")}}function qi(i,o){if(i&1){let r=S();l(0,"button",38),b("click",function(){_(r);let t=p(2);return C(t.toggleUnread(!1))}),u(1,"mat-icon",10),l(2,"span"),d(3,"Mark as read"),s()()}i&2&&(a(),c("svgIcon","heroicons_outline:envelope-open"))}function ji(i,o){if(i&1){let r=S();l(0,"button",38),b("click",function(){_(r);let t=p(2);return C(t.toggleUnread(!0))}),u(1,"mat-icon",10),l(2,"span"),d(3,"Mark as unread"),s()()}i&2&&(a(),c("svgIcon","heroicons_outline:envelope"))}function Ni(i,o){if(i&1){let r=S();l(0,"button",38),b("click",function(){_(r);let t=p(2);return C(t.moveToFolder("spam"))}),u(1,"mat-icon",10),l(2,"span"),d(3,"Spam"),s()()}i&2&&(a(),c("svgIcon","heroicons_outline:exclamation-triangle"))}function Ai(i,o){if(i&1){let r=S();l(0,"button",38),b("click",function(){_(r);let t=p(2);return C(t.moveToFolder("inbox"))}),u(1,"mat-icon",10),l(2,"span"),d(3,"Not spam"),s()()}i&2&&(a(),c("svgIcon","heroicons_outline:exclamation-triangle"))}function zi(i,o){if(i&1){let r=S();l(0,"button",38),b("click",function(){_(r);let t=p(2);return C(t.moveToFolder("trash"))}),u(1,"mat-icon",10),l(2,"span"),d(3,"Delete"),s()()}i&2&&(a(),c("svgIcon","heroicons_outline:trash"))}function Bi(i,o){if(i&1&&(l(0,"div",39),d(1),s()),i&2){let r=o.$implicit,e=p(3);c("ngClass",e.labelColors[r.color].combined),a(),M(" ",r.title," ")}}function Pi(i,o){if(i&1&&(l(0,"div",19),R(1,Bi,2,2,"div",39,X),oe(3,"fuseFindByKey"),s()),i&2){let r=p(2);a(),O(St(3,0,r.mail.labels,"id",r.labels))}}function $i(i,o){i&1&&d(0,"other")}function Ui(i,o){i&1&&d(0,"others")}function Hi(i,o){if(i&1&&(l(0,"div")(1,"span",40),d(2,"and"),s(),l(3,"span",29),d(4),s(),l(5,"span",41),v(6,$i,1,0,"ng-template",42)(7,Ui,1,0,"ng-template",43),s()()),i&2){let r=p(2);a(4),K(r.mail.ccCount+r.mail.bccCount),a(),c("ngPlural",r.mail.ccCount+r.mail.bccCount)}}function Gi(i,o){if(i&1&&(l(0,"div",45)(1,"div",46),d(2," cc: "),s(),l(3,"div",47),d(4),s()()),i&2){let r=p(3);a(4),M(" ",r.mail.cc.join(`,
`)," ")}}function Qi(i,o){if(i&1&&(l(0,"div",45)(1,"div",46),d(2," bcc: "),s(),l(3,"div",47),d(4),s()()),i&2){let r=p(3);a(4),M(" ",r.mail.bcc.join(`,
`)," ")}}function Xi(i,o){if(i&1&&(l(0,"div",44)(1,"div",45)(2,"div",46),d(3," from: "),s(),l(4,"div",47),d(5),s()(),l(6,"div",45)(7,"div",46),d(8," to: "),s(),l(9,"div",47),d(10),s()(),v(11,Gi,5,1,"div",45)(12,Qi,5,1,"div",45),l(13,"div",45)(14,"div",46),d(15," date: "),s(),l(16,"div",47),d(17),oe(18,"date"),s()(),l(19,"div",45)(20,"div",46),d(21," subject: "),s(),l(22,"div",47),d(23),s()()()),i&2){let r=p(2);a(5),M(" ",r.mail.from.contact," "),a(5),M(" ",r.mail.to," "),a(),h(r.mail.cc?11:-1),a(),h(r.mail.bcc?12:-1),a(5),M(" ",be(18,6,r.mail.date,"EEEE, MMMM d, y - hh:mm a")," "),a(6),M(" ",r.mail.subject," ")}}function Yi(i,o){if(i&1&&u(0,"img",52),i&2){let r=p().$implicit;c("src","images/apps/mailbox/"+r.preview,Je)}}function Wi(i,o){if(i&1&&(l(0,"div",53)(1,"div",57),d(2),s()()),i&2){let r=p().$implicit;a(2),M(" ",r.type.split("/")[1].trim().toUpperCase()," ")}}function Ji(i,o){if(i&1&&(l(0,"div",51),v(1,Yi,1,1,"img",52)(2,Wi,3,1,"div",53),l(3,"div",54)(4,"div",55),d(5),s(),l(6,"div",56),d(7),oe(8,"number"),s()()()),i&2){let r=o.$implicit;a(),h(r.type.startsWith("image/")?1:-1),a(),h(r.type.startsWith("application/")?2:-1),a(2),c("title",r.name),a(),M(" ",r.name," "),a(),c("title",r.size),a(),M(" ",be(8,6,r.size/1e3,"1.0-2")," KB ")}}function Ki(i,o){if(i&1&&(l(0,"div",33)(1,"div",48),u(2,"mat-icon",31),l(3,"div",49),d(4),s()(),l(5,"div",50),R(6,Ji,9,9,"div",51,X),s()()),i&2){let r=p(2);a(2),c("svgIcon","heroicons_solid:paper-clip"),a(2),M(" ",r.mail.attachments.length," Attachments "),a(2),O(r.mail.attachments)}}function Zi(i,o){if(i&1){let r=S();l(0,"div",35)(1,"button",58),b("click",function(){_(r);let t=p(2);return C(t.reply())}),u(2,"mat-icon",31),l(3,"span",59),d(4,"Reply"),s()(),l(5,"button",58),b("click",function(){_(r);let t=p(2);return C(t.replyAll())}),u(6,"mat-icon",31),l(7,"span",59),d(8,"Reply All"),s()(),l(9,"button",58),b("click",function(){_(r);let t=p(2);return C(t.forward())}),u(10,"mat-icon",60),l(11,"span",59),d(12,"Forward"),s()()()}i&2&&(a(),c("color","primary"),a(),c("svgIcon","heroicons_solid:arrow-uturn-left"),a(3),c("color","primary"),a(),c("svgIcon","heroicons_solid:arrow-uturn-left"),a(3),c("color","primary"),a(),c("color","primary")("svgIcon","heroicons_solid:chevron-double-right"))}function en(i,o){if(i&1){let r=S();l(0,"div",33,4)(2,"mat-form-field",61),u(3,"textarea",62),s(),l(4,"div",63)(5,"div",64)(6,"button",65),u(7,"mat-icon",31),s(),l(8,"button",65),u(9,"mat-icon",31),s(),l(10,"button",65),u(11,"mat-icon",31),s(),l(12,"button",65),u(13,"mat-icon",31),s()(),l(14,"div",66)(15,"button",67),b("click",function(){_(r);let t=p(2);return C(t.discard())}),d(16," Discard "),s(),l(17,"button",68),b("click",function(){_(r);let t=p(2);return C(t.send())}),d(18," Send "),s()()()()}i&2&&(a(2),c("subscriptSizing","dynamic"),a(),c("placeholder","Type your reply here")("rows",4),a(4),c("svgIcon","heroicons_solid:paper-clip"),a(2),c("svgIcon","heroicons_solid:link"),a(2),c("svgIcon","heroicons_solid:face-smile"),a(2),c("svgIcon","heroicons_solid:photo"),a(4),c("color","primary"))}function tn(i,o){if(i&1){let r=S();l(0,"div",7)(1,"div",8)(2,"a",9),u(3,"mat-icon",10),s(),l(4,"button",11),u(5,"mat-icon",10),s(),l(6,"mat-menu",null,0),R(8,Oi,3,4,"div",12,Se().trackByFn,!0),s(),l(10,"button",13),b("click",function(){_(r);let t=p();return C(t.toggleImportant())}),u(11,"mat-icon",14),s(),l(12,"button",13),b("click",function(){_(r);let t=p();return C(t.toggleStar())}),u(13,"mat-icon",14),s(),l(14,"button",15),u(15,"mat-icon",10),s(),l(16,"mat-menu",null,1),v(18,qi,4,1,"button",16)(19,ji,4,1,"button",16)(20,Ni,4,1,"button",16)(21,Ai,4,1,"button",16)(22,zi,4,1,"button",16),s()(),l(23,"div",17)(24,"div",18),d(25),s(),v(26,Pi,4,4,"div",19),s()(),l(27,"div",20)(28,"div",21)(29,"div",22)(30,"div",23)(31,"div",24),u(32,"img",25),s(),l(33,"div",26)(34,"div",27),d(35),s(),l(36,"div",28)(37,"div"),d(38,"to"),s(),l(39,"div",29),d(40,"me"),s(),v(41,Hi,8,2,"div"),l(42,"button",30,2),b("click",function(){_(r);let t=p();return C(t.openInfoDetailsPanel())}),u(44,"mat-icon",31),s(),v(45,Xi,24,9,"ng-template",null,3,Et),s()()(),u(47,"div",32),v(48,Ki,8,2,"div",33),s(),l(49,"div",34),v(50,Zi,13,7,"div",35)(51,en,19,8,"div",33),s()()()}if(i&2){let r=ne(7),e=ne(17),t=p();a(2),c("routerLink",wt(25,Li)),a(),c("svgIcon","heroicons_outline:arrow-long-left"),a(),c("matMenuTriggerFor",r),a(),c("svgIcon","heroicons_outline:tag"),a(3),O(t.labels),a(3),c("ngClass",Z(26,Vi,t.mail.important))("svgIcon","heroicons_outline:exclamation-circle"),a(2),c("ngClass",Z(28,Ri,t.mail.starred))("svgIcon","heroicons_outline:star"),a(),c("matMenuTriggerFor",e),a(),c("svgIcon","heroicons_outline:ellipsis-vertical"),a(3),h(t.mail.unread?18:-1),a(),h(t.mail.unread?-1:19),a(),h(t.getCurrentFolder()!=="spam"&&t.getCurrentFolder()!=="drafts"?20:-1),a(),h(t.getCurrentFolder()==="spam"?21:-1),a(),h(t.getCurrentFolder()!=="trash"?22:-1),a(3),M(" ",t.mail.subject," "),a(),h(t.mail.labels&&t.mail.labels.length>0?26:-1),a(6),c("src",t.mail.from.avatar,Je),a(3),M(" ",t.mail.from.contact.split("<")[0].trim()," "),a(6),h(t.mail.ccCount+t.mail.bccCount>0?41:-1),a(3),c("svgIcon","heroicons_solid:chevron-down"),a(3),c("innerHTML",t.mail.content,We),a(),h(t.mail.attachments&&t.mail.attachments.length>0?48:-1),a(2),h(t.replyFormActive?-1:50),a(),h(t.replyFormActive?51:-1)}}function nn(i,o){i&1&&(l(0,"div",6),u(1,"mat-icon",69),l(2,"div",70),d(3," Select a mail to read "),s()()),i&2&&(a(),c("svgIcon","heroicons_outline:envelope"))}var xi=(()=>{let o=class o{constructor(e,t,n,m,f,E){this._activatedRoute=e,this._elementRef=t,this._mailboxService=n,this._overlay=m,this._router=f,this._viewContainerRef=E,this.replyFormActive=!1,this._unsubscribeAll=new P}ngOnInit(){this.labelColors=me,this._mailboxService.folders$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.folders=e}),this._mailboxService.labels$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.labels=e}),this._mailboxService.mail$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.mail=e}),this._mailboxService.selectedMailChanged.pipe(w(this._unsubscribeAll)).subscribe(()=>{this.replyFormActive=!1})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getCurrentFolder(){return this._activatedRoute.snapshot.paramMap.get("folder")}moveToFolder(e){let t=this.folders.find(n=>n.slug===e);this.mail.folder!==t.id&&(this.mail.folder=t.id,this._mailboxService.updateMail(this.mail.id,{folder:this.mail.folder}).subscribe(),this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent}))}toggleLabel(e){let t=!1;this.mail.labels.includes(e.id)?(t=!0,this.mail.labels.splice(this.mail.labels.indexOf(e.id),1)):this.mail.labels.push(e.id),this._mailboxService.updateMail(this.mail.id,{labels:this.mail.labels}).subscribe(),t&&this._activatedRoute.snapshot.paramMap.get("label")&&this._activatedRoute.snapshot.paramMap.get("label")===e.slug&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleImportant(){this.mail.important=!this.mail.important,this._mailboxService.updateMail(this.mail.id,{important:this.mail.important}).subscribe(),this.mail.important||this._activatedRoute.snapshot.paramMap.get("filter")&&this._activatedRoute.snapshot.paramMap.get("filter")==="important"&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleStar(){this.mail.starred=!this.mail.starred,this._mailboxService.updateMail(this.mail.id,{starred:this.mail.starred}).subscribe(),this.mail.starred||this._activatedRoute.snapshot.paramMap.get("filter")&&this._activatedRoute.snapshot.paramMap.get("filter")==="starred"&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleUnread(e){this.mail.unread=e,this._mailboxService.updateMail(this.mail.id,{unread:this.mail.unread}).subscribe()}reply(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}replyAll(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}forward(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}discard(){this.replyFormActive=!1}send(){this.replyFormActive=!1}openInfoDetailsPanel(){this._overlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._infoDetailsPanelOrigin._elementRef.nativeElement).withFlexibleDimensions(!0).withViewportMargin(16).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])});let e=new At(this._infoDetailsPanel,this._viewContainerRef);this._overlayRef.attach(e),this._overlayRef.backdropClick().subscribe(()=>{this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),e&&e.isAttached&&e.detach()})}trackByFn(e,t){return t.id||e}};o.\u0275fac=function(t){return new(t||o)(x(Rt),x(he),x(F),x(zt),x(ge),x(_t))},o.\u0275cmp=k({type:o,selectors:[["mailbox-details"]],viewQuery:function(t,n){if(t&1&&(Y(Di,5),Y(Ti,5)),t&2){let m;W(m=J())&&(n._infoDetailsPanelOrigin=m.first),W(m=J())&&(n._infoDetailsPanel=m.first)}},standalone:!0,features:[I],decls:3,vars:1,consts:[["toggleLabelMenu","matMenu"],["mailMenu","matMenu"],["infoDetailsPanelOrigin",""],["infoDetailsPanel",""],["replyForm",""],[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"relative","z-10","flex","w-full","flex-0","flex-col","border-b"],[1,"flex","min-h-16","items-center","border-b","bg-gray-50","px-4","dark:bg-transparent","md:px-6"],["mat-icon-button","",1,"md:-ml-2","lg:hidden",3,"routerLink"],[3,"svgIcon"],["mat-icon-button","",1,"ml-auto",3,"matMenuTriggerFor"],["mat-menu-item","","matRipple",""],["mat-icon-button","",1,"ml-2",3,"click"],[3,"ngClass","svgIcon"],["mat-icon-button","",1,"ml-2",3,"matMenuTriggerFor"],["mat-menu-item",""],[1,"flex","flex-wrap","items-center","px-6","py-5"],[1,"my-1","mr-4","flex","flex-auto","text-2xl"],[1,"-mx-1","flex","flex-wrap","items-center","justify-start"],["fuseScrollReset","",1,"flex","flex-auto","shrink-0","flex-col","bg-gray-100","p-3","dark:bg-transparent","lg:shrink","lg:overflow-y-auto"],[1,"bg-card","flex","w-full","flex-0","flex-col","overflow-hidden","rounded-2xl","shadow","dark:bg-black","dark:bg-opacity-10"],[1,"flex","flex-col","px-6","py-8"],[1,"flex","w-full","items-center"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["alt","User avatar",1,"h-full","w-full",3,"src"],[1,"ml-4","min-w-0"],[1,"truncate","font-semibold"],[1,"mt-0.5","flex","items-center","leading-5"],[1,"ml-1","font-semibold"],["mat-icon-button","",1,"ml-1","h-5","min-h-5","w-5",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-8","flex","whitespace-pre-line","leading-relaxed",3,"innerHTML"],[1,"flex","w-full","flex-col"],[1,"flex","w-full","border-t","bg-gray-50","p-6","dark:bg-transparent"],[1,"-m-2","flex","w-full","flex-wrap"],["mat-menu-item","","matRipple","",3,"click"],[1,"pointer-events-none",3,"color","checked","disableRipple"],["mat-menu-item","",3,"click"],[1,"m-1","whitespace-nowrap","rounded-full","px-2.5","py-0.5","text-sm","font-medium",3,"ngClass"],[1,"ml-1"],[1,"ml-1","font-semibold",3,"ngPlural"],["ngPluralCase","=1"],["ngPluralCase","other"],[1,"bg-card","flex","w-full","max-w-160","flex-col","space-y-1.5","overflow-auto","rounded","border","px-6","py-4","text-md","shadow-md"],[1,"flex"],[1,"min-w-14","text-right","font-medium"],[1,"whitespace-pre-wrap","pl-2"],[1,"mt-12","flex","items-center"],[1,"ml-2","font-semibold"],[1,"-m-3","mt-3","flex","flex-wrap"],[1,"m-3","flex","items-center"],[1,"h-10","w-10","overflow-hidden","rounded-md",3,"src"],[1,"flex","h-10","w-10","items-center","justify-center","overflow-hidden","rounded-md","bg-primary-100"],[1,"ml-3"],[1,"truncate","text-md","font-medium",3,"title"],[1,"text-secondary","truncate","text-sm","font-medium",3,"title"],[1,"text-primary-500-800","flex","items-center","justify-center","text-sm","font-semibold"],["mat-stroked-button","",1,"m-2",3,"click","color"],[1,"ml-2"],[1,"icon-size-5",3,"color","svgIcon"],[3,"subscriptSizing"],["matInput","",1,"textarea",3,"placeholder","rows"],[1,"mt-4","flex","flex-col","justify-between","sm:mt-6","sm:flex-row","sm:items-center"],[1,"-ml-2"],["mat-icon-button",""],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"order-last","ml-3","sm:order-first","sm:ml-0",3,"click"],["mat-flat-button","",1,"sm:ml-3",3,"click","color"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(t,n){t&1&&(l(0,"div",5),v(1,tn,52,30)(2,nn,4,1,"div",6),s()),t&2&&(a(),h(n.mail?1:2))},dependencies:[q,le,Le,G,Fe,T,D,Kt,Wt,Yt,Jt,qt,Ot,ai,ri,ee,hi,It,Ft,ae,re,ce,se,fi,Dt,ke],encapsulation:2});let i=o;return i})();var _i=(()=>{let o=class o{constructor(){}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=k({type:o,selectors:[["mailbox-empty-details"]],standalone:!0,features:[I],decls:5,vars:1,consts:[[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1),u(2,"mat-icon",2),l(3,"div",3),d(4," Select a mail to read "),s()()()),t&2&&(a(2),c("svgIcon","heroicons_outline:envelope"))},dependencies:[T,D],encapsulation:2});let i=o;return i})();var Ue={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},Ci=new pt("config",{providedIn:"root",factory:()=>({modules:Ue})});function nt(i){i||(ht(nt),i=y(we));let o=new Ce(r=>i.onDestroy(r.next.bind(r)));return r=>r.pipe(w(o))}var on=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],rn=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function an(i,o){i&1&&u(0,"div",0)}function ln(i,o){i&1&&u(0,"div",0)}var He=(i,o)=>i||o||"html",sn=()=>new Ce(i=>{let o=requestAnimationFrame(()=>{i.next(),i.complete()});return()=>cancelAnimationFrame(o)}),cn=(()=>{let o=class o{constructor(e,t){this.config=t,this.quill$=ct(()=>Ge(this,null,function*(){if(!this.Quill){let n=this.document.addEventListener;this.document.addEventListener=this.document.__zone_symbol__addEventListener||this.document.addEventListener;let m=yield import("./chunk-6WZZUMOP.js");this.document.addEventListener=n,this.Quill=m.default?.default??m.default??m}return this.config.customOptions?.forEach(n=>{let m=this.Quill.import(n.import);m.whitelist=n.whitelist,this.Quill.register(m,!0,this.config.suppressGlobalRegisterWarning)}),yield this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning)})).pipe(ut({bufferSize:1,refCount:!0})),this.document=e.get(it),this.config||(this.config={modules:Ue})}getQuill(){return this.quill$}registerCustomModules(e,t,n){return Ge(this,null,function*(){if(Array.isArray(t))for(let{implementation:m,path:f}of t)at(m)&&(m=yield lt(m)),e.register(f,m,n);return e})}};o.\u0275fac=function(t){return new(t||o)(fe(Ye),fe(Ci,8))},o.\u0275prov=Me({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})(),mn=(()=>{let o=class o{constructor(){this.format=g(void 0),this.theme=g(void 0),this.modules=g(void 0),this.debug=g(!1),this.readOnly=g(!1),this.placeholder=g(void 0),this.maxLength=g(void 0),this.minLength=g(void 0),this.required=g(!1),this.formats=g(void 0),this.customToolbarPosition=g("top"),this.sanitize=g(!1),this.beforeRender=g(void 0),this.styles=g(null),this.registry=g(void 0),this.bounds=g(void 0),this.customOptions=g([]),this.customModules=g([]),this.trackChanges=g(void 0),this.classes=g(void 0),this.trimOnValidation=g(!1),this.linkPlaceholder=g(void 0),this.compareValues=g(!1),this.filterNull=g(!1),this.debounceTime=g(void 0),this.defaultEmptyValue=g(null),this.onEditorCreated=new A,this.onEditorChanged=new A,this.onContentChanged=new A,this.onSelectionChanged=new A,this.onFocus=new A,this.onBlur=new A,this.onNativeFocus=new A,this.onNativeBlur=new A,this.disabled=!1,this.toolbarPosition=et("top"),this.subscription=null,this.quillSubscription=null,this.elementRef=y(he),this.document=y(it),this.cd=y(kt),this.domSanitizer=y(Vt),this.platformId=y(vt),this.renderer=y(Ke),this.zone=y(Ze),this.service=y(cn),this.destroyRef=y(we),this.valueGetter=g(e=>{let t=e.getSemanticHTML();this.isEmptyValue(t)&&(t=this.defaultEmptyValue());let n=t,m=He(this.format(),this.service.config.format);if(m==="text")n=e.getText();else if(m==="object")n=e.getContents();else if(m==="json")try{n=JSON.stringify(e.getContents())}catch{n=e.getText()}return n}),this.valueSetter=g((e,t)=>{let n=He(this.format(),this.service.config.format);if(n==="html")return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(t=this.domSanitizer.sanitize(xt.HTML,t)),e.clipboard.convert({html:t});if(n==="json")try{return JSON.parse(t)}catch{return[{insert:t}]}return t}),this.selectionChangeHandler=(e,t,n)=>{let m=this.trackChanges()||this.service.config.trackChanges,f=!e&&!!this.onModelTouched&&(n==="user"||m&&m==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!f||this.zone.run(()=>{e===null?this.onBlur.emit({editor:this.quillEditor,source:n}):t===null&&this.onFocus.emit({editor:this.quillEditor,source:n}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:e,source:n}),f&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,t,n)=>{let m=this.quillEditor.getText(),f=this.quillEditor.getContents(),E=this.quillEditor.getSemanticHTML();this.isEmptyValue(E)&&(E=this.defaultEmptyValue());let L=this.trackChanges()||this.service.config.trackChanges,te=(n==="user"||L&&L==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!te||this.zone.run(()=>{if(te){let xe=this.valueGetter();this.onModelChange(xe(this.quillEditor))}this.onContentChanged.emit({content:f,delta:e,editor:this.quillEditor,html:E,oldDelta:t,source:n,text:m}),this.cd.markForCheck()})},this.editorChangeHandler=(e,t,n,m)=>{if(this.onEditorChanged.observed)if(e==="text-change"){let f=this.quillEditor.getText(),E=this.quillEditor.getContents(),L=this.quillEditor.getSemanticHTML();this.isEmptyValue(L)&&(L=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:E,delta:t,editor:this.quillEditor,event:e,html:L,oldDelta:n,source:m,text:f}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:n,range:t,source:m}),this.cd.markForCheck()})}}static normalizeClassNames(e){return e.trim().split(" ").reduce((n,m)=>{let f=m.trim();return f&&n.push(f),n},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){Tt(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(st(e=>{let t=[this.service.registerCustomModules(e,this.customModules())],n=this.beforeRender()??this.service.config.beforeRender;return n&&t.push(n()),Promise.all(t).then(()=>e)})).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=Object.assign({},this.modules()||this.service.config.modules);t?n.toolbar=t:n.toolbar===void 0&&(n.toolbar=Ue.toolbar);let m=this.placeholder()!==void 0?this.placeholder():this.service.config.placeholder;m===void 0&&(m="Insert text here ...");let f=this.styles();f&&Object.keys(f).forEach(z=>{this.renderer.setStyle(this.editorElem,z,f[z])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(z=>{let B=e.import(z.import);B.whitelist=z.whitelist,e.register(B,!0)});let E=this.bounds()&&this.bounds()==="self"?this.editorElem:this.bounds();E||(E=this.service.config.bounds?this.service.config.bounds:this.document.body);let L=this.debug();!L&&L!==!1&&this.service.config.debug&&(L=this.service.config.debug);let te=this.readOnly();!te&&this.readOnly()!==!1&&(te=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let xe=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(xe=this.service.config.defaultEmptyValue);let _e=this.formats();if(!_e&&_e===void 0&&(_e=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:E,debug:L,formats:_e,modules:n,placeholder:m,readOnly:te,defaultEmptyValue:xe,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed&&(this.quillEditor.scroll.domNode.addEventListener("blur",()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"})),this.quillEditor.getModule("toolbar").container?.addEventListener("mousedown",B=>B.preventDefault())),this.onNativeFocus.observed&&this.quillEditor.scroll.domNode.addEventListener("focus",()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){let B=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");B?.dataset&&(B.dataset.link=this.linkPlaceholder())}}),this.content){if(He(this.format(),this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let Ii=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(Ii,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&sn().pipe(nt(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=e.defaultEmptyValue.currentValue),e.styles){let t=e.styles.currentValue,n=e.styles.previousValue;n&&Object.keys(n).forEach(m=>{this.renderer.removeStyle(this.editorElem,m)}),t&&Object.keys(t).forEach(m=>{this.renderer.setStyle(this.editorElem,m,this.styles()[m])})}if(e.classes){let t=e.classes.currentValue,n=e.classes.previousValue;n&&this.removeClasses(n),t&&this.addClasses(t)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){o.normalizeClassNames(e).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(e){o.normalizeClassNames(e).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(e){if(this.filterNull()&&e===null||(this.content=e,!this.quillEditor))return;let t=He(this.format(),this.service.config.format),m=this.valueSetter()(this.quillEditor,e);if(this.compareValues()){let f=this.quillEditor.getContents();if(JSON.stringify(f)===JSON.stringify(m))return}if(e){t==="text"?this.quillEditor.setText(e):this.quillEditor.setContents(m);return}this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;let e={},t=!0,n=this.quillEditor.getText(),m=this.trimOnValidation()?n.trim().length:n.length===1&&n.trim().length===0?0:n.length-1,f=this.quillEditor.getContents().ops,E=!!f&&f.length===1&&[`
`,""].includes(f[0].insert?.toString());return this.minLength()&&m&&m<this.minLength()&&(e.minLengthError={given:m,minLength:this.minLength()},t=!1),this.maxLength()&&m>this.maxLength()&&(e.maxLengthError={given:m,maxLength:this.maxLength()},t=!1),this.required()&&!m&&E&&(e.requiredError={empty:!0},t=!1),t?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new rt,this.subscription.add(ye(this.quillEditor,"selection-change").subscribe(([n,m,f])=>{this.selectionChangeHandler(n,m,f)}));let e=ye(this.quillEditor,"text-change"),t=ye(this.quillEditor,"editor-change");typeof this.debounceTime()=="number"&&(e=e.pipe(pe(this.debounceTime())),t=t.pipe(pe(this.debounceTime()))),this.subscription.add(e.subscribe(([n,m,f])=>{this.textChangeHandler(n,m,f)})),this.subscription.add(t.subscribe(([n,m,f,E])=>{this.editorChangeHandler(n,m,f,E)}))})}dispose(){this.subscription!==null&&(this.subscription.unsubscribe(),this.subscription=null)}isEmptyValue(e){return e==="<p></p>"||e==="<div></div>"||e==="<p><br></p>"||e==="<div><br></div>"}};o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=ft({type:o,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[bt]});let i=o;return i})(),yi=(()=>{let o=class o extends mn{};o.\u0275fac=(()=>{let e;return function(n){return(e||(e=gt(o)))(n||o)}})(),o.\u0275cmp=k({type:o,selectors:[["quill-editor"]],standalone:!0,features:[Mt([{multi:!0,provide:ei,useExisting:Xe(()=>o)},{multi:!0,provide:ti,useExisting:Xe(()=>o)}]),Ct,I],ngContentSelectors:rn,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(t,n){t&1&&(yt(on),v(0,an,1,0,"div",0),Ee(1),Ee(2,1),Ee(3,2),v(4,ln,1,0,"div",0)),t&2&&(h(n.toolbarPosition()!=="top"?0:-1),a(4),h(n.toolbarPosition()==="top"?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]});let i=o;return i})();function pn(i,o){if(i&1){let r=S();l(0,"span",19),b("click",function(){_(r);let t=p();return C(t.showCopyField("cc"))}),d(1," Cc "),s()}}function fn(i,o){if(i&1){let r=S();l(0,"span",20),b("click",function(){_(r);let t=p();return C(t.showCopyField("bcc"))}),d(1," Bcc "),s()}}function hn(i,o){i&1&&(l(0,"mat-form-field")(1,"mat-label"),d(2,"Cc"),s(),u(3,"input",6),s()),i&2&&(a(3),c("formControlName","cc"))}function bn(i,o){i&1&&(l(0,"mat-form-field")(1,"mat-label"),d(2,"Bcc"),s(),u(3,"input",6),s()),i&2&&(a(3),c("formControlName","bcc"))}var Mi=(()=>{let o=class o{constructor(e,t){this.matDialogRef=e,this._formBuilder=t,this.copyFields={cc:!1,bcc:!1},this.quillModules={toolbar:[["bold","italic","underline"],[{align:[]},{list:"ordered"},{list:"bullet"}],["clean"]]}}ngOnInit(){this.composeForm=this._formBuilder.group({to:["",[j.required,j.email]],cc:["",[j.email]],bcc:["",[j.email]],subject:[""],body:["",[j.required]]})}showCopyField(e){e!=="cc"&&e!=="bcc"||(this.copyFields[e]=!0)}saveAndClose(){this.saveAsDraft(),this.matDialogRef.close()}discard(){}saveAsDraft(){}send(){}};o.\u0275fac=function(t){return new(t||o)(x(Bt),x(Ae))},o.\u0275cmp=k({type:o,selectors:[["mailbox-compose"]],standalone:!0,features:[I],decls:39,vars:17,consts:[[1,"-m-6","flex","max-h-screen","max-w-240","flex-col","md:min-w-160"],[1,"flex","h-16","flex-0","items-center","justify-between","bg-primary","pl-6","pr-3","text-on-primary","sm:pl-8","sm:pr-5"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"click","tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-auto","flex-col","overflow-y-auto","p-6","sm:p-8",3,"formGroup"],["matInput","",3,"formControlName"],["matSuffix","",1,"copy-fields-toggles"],[1,"cursor-pointer","select-none","text-sm","font-medium","hover:underline"],[1,"ml-2","cursor-pointer","select-none","text-sm","font-medium","hover:underline"],[1,"mt-2",3,"formControlName","bounds","modules"],[1,"mt-4","flex","flex-col","justify-between","sm:mt-6","sm:flex-row","sm:items-center"],[1,"-ml-2"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-stroked-button","",1,"ml-auto","sm:ml-0",3,"click"],["mat-stroked-button","",1,"sm:mx-3",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"click","color"],[1,"cursor-pointer","select-none","text-sm","font-medium","hover:underline",3,"click"],[1,"ml-2","cursor-pointer","select-none","text-sm","font-medium","hover:underline",3,"click"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),d(3,"New Message"),s(),l(4,"button",3),b("click",function(){return n.saveAndClose()}),u(5,"mat-icon",4),s()(),l(6,"form",5)(7,"mat-form-field")(8,"mat-label"),d(9,"To"),s(),u(10,"input",6),l(11,"div",7),v(12,pn,2,0,"span",8)(13,fn,2,0,"span",9),s()(),v(14,hn,4,1,"mat-form-field")(15,bn,4,1,"mat-form-field"),l(16,"mat-form-field")(17,"mat-label"),d(18,"Subject"),s(),u(19,"input",6),s(),u(20,"quill-editor",10),l(21,"div",11)(22,"div",12)(23,"button",13),u(24,"mat-icon",14),s(),l(25,"button",13),u(26,"mat-icon",14),s(),l(27,"button",13),u(28,"mat-icon",14),s(),l(29,"button",13),u(30,"mat-icon",14),s()(),l(31,"div",15)(32,"button",16),b("click",function(){return n.discard()}),d(33," Discard "),s(),l(34,"button",17),b("click",function(){return n.saveAsDraft()}),l(35,"span"),d(36,"Save as draft"),s()(),l(37,"button",18),b("click",function(){return n.send()}),d(38," Send "),s()()()()()),t&2&&(a(4),c("tabIndex",-1),a(),c("svgIcon","heroicons_outline:x-mark"),a(),c("formGroup",n.composeForm),a(4),c("formControlName","to"),a(2),h(n.copyFields.cc?-1:12),a(),h(n.copyFields.bcc?-1:13),a(),h(n.copyFields.cc?14:-1),a(),h(n.copyFields.bcc?15:-1),a(4),c("formControlName","subject"),a(),c("formControlName","body")("bounds","self")("modules",n.quillModules),a(4),c("svgIcon","heroicons_solid:paper-clip"),a(2),c("svgIcon","heroicons_solid:link"),a(2),c("svgIcon","heroicons_solid:face-smile"),a(2),c("svgIcon","heroicons_solid:photo"),a(7),c("color","primary"))},dependencies:[q,le,G,T,D,ze,qe,Ve,Re,Oe,Be,je,Ne,ae,re,De,Te,ce,se,yi],encapsulation:2});let i=o;return i})();var wi=(()=>{let o=class o{constructor(e,t,n){this._mailboxService=e,this._matDialog=t,this._fuseNavigationService=n,this.menuData=[],this._filtersMenuData=[],this._foldersMenuData=[],this._labelsMenuData=[],this._otherMenuData=[],this._unsubscribeAll=new P}ngOnInit(){this._mailboxService.filters$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.filters=e,this._generateFiltersMenuLinks()}),this._mailboxService.folders$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.folders=e,this._generateFoldersMenuLinks(),this._updateNavigationBadge(e)}),this._mailboxService.labels$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.labels=e,this._generateLabelsMenuLinks()}),this._generateOtherMenuLinks()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}openComposeDialog(){this._matDialog.open(Mi).afterClosed().subscribe(t=>{console.log("Compose dialog was closed!")})}_generateFoldersMenuLinks(){this._foldersMenuData=[],this.folders.forEach(e=>{let t={id:e.id,title:e.title,type:"basic",icon:e.icon,link:"/apps/mailbox/"+e.slug};e.count&&e.count>0&&(t.badge={title:e.count+""}),this._foldersMenuData.push(t)}),this._updateMenuData()}_generateFiltersMenuLinks(){this._filtersMenuData=[],this.filters.forEach(e=>{this._filtersMenuData.push({id:e.id,title:e.title,type:"basic",icon:e.icon,link:"/apps/mailbox/filter/"+e.slug})}),this._updateMenuData()}_generateLabelsMenuLinks(){this._labelsMenuData=[],this.labels.forEach(e=>{this._labelsMenuData.push({id:e.id,title:e.title,type:"basic",icon:"heroicons_outline:tag",classes:{icon:me[e.color].text},link:"/apps/mailbox/label/"+e.slug})}),this._updateMenuData()}_generateOtherMenuLinks(){this._otherMenuData.push({title:"Settings",type:"basic",icon:"heroicons_outline:cog-8-tooth",link:"/apps/mailbox/settings"}),this._updateMenuData()}_updateMenuData(){this.menuData=[{title:"MAILBOXES",type:"group",children:[...this._foldersMenuData]},{title:"FILTERS",type:"group",children:[...this._filtersMenuData]},{title:"LABELS",type:"group",children:[...this._labelsMenuData]},{type:"spacer"},...this._otherMenuData]}_updateNavigationBadge(e){let t=this.folders.find(m=>m.slug==="inbox"),n=this._fuseNavigationService.getComponent("mainNavigation");if(n){let m=n.navigation,f=this._fuseNavigationService.getItem("apps.mailbox",m);f.badge.title=t.count+"",n.refresh()}}};o.\u0275fac=function(t){return new(t||o)(x(F),x(Pt),x(Xt))},o.\u0275cmp=k({type:o,selectors:[["mailbox-sidebar"]],standalone:!0,features:[I],decls:8,vars:6,consts:[[1,"flex","w-full","flex-auto","flex-col"],[1,"mx-6","mb-8","mt-10","text-4xl","font-extrabold","leading-none","tracking-tight"],["mat-flat-button","",1,"mx-6",3,"click","color"],[3,"svgIcon"],[1,"ml-2"],[3,"navigation","inner","mode","opened"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1),d(2," Mailbox "),s(),l(3,"button",2),b("click",function(){return n.openComposeDialog()}),u(4,"mat-icon",3),l(5,"span",4),d(6,"Compose"),s()(),u(7,"fuse-vertical-navigation",5),s()),t&2&&(a(3),c("color","primary"),a(),c("svgIcon","heroicons_outline:plus"),a(3),c("navigation",n.menuData)("inner",!0)("mode","side")("opened",!0))},dependencies:[q,le,T,D,Zt],styles:[`mailbox-sidebar fuse-vertical-navigation .fuse-vertical-navigation-wrapper{box-shadow:none!important}
`],encapsulation:2});let i=o;return i})();var gn=["drawer"],de=(()=>{let o=class o{constructor(e){this._fuseMediaWatcherService=e,this.drawerMode="side",this.drawerOpened=!0,this._unsubscribeAll=new P}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe(w(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("md")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}};o.\u0275fac=function(t){return new(t||o)(x(Ht))},o.\u0275cmp=k({type:o,selectors:[["mailbox"]],viewQuery:function(t,n){if(t&1&&Y(gn,5),t&2){let m;W(m=J())&&(n.drawer=m.first)}},standalone:!0,features:[I],decls:8,vars:2,consts:[["drawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"mode","opened"],[1,"flex","flex-col","overflow-hidden"],[1,"flex","flex-auto","overflow-hidden"]],template:function(t,n){t&1&&(l(0,"div",1)(1,"mat-drawer-container",2)(2,"mat-drawer",3,0),u(4,"mailbox-sidebar"),s(),l(5,"mat-drawer-content",4)(6,"div",5),u(7,"router-outlet"),s()()()()),t&2&&(a(2),c("mode",n.drawerMode)("opened",n.drawerOpened))},dependencies:[pi,di,ui,mi,wi,Ie],encapsulation:2});let i=o;return i})();var vn=["mailList"],ot=i=>[i],xn=(i,o)=>({"border-primary":i,"bg-primary-50 dark:bg-black dark:bg-opacity-5":o}),_n=(i,o)=>({"absolute inset-0 z-20 flex lg:static lg:inset-auto":i,"hidden lg:flex":o});function Cn(i,o){i&1&&u(0,"mat-progress-bar",14),i&2&&c("mode","indeterminate")}function yn(i,o){i&1&&u(0,"mat-icon",21),i&2&&c("svgIcon","heroicons_solid:exclamation-circle")}function Mn(i,o){i&1&&u(0,"mat-icon",27),i&2&&c("svgIcon","heroicons_solid:paper-clip")}function wn(i,o){i&1&&u(0,"mat-icon",28),i&2&&c("svgIcon","heroicons_solid:star")}function Sn(i,o){if(i&1&&(l(0,"div",25),v(1,Mn,1,1,"mat-icon",27)(2,wn,1,1,"mat-icon",28),s()),i&2){let r=p().$implicit;a(),h(r.attachments&&r.attachments.length>0?1:-1),a(),h(r.starred?2:-1)}}function En(i,o){if(i&1){let r=S();l(0,"a",17),b("click",function(){let t=_(r).$implicit,n=p(2);return C(n.onMailSelected(t))}),l(1,"div",18)(2,"div",19)(3,"div",20),d(4),s(),v(5,yn,1,1,"mat-icon",21),l(6,"div",22),d(7),oe(8,"date"),s()(),l(9,"div",23)(10,"span",24),d(11),s(),v(12,Sn,3,2,"div",25),s(),l(13,"div",26),d(14),s()()()}if(i&2){let r=o.$implicit,e=p(2);c("routerLink",Z(11,ot,r.id)),a(),c("ngClass",tt(13,xn,r.unread,e.selectedMail&&e.selectedMail.id===r.id)),a(3),M(" ",r.from.contact.split("<")[0].trim()," "),a(),h(r.important?5:-1),a(2),M(" ",be(8,8,r.date,"LLL dd")," "),a(4),K(r.subject),a(),h(r.attachments&&r.attachments.length>0||r.starred?12:-1),a(2),M(" ",r.content,"... ")}}function kn(i,o){if(i&1){let r=S();l(0,"div",2)(1,"div",5)(2,"div",6)(3,"button",7),b("click",function(){_(r);let t=p();return C(t.mailboxComponent.drawer.toggle())}),u(4,"mat-icon",8),s(),l(5,"div",9),d(6),s()(),l(7,"div",6)(8,"div",10)(9,"span"),d(10),s(),l(11,"span",11),d(12,"-"),s(),l(13,"span"),d(14),s(),l(15,"span",11),d(16,"of"),s(),l(17,"span"),d(18),s()(),l(19,"a",12),u(20,"mat-icon",13),s(),l(21,"a",12),u(22,"mat-icon",13),s()(),v(23,Cn,1,1,"mat-progress-bar",14),s(),l(24,"div",15,0),R(26,En,15,16,"a",16,Se().trackByFn,!0),s()()}if(i&2){let r=p();a(4),c("svgIcon","heroicons_outline:bars-3"),a(2),M(" ",r.category.name," "),a(4),K(r.pagination.startIndex+1),a(4),K(r.pagination.endIndex+1),a(4),K(r.pagination.totalResults),a(),c("disabled",r.pagination.currentPage===1)("routerLink",Z(12,ot,"../"+(r.pagination.currentPage>1?r.pagination.currentPage-1:1))),a(),c("svgIcon","heroicons_solid:chevron-left"),a(),c("disabled",r.pagination.currentPage===r.pagination.lastPage)("routerLink",Z(14,ot,"../"+(r.pagination.currentPage<r.pagination.lastPage?r.pagination.currentPage+1:r.pagination.lastPage))),a(),c("svgIcon","heroicons_solid:chevron-right"),a(),h(r.mailsLoading?23:-1),a(3),O(r.mails)}}function In(i,o){i&1&&(l(0,"div",3),u(1,"mat-icon",29),l(2,"div",30),d(3," There are no e-mails "),s()()),i&2&&(a(),c("svgIcon","heroicons_outline:envelope"))}function Fn(i,o){if(i&1&&(l(0,"div",4),u(1,"router-outlet"),s()),i&2){let r=p();c("ngClass",tt(1,_n,r.selectedMail&&r.selectedMail.id,!r.selectedMail||!r.selectedMail.id))}}var Ei=(()=>{let o=class o{constructor(e,t){this.mailboxComponent=e,this._mailboxService=t,this.mailsLoading=!1,this._unsubscribeAll=new P}ngOnInit(){this._mailboxService.category$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.category=e}),this._mailboxService.mails$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.mails=e}),this._mailboxService.mailsLoading$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.mailsLoading=e,this.mailList&&!e&&this.mailList.nativeElement.scrollTo(0,0)}),this._mailboxService.pagination$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.pagination=e}),this._mailboxService.mail$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.selectedMail=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onMailSelected(e){e.unread&&(e.unread=!1,this._mailboxService.updateMail(e.id,{unread:!1}).subscribe()),this._mailboxService.selectedMailChanged.next(e)}trackByFn(e,t){return t.id||e}};o.\u0275fac=function(t){return new(t||o)(x(de),x(F))},o.\u0275cmp=k({type:o,selectors:[["mailbox-list"]],viewQuery:function(t,n){if(t&1&&Y(vn,5),t&2){let m;W(m=J())&&(n.mailList=m.first)}},standalone:!0,features:[I],decls:4,vars:2,consts:[["mailList",""],[1,"bg-card","relative","flex","w-full","flex-auto","dark:bg-transparent"],[1,"relative","z-10","flex","w-full","min-w-0","flex-auto","flex-col","border-r","lg:min-w-90","lg:max-w-90"],[1,"z-100","absolute","inset-0","flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"flex-auto",3,"ngClass"],[1,"relative","flex","h-16","flex-0","items-center","justify-between","border-b","bg-gray-50","px-4","dark:bg-transparent"],[1,"flex","items-center"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"ml-2","font-semibold","uppercase"],[1,"mr-3","flex","items-center","text-md","font-medium"],[1,"text-secondary","mx-1"],["mat-icon-button","",1,"h-8","min-h-8","w-8",3,"disabled","routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"absolute","inset-x-0","bottom-0","h-0.5",3,"mode"],[1,"overflow-y-auto"],[1,"relative","flex","border-t","hover:bg-hover","first:border-0",3,"routerLink"],[1,"relative","flex","border-t","hover:bg-hover","first:border-0",3,"click","routerLink"],[1,"flex","w-full","flex-col","items-start","justify-start","border-l-4","border-transparent","py-6","pl-5","pr-4",3,"ngClass"],[1,"flex","w-full","items-center"],[1,"mr-2","truncate","font-semibold"],[1,"mr-3","text-red-500","icon-size-4","dark:text-red-600",3,"svgIcon"],[1,"text-hint","ml-auto","whitespace-nowrap","text-right","text-md"],[1,"mt-1","flex","w-full","items-center"],[1,"truncate","leading-4"],[1,"ml-auto","flex","pl-2"],[1,"text-secondary","mt-2","line-clamp-2","leading-normal"],[1,"flex","justify-center","icon-size-4",3,"svgIcon"],[1,"ml-1","flex","justify-center","text-orange-500","icon-size-4","dark:text-orange-400",3,"svgIcon"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(t,n){t&1&&(l(0,"div",1),v(1,kn,28,16,"div",2)(2,In,4,1,"div",3)(3,Fn,2,4,"div",4),s()),t&2&&(a(),h(n.mails&&n.mails.length>0?1:2),a(2),h(n.mails&&n.mails.length>0?3:-1))},dependencies:[q,Le,G,T,D,Fe,Qt,Gt,ee,Ie,ke],encapsulation:2});let i=o;return i})();function Dn(i,o){i&1&&u(0,"mat-icon",21),i&2&&c("svgIcon","heroicons_outline:check")}function Tn(i,o){if(i&1&&(l(0,"mat-option",17,0),v(2,Dn,1,1,"mat-icon",21),u(3,"span",22),s()),i&2){let r=o.$implicit,e=ne(1),t=p();c("value",r),a(2),h(e.selected?2:-1),a(),c("ngClass",t.labelColorDefs[r].bg)}}function Ln(i,o){i&1&&u(0,"mat-icon",21),i&2&&c("svgIcon","heroicons_outline:check")}function Vn(i,o){if(i&1&&(l(0,"mat-option",17,0),v(2,Ln,1,1,"mat-icon",21),u(3,"span",22),s()),i&2){let r=o.$implicit,e=ne(1),t=p(2);c("value",r),a(2),h(e.selected?2:-1),a(),c("ngClass",t.labelColorDefs[r].bg)}}function Rn(i,o){if(i&1){let r=S();l(0,"mat-form-field",10),u(1,"input",23),l(2,"mat-select",24)(3,"mat-select-trigger",13),u(4,"mat-icon",14),s(),l(5,"div",15),d(6," Label color "),s(),l(7,"div",16),R(8,Vn,4,3,"mat-option",17,X),s()(),l(10,"button",25),b("click",function(){let t=_(r).$implicit,n=p();return C(n.deleteLabel(t.get("id").value))}),u(11,"mat-icon",19),s()()}if(i&2){let r=o.$implicit,e=p();a(),c("formControl",r.get("title")),a(),c("formControl",r.get("color"))("disableOptionCentering",!0),a(2),c("ngClass",e.labelColorDefs[r.get("color").value].text)("svgIcon","heroicons_outline:tag"),a(4),O(e.labelColors),a(3),c("svgIcon","heroicons_solid:trash")}}var ki=(()=>{let o=class o{constructor(e,t,n){this.mailboxComponent=e,this._formBuilder=t,this._mailboxService=n,this.labelColors=bi,this.labelColorDefs=me}ngOnInit(){this.labelsForm=this._formBuilder.group({labels:this._formBuilder.array([]),newLabel:this._formBuilder.group({title:["",j.required],color:["orange"]})}),this._mailboxService.labels$.pipe(U(1)).subscribe(e=>{this.labels=e,e.forEach(t=>{let n=this._formBuilder.group({id:[t.id],title:[t.title,j.required],slug:[t.slug],color:[t.color]});this.labelsForm.get("labels").push(n)})}),this.labelsForm.get("labels").valueChanges.pipe(pe(500)).subscribe(()=>{this.updateLabels()})}addLabel(){this._mailboxService.addLabel(this.labelsForm.get("newLabel").value).subscribe(e=>{this.labelsForm.get("labels").push(this._formBuilder.group({id:[e.id],title:[e.title,j.required],slug:[e.slug],color:[e.color]})),this.labelsForm.get("newLabel").markAsPristine(),this.labelsForm.get("newLabel").markAsUntouched(),this.labelsForm.get("newLabel.title").reset(),this.labelsForm.get("newLabel.title").clearValidators(),this.labelsForm.get("newLabel.title").updateValueAndValidity()})}deleteLabel(e){let t=this.labelsForm.get("labels");t.removeAt(t.value.findIndex(n=>n.id===e)),this._mailboxService.deleteLabel(e).subscribe()}updateLabels(){this.labelsForm.get("labels").controls.forEach(e=>{e.dirty&&this._mailboxService.updateLabel(e.value.id,e.value).subscribe()}),this.labelsForm.get("labels").markAsPristine(),this.labelsForm.get("labels").markAsUntouched()}};o.\u0275fac=function(t){return new(t||o)(x(de),x(Ae),x(F))},o.\u0275cmp=k({type:o,selectors:[["mailbox-settings"]],standalone:!0,features:[I],decls:29,vars:12,consts:[["matOption","matOption"],[1,"flex","flex-auto","flex-col","overflow-y-auto","p-8"],[1,"flex","items-center"],[1,"-ml-2","mr-3","md:hidden"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"text-3xl","font-extrabold","tracking-tight"],[1,"text-secondary"],[1,"mt-8",3,"formGroup"],[1,"mt-6","flex","w-full","max-w-80","items-center","justify-start",3,"formGroupName"],[1,"w-full"],["matInput","",3,"formControlName","placeholder"],["matPrefix","",3,"formControlName","disableOptionCentering"],[1,"h-6"],[3,"ngClass","svgIcon"],[1,"px-4","pt-5","text-xl","font-semibold"],[1,"mx-3","my-4","-mr-5","flex","w-48","flex-wrap"],[1,"relative","flex","h-12","w-12","cursor-pointer","rounded-full","bg-transparent","p-0",3,"value"],["mat-icon-button","","matSuffix","",3,"click","disabled"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","w-full","max-w-80","flex-col",3,"formArrayName"],[1,"absolute","m-3","text-white",3,"svgIcon"],[1,"m-1","flex","h-10","w-10","rounded-full",3,"ngClass"],["matInput","",3,"formControl"],["matPrefix","",3,"formControl","disableOptionCentering"],["mat-icon-button","","matSuffix","",3,"click"]],template:function(t,n){t&1&&(l(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),b("click",function(){return n.mailboxComponent.drawer.toggle()}),u(4,"mat-icon",5),s()(),l(5,"div")(6,"div",6),d(7," Manage Labels "),s(),l(8,"div",7),d(9,"Create, update and delete labels"),s()()(),l(10,"form",8)(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),d(14,"New Label"),s(),u(15,"input",11),l(16,"mat-select",12)(17,"mat-select-trigger",13),u(18,"mat-icon",14),s(),l(19,"div",15),d(20," Label color "),s(),l(21,"div",16),R(22,Tn,4,3,"mat-option",17,X),s()(),l(24,"button",18),b("click",function(){return n.addLabel()}),u(25,"mat-icon",19),s()()(),l(26,"div",20),R(27,Rn,12,6,"mat-form-field",10,X),s()()()),t&2&&(a(4),c("svgIcon","heroicons_outline:bars-3"),a(6),c("formGroup",n.labelsForm),a(),c("formGroupName","newLabel"),a(4),c("formControlName","title")("placeholder","Label title"),a(),c("formControlName","color")("disableOptionCentering",!0),a(2),c("ngClass",n.labelColorDefs[n.labelsForm.get("newLabel.color").value].text)("svgIcon","heroicons_outline:tag"),a(4),O(n.labelColors),a(2),c("disabled",!n.labelsForm.get("newLabel").valid||!n.labelsForm.get("newLabel").dirty),a(),c("svgIcon","heroicons_solid:plus-circle"),a(),c("formArrayName","labels"),a(),O(n.labelsForm.get("labels").controls))},dependencies:[q,G,T,D,ze,qe,Ve,Re,Oe,Be,ii,je,Ne,ni,oi,ae,re,De,$t,Te,ce,se,ci,li,si,jt,ee,Nt],encapsulation:2});let i=o;return i})();var On=i=>{let o=i,r={};return i[0].path==="settings"?null:(i[0].path==="filter"||i[0].path==="label"?(r[i[0].path]=i[1],r.page=i[2],i[3]&&(o=i.slice(0,-1))):(r.folder=i[0],r.page=i[1],i[2]&&(o=i.slice(0,-1))),{consumed:o,posParams:r})},qn=(i,o)=>{let r=i;for(;r.firstChild;)r=r.firstChild;let e=o;for(;e.firstChild;)e=e.firstChild;if(r.paramMap.get("id")&&!e.paramMap.get("id"))return!0;let t={},n={};return i.paramMap.keys.forEach(m=>{t[m]=i.paramMap.get(m)}),o.paramMap.keys.forEach(m=>{n[m]=o.paramMap.get(m)}),!Ut(t,n)},jn=(i,o)=>{let r=y(F),e=y(ge);if(i.paramMap.get("page")&&parseInt(i.paramMap.get("page"),10)<=0){let n=o.url.split("/").slice(0,-1).join("/")+"/1";return e.navigateByUrl(n),!1}let t=[];return i.paramMap.get("folder")&&t.push(r.getMailsByFolder(i.paramMap.get("folder"),i.paramMap.get("page"))),i.paramMap.get("filter")&&t.push(r.getMailsByFilter(i.paramMap.get("filter"),i.paramMap.get("page"))),i.paramMap.get("label")&&t.push(r.getMailsByLabel(i.paramMap.get("label"),i.paramMap.get("page"))),mt(t).pipe(dt(()=>{let n=i;for(;n.firstChild;)n=n.firstChild;n.paramMap.get("id")||r.resetMail().subscribe()}),Qe(n=>{console.error(n.message);let m=o.url.split("/").slice(0,-1).join("/")+"/"+n.pagination.lastPage;return e.navigateByUrl(m),$(n)}))},Nn=(i,o)=>{let r=y(F),e=y(ge);return r.getMailById(i.paramMap.get("id")).pipe(Qe(t=>{console.error(t);let n=o.url.split("/").slice(0,-1).join("/");return e.navigateByUrl(n),$(t)}))},Ur=[{path:"",redirectTo:"inbox/1",pathMatch:"full"},{path:"filter/:filter",redirectTo:"filter/:filter/1",pathMatch:"full"},{path:"label/:label",redirectTo:"label/:label/1",pathMatch:"full"},{path:":folder",redirectTo:":folder/1",pathMatch:"full"},{path:"",component:de,resolve:{filters:()=>y(F).getFilters(),folders:()=>y(F).getFolders(),labels:()=>y(F).getLabels()},children:[{component:Ei,matcher:On,runGuardsAndResolvers:qn,resolve:{mails:jn},children:[{path:"",pathMatch:"full",component:_i},{path:":id",component:xi,resolve:{mail:Nn}}]},{path:"settings",component:ki}]}];export{Ur as default};
