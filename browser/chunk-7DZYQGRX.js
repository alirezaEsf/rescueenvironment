import{a as Ke}from"./chunk-IBIRSKBJ.js";import{a as qe,b as Ge,c as Qe,d as Je}from"./chunk-VVQWPJ3X.js";import{a as Re,b as Ae,c as je,d as Oe}from"./chunk-PKGH4TD3.js";import{a as Ve,b as Le,c as Ee,d as ne,e as oe}from"./chunk-TFZKTK72.js";import{c as Be}from"./chunk-W4IV6SAA.js";import{b as se}from"./chunk-YCUPTL4E.js";import"./chunk-2WF3BAZE.js";import"./chunk-J44A7NQY.js";import"./chunk-K5KQA6TL.js";import"./chunk-6VFWJ4EV.js";import{a as Ue,b as He}from"./chunk-N7K7PRKT.js";import{a as Pe,b as ze,d as ue,e as fe}from"./chunk-7FJFN7F7.js";import{d as re,e as $e,i as ae,j as le}from"./chunk-E3OPEBBX.js";import"./chunk-YYH5TD5H.js";import{b as pe,f as me,k as de,u as We,w as _e}from"./chunk-FD45J2AH.js";import{a as ce,c as z,e as U}from"./chunk-IDU54J7C.js";import{b as H,c as q}from"./chunk-FLSFYQN3.js";import{D as te,E as ie}from"./chunk-4RUIE36X.js";import"./chunk-ILZLEP6A.js";import"./chunk-GOAOR4JZ.js";import"./chunk-BPAYJYXU.js";import{c as Fe}from"./chunk-KU56Z7YF.js";import{c as De}from"./chunk-DT5IGS4I.js";import{h as ee,m as P}from"./chunk-XQUWTDXC.js";import{Bb as X,C as we,Cc as Te,Fb as N,G as J,Gb as C,I as ye,Ib as Se,Jb as y,Kb as k,L as ke,Lb as l,Mb as c,Mc as W,Nb as u,Rb as v,W as S,X as O,Xb as f,Z as B,Zb as p,_a as K,aa as Ne,bb as a,cb as w,ec as M,f as I,fa as Me,fc as g,g as $,gc as Ie,hc as F,la as D,lc as R,m as Q,mc as A,n as ve,nc as j,pc as V,r as T,rc as Y,s as be,sc as Z,wa as d,xa as _,xb as x,xc as L,yc as E,zb as m}from"./chunk-ABXAS3LN.js";import"./chunk-UGUGGRN7.js";var G=(()=>{let r=class r{constructor(t){this._httpClient=t,this._labels=new $(null),this._note=new $(null),this._notes=new $(null)}get labels$(){return this._labels.asObservable()}get notes$(){return this._notes.asObservable()}get note$(){return this._note.asObservable()}getLabels(){return this._httpClient.get("api/apps/notes/labels").pipe(B(t=>{this._labels.next(t)}))}addLabel(t){return this._httpClient.post("api/apps/notes/labels",{title:t}).pipe(B(e=>{this._labels.next(e)}))}updateLabel(t){return this._httpClient.patch("api/apps/notes/labels",{label:t}).pipe(B(e=>{this.getNotes().subscribe(),this._labels.next(e)}))}deleteLabel(t){return this._httpClient.delete("api/apps/notes/labels",{params:{id:t}}).pipe(B(e=>{this.getNotes().subscribe(),this._labels.next(e)}))}getNotes(){return this._httpClient.get("api/apps/notes/all").pipe(B(t=>{this._notes.next(t)}))}getNoteById(t){return this._notes.pipe(ye(1),T(e=>{let o=e.find(s=>s.id===t)||null;return this._note.next(o),o}),S(e=>e?Q(e):ve("Could not found the note with id of "+t+"!")))}addTask(t,e){return this._httpClient.post("api/apps/notes/tasks",{note:t,task:e}).pipe(S(()=>this.getNotes().pipe(S(()=>this.getNoteById(t.id)))))}createNote(t){return this._httpClient.post("api/apps/notes",{note:t}).pipe(S(e=>this.getNotes().pipe(S(()=>this.getNoteById(e.id).pipe(T(()=>e))))))}updateNote(t){let e=se(t);return e.labels.length&&(e.labels=e.labels.map(o=>o.id)),this._httpClient.patch("api/apps/notes",{updatedNote:e}).pipe(B(o=>{this.getNotes().subscribe()}))}deleteNote(t){return this._httpClient.delete("api/apps/notes",{params:{id:t.id}}).pipe(T(e=>(this.getNotes().subscribe(),e)))}};r.\u0275fac=function(e){return new(e||r)(Me(De))},r.\u0275prov=Ne({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();var lt=i=>({"text-secondary line-through":i});function st(i,r){if(i&1){let n=v();l(0,"div",5)(1,"div",13)(2,"button",14),f("click",function(){d(n);let e=p(),o=p();return _(o.removeImage(e))}),u(3,"mat-icon",15),c()(),u(4,"img",16),c()}if(i&2){let n=p();a(3),m("svgIcon","heroicons_outline:trash"),a(),m("src",n.image,K)}}function ct(i,r){if(i&1){let n=v();l(0,"div",17)(1,"mat-checkbox",21),j("ngModelChange",function(e){let o=d(n).$implicit;return A(o.completed,e)||(o.completed=e),_(e)}),f("change",function(){let e=d(n).$implicit,o=p(2),s=p();return _(s.updateTaskOnNote(o,e))}),c(),l(2,"input",22),j("ngModelChange",function(e){let o=d(n).$implicit;return A(o.content,e)||(o.content=e),_(e)}),f("input",function(){let e=d(n).$implicit,o=p(2),s=p();return _(s.updateTaskOnNote(o,e))}),c(),l(3,"mat-icon",23),f("click",function(){let e=d(n).$implicit,o=p(2),s=p();return _(s.removeTaskFromNote(o,e))}),c()()}if(i&2){let n=r.$implicit;a(),m("color","primary"),R("ngModel",n.completed),a(),m("ngClass",Y(6,lt,n.completed))("placeholder","Task"),R("ngModel",n.content),a(),m("svgIcon","heroicons_solid:x-mark")}}function pt(i,r){if(i&1){let n=v();l(0,"div",9),y(1,ct,4,8,"div",17,N().trackByFn,!0),l(3,"div",18),u(4,"mat-icon",19),l(5,"input",20,0),f("keydown.enter",function(){d(n);let e=M(6),o=p();return p().addTaskToNote(o,e.value),_(e.value="")}),c()()()}if(i&2){let n=p();a(),k(n.tasks),a(3),m("svgIcon","heroicons_solid:plus"),a(),m("placeholder","Add task")}}function mt(i,r){if(i&1){let n=v();l(0,"div",24)(1,"div"),g(2),c(),l(3,"mat-icon",25),f("click",function(){let e=d(n).$implicit,o=p(2),s=p();return _(s.toggleLabelOnNote(o,e))}),c()()}if(i&2){let n=r.$implicit;a(2),F(" ",n.title," "),a(),m("svgIcon","heroicons_solid:x-circle")}}function dt(i,r){if(i&1&&(l(0,"div",10),y(1,mt,4,2,"div",24,N().trackByFn,!0),c()),i&2){let n=p();a(),k(n.labels)}}function _t(i,r){if(i&1){let n=v();l(0,"div",11)(1,"button",26),f("click",function(){d(n);let e=p(),o=p();return _(o.createNote(e))}),g(2," Save "),c()()}if(i&2){let n=p();a(),m("color","primary")("disabled",!n.title&&!n.content)}}function ut(i,r){if(i&1){let n=v();l(0,"button",34),f("click",function(){let e=d(n).$implicit,o=p(3),s=p();return _(s.toggleLabelOnNote(o,e))}),l(1,"span",18),u(2,"mat-checkbox",35),l(3,"span",36),g(4),c()()()}if(i&2){let n=r.$implicit,t=p(3),e=p();a(2),m("color","primary")("checked",e.isNoteHasLabel(t,n)),a(2),Ie(n.title)}}function ft(i,r){i&1&&y(0,ut,5,3,"button",33,Se),i&2&&k(r)}function Ct(i,r){if(i&1){let n=v();l(0,"div",12)(1,"div",27)(2,"div")(3,"input",28,1),f("change",function(){d(n);let e=M(4),o=p(),s=p();return _(s.uploadImage(o,e.files))}),c(),l(5,"label",29),u(6,"mat-icon",30),c()(),l(7,"button",14),f("click",function(){d(n);let e=p(),o=p();return _(o.addTasksToNote(e))}),u(8,"mat-icon",30),c(),l(9,"button",31),u(10,"mat-icon",30),c(),l(11,"mat-menu",null,2),x(13,ft,2,0),L(14,"async"),c(),l(15,"button",14),f("click",function(){d(n);let e=p(),o=p();return _(o.toggleArchiveOnNote(e))}),u(16,"mat-icon",30),c(),l(17,"button",14),f("click",function(){d(n);let e=p(),o=p();return _(o.deleteNote(e))}),u(18,"mat-icon",30),c()(),l(19,"button",32),g(20,"Close"),c()()}if(i&2){let n,t=M(12),e=p(2);a(3),m("multiple",!1)("accept","image/jpeg, image/png"),a(3),m("svgIcon","heroicons_outline:photo"),a(2),m("svgIcon","heroicons_outline:clipboard-document-list"),a(),m("matMenuTriggerFor",t),a(),m("svgIcon","heroicons_outline:tag"),a(3),C((n=E(14,9,e.labels$))?13:-1,n),a(3),m("svgIcon","heroicons_outline:archive-box"),a(2),m("svgIcon","heroicons_outline:trash")}}function gt(i,r){if(i&1){let n=v();x(0,st,5,2,"div",5),l(1,"div",4)(2,"div")(3,"input",6),j("ngModelChange",function(e){let o=d(n);return A(o.title,e)||(o.title=e),_(e)}),f("input",function(){let e=d(n),o=p();return _(o.updateNoteDetails(e))}),c()(),l(4,"div",7)(5,"textarea",8),j("ngModelChange",function(e){let o=d(n);return A(o.content,e)||(o.content=e),_(e)}),f("input",function(){let e=d(n),o=p();return _(o.updateNoteDetails(e))}),c()(),x(6,pt,7,2,"div",9)(7,dt,3,0,"div",10)(8,_t,3,2,"div",11)(9,Ct,21,11,"div",12),c()}if(i&2){let n=r;C(n.image?0:-1),a(3),m("placeholder","Title"),R("ngModel",n.title),a(2),m("placeholder","Note"),R("ngModel",n.content),a(),C(n.tasks?6:-1),a(),C(n.labels&&n.labels.length?7:-1),a(),C(n.id?-1:8),a(),C(n.id?9:-1)}}var he=(()=>{let r=class r{constructor(t,e,o,s){this._changeDetectorRef=t,this._data=e,this._notesService=o,this._matDialogRef=s,this.noteChanged=new I,this._unsubscribeAll=new I}ngOnInit(){if(this._data.note.id)this._notesService.getNoteById(this._data.note.id).subscribe(),this.note$=this._notesService.note$;else{let t={id:null,title:"",content:"",tasks:null,image:null,reminder:null,labels:[],archived:!1,createdAt:null,updatedAt:null};this.note$=Q(t)}this.labels$=this._notesService.labels$,this.noteChanged.pipe(O(this._unsubscribeAll),J(500),S(t=>this._notesService.updateNote(t))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createNote(t){this._notesService.createNote(t).pipe(T(()=>{this.note$=this._notesService.note$})).subscribe()}uploadImage(t,e){if(!e.length)return;let o=["image/jpeg","image/png"],s=e[0];o.includes(s.type)&&this._readAsDataURL(s).then(h=>{t.image=h,this.noteChanged.next(t)})}removeImage(t){t.image=null,this.noteChanged.next(t)}addTasksToNote(t){t.tasks||(t.tasks=[])}addTaskToNote(t,e){e.trim()!==""&&this._notesService.addTask(t,e).subscribe()}removeTaskFromNote(t,e){t.tasks=t.tasks.filter(o=>o.id!==e.id),this.noteChanged.next(t)}updateTaskOnNote(t,e){e.id&&this.noteChanged.next(t)}isNoteHasLabel(t,e){return!!t.labels.find(o=>o.id===e.id)}toggleLabelOnNote(t,e){this.isNoteHasLabel(t,e)?t.labels=t.labels.filter(o=>o.id!==e.id):t.labels.push(e),this.noteChanged.next(t)}toggleArchiveOnNote(t){t.archived=!t.archived,this.noteChanged.next(t),this._matDialogRef.close()}updateNoteDetails(t){this.noteChanged.next(t)}deleteNote(t){this._notesService.deleteNote(t).subscribe(e=>{e&&this._matDialogRef.close()})}trackByFn(t,e){return e.id||t}_readAsDataURL(t){return new Promise((e,o)=>{let s=new FileReader;s.onload=()=>{e(s.result)},s.onerror=h=>{o(h)},s.readAsDataURL(t)})}};r.\u0275fac=function(e){return new(e||r)(w(W),w(Le),w(G),w(Ve))},r.\u0275cmp=D({type:r,selectors:[["notes-details"]],standalone:!0,features:[V],decls:3,vars:3,consts:[["newTaskInput",""],["imageFileInput",""],["labelsMenu","matMenu"],[1,"-m-6","flex","flex-auto","flex-col","md:w-160","md:min-w-160"],[1,"m-4"],[1,"relative","w-full"],[1,"w-full","p-2","text-2xl",3,"ngModelChange","input","placeholder","ngModel"],[1,"flex","w-full","px-2","py-5"],["cdkTextareaAutosize","",1,"w-full",3,"ngModelChange","input","placeholder","ngModel"],[1,"mx-2","mt-4","space-y-1.5"],[1,"mx-1","mt-6","flex","flex-wrap","items-center"],[1,"mt-4","flex","items-center","justify-end"],[1,"mt-4","flex","items-center","justify-between"],[1,"absolute","bottom-0","right-0","p-4"],["mat-icon-button","",3,"click"],[1,"text-white",3,"svgIcon"],[1,"w-full","object-cover",3,"src"],[1,"group","flex","items-center"],[1,"flex","items-center"],[1,"text-hint","-ml-0.5","icon-size-5",3,"svgIcon"],[1,"ml-1.5","w-full","px-1","py-0.5",3,"keydown.enter","placeholder"],[1,"flex","items-center",3,"ngModelChange","change","color","ngModel"],[1,"w-full","px-1","py-0.5",3,"ngModelChange","input","ngClass","placeholder","ngModel"],[1,"ml-auto","hidden","cursor-pointer","icon-size-5","group-hover:flex",3,"click","svgIcon"],[1,"m-1","flex","items-center","rounded-full","bg-gray-100","px-3","py-0.5","text-sm","font-medium","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"ml-1","cursor-pointer","icon-size-4",3,"click","svgIcon"],["mat-flat-button","",3,"click","color","disabled"],[1,"flex","items-center","space-x-2"],["id","image-file-input","type","file",1,"pointer-events-none","invisible","absolute","h-0","w-0","opacity-0",3,"change","multiple","accept"],["for","image-file-input","matRipple","",1,"flex","h-10","w-10","cursor-pointer","items-center","justify-center","rounded-full","hover:bg-gray-400","hover:bg-opacity-20","dark:hover:bg-black","dark:hover:bg-opacity-5"],[3,"svgIcon"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-flat-button","","matDialogClose",""],["mat-menu-item",""],["mat-menu-item","",3,"click"],["disableRipple","",1,"pointer-events-none","flex","items-center",3,"color","checked"],[1,"ml-1","leading-5"]],template:function(e,o){if(e&1&&(l(0,"div",3),x(1,gt,10,9,"div",4),L(2,"async"),c()),e&2){let s;a(),C((s=E(2,1,o.note$))?1:-1,s)}},dependencies:[U,ce,z,q,H,_e,pe,me,de,ze,Pe,He,Ue,ee,ie,te,Oe,Ae,Re,je,oe,ne,P],encapsulation:2,changeDetection:0});let i=r;return i})();function vt(i,r){if(i&1){let n=v();l(0,"mat-form-field",11)(1,"button",12),f("click",function(){let e=d(n).$implicit,o=p(2);return _(o.deleteLabel(e.id))}),u(2,"mat-icon",9),c(),l(3,"input",13),j("ngModelChange",function(e){let o=d(n).$implicit;return A(o.title,e)||(o.title=e),_(e)}),f("input",function(){let e=d(n).$implicit,o=p(2);return _(o.updateLabel(e))}),c()()}if(i&2){let n=r.$implicit;a(2),m("svgIcon","heroicons_solid:trash"),a(),m("autocomplete","off"),R("ngModel",n.title)}}function bt(i,r){i&1&&y(0,vt,4,3,"mat-form-field",11,N().trackByFn,!0),i&2&&k(r)}var et=(()=>{let r=class r{constructor(t,e){this._changeDetectorRef=t,this._notesService=e,this.labelChanged=new I,this._unsubscribeAll=new I}ngOnInit(){this.labels$=this._notesService.labels$,this.labelChanged.pipe(O(this._unsubscribeAll),J(500),we(t=>t.title.trim()!==""),S(t=>this._notesService.updateLabel(t))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addLabel(t){this._notesService.addLabel(t).subscribe()}updateLabel(t){this.labelChanged.next(t)}deleteLabel(t){this._notesService.deleteLabel(t).subscribe(()=>{this._changeDetectorRef.markForCheck()})}trackByFn(t,e){return e.id||t}};r.\u0275fac=function(e){return new(e||r)(w(W),w(G))},r.\u0275cmp=D({type:r,selectors:[["notes-labels"]],standalone:!0,features:[V],decls:14,vars:9,consts:[["newLabelInput",""],[1,"flex","w-80","min-w-80","flex-auto","flex-col","p-2","md:p-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold"],["matDialogClose","","mat-icon-button",""],[3,"svgIcon"],[1,"fuse-mat-dense","mt-8","w-full"],["name","new-label","matInput","",3,"autocomplete","placeholder"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","flex-col"],[1,"fuse-mat-dense","w-full"],["mat-icon-button","","matPrefix","",3,"click"],["required","","matInput","",3,"ngModelChange","input","autocomplete","ngModel"]],template:function(e,o){if(e&1){let s=v();l(0,"div",1)(1,"div",2)(2,"div",3),g(3,"Edit labels"),c(),l(4,"button",4),u(5,"mat-icon",5),c()(),l(6,"mat-form-field",6),u(7,"input",7,0),l(9,"button",8),f("click",function(){d(s);let b=M(8);return o.addLabel(b.value),_(b.value="")}),u(10,"mat-icon",9),c()(),l(11,"div",10),x(12,bt,2,0),L(13,"async"),c()()}if(e&2){let s,h=M(8);a(5),m("svgIcon","heroicons_outline:x-mark"),a(2),m("autocomplete","off")("placeholder","Create new label"),a(2),X("invisible",h.value.trim()===""),a(),m("svgIcon","heroicons_solid:check-circle"),a(2),C((s=E(13,7,o.labels$))?12:-1,s)}},dependencies:[U,z,oe,ne,q,H,le,ae,re,$e,fe,ue,_e,pe,me,We,de,P],encapsulation:2,changeDetection:0});let i=r;return i})();var xe=(i,r)=>({"bg-gray-200 text-primary dark:bg-gray-700 dark:text-primary-400":i,"text-hint hover:bg-hover":r}),wt=i=>({"text-secondary line-through":i});function yt(i,r){if(i&1){let n=v();l(0,"div",8),f("click",function(){let e=d(n).$implicit,o=p(2);return _(o.filterByLabel(e.id))}),u(1,"mat-icon",9),l(2,"div",10),g(3),c()()}if(i&2){let n=r.$implicit,t=p(2);m("ngClass",Z(4,xe,"label:"+n.id===t.filterStatus,"label:"+n.id!==t.filterStatus))("matRippleDisabled","label:"+n.id===t.filterStatus),a(),m("svgIcon","heroicons_outline:tag"),a(2),F(" ",n.title," ")}}function kt(i,r){i&1&&y(0,yt,4,7,"div",27,N().trackByFn,!0),i&2&&k(r)}function Nt(i,r){if(i&1&&u(0,"img",32),i&2){let n=p().$implicit;m("src",n.image,K)}}function Mt(i,r){if(i&1&&(l(0,"div",34),g(1),c()),i&2){let n=p().$implicit;a(),F(" ",n.title," ")}}function St(i,r){if(i&1&&(l(0,"div"),g(1),c()),i&2){let n=p().$implicit;X("text-xl",n.content.length<70),a(),F(" ",n.content," ")}}function It(i,r){i&1&&(l(0,"div",38),u(1,"div",41),c())}function Tt(i,r){i&1&&u(0,"mat-icon",39),i&2&&m("svgIcon","heroicons_solid:check-circle")}function Dt(i,r){if(i&1&&(l(0,"div",16),x(1,It,2,0,"div",38)(2,Tt,1,1,"mat-icon",39),l(3,"div",40),g(4),c()()),i&2){let n=r.$implicit;a(),C(n.completed?-1:1),a(),C(n.completed?2:-1),a(),m("ngClass",Y(4,wt,n.completed)),a(),F(" ",n.content," ")}}function Ft(i,r){if(i&1&&(l(0,"div",36),y(1,Dt,5,6,"div",16,N().trackByFn,!0),c()),i&2){let n=p().$implicit;a(),k(n.tasks)}}function Vt(i,r){if(i&1&&(l(0,"div",42),g(1),c()),i&2){let n=r.$implicit;a(),F(" ",n.title," ")}}function Lt(i,r){if(i&1&&(l(0,"div",37),y(1,Vt,2,1,"div",42,N().trackByFn,!0),c()),i&2){let n=p().$implicit;a(),k(n.labels)}}function Et(i,r){if(i&1){let n=v();l(0,"div",31),f("click",function(){let e=d(n).$implicit,o=p(5);return _(o.openNoteDialog(e))}),x(1,Nt,1,1,"img",32),l(2,"div",33),x(3,Mt,2,1,"div",34)(4,St,2,3,"div",35)(5,Ft,3,0,"div",36)(6,Lt,3,0,"div",37),c()()}if(i&2){let n=r.$implicit;a(),C(n.image?1:-1),a(2),C(n.title?3:-1),a(),C(n.content?4:-1),a(),C(n.tasks?5:-1),a(),C(n.labels?6:-1)}}function $t(i,r){if(i&1&&(l(0,"div",29),y(1,Et,7,5,"div",30,N().trackByFn,!0),c()),i&2){let n=r.$implicit;a(),k(n.items)}}function Bt(i,r){if(i&1&&y(0,$t,3,0,"div",29,N().trackByFn,!0),i&2){let n=r.$implicit;k(n)}}function Rt(i,r){if(i&1&&(l(0,"fuse-masonry",28),x(1,Bt,2,0,"ng-template",null,2,Te),c()),i&2){let n=M(2),t=p(),e=p();m("items",t)("columns",e.masonryColumns)("columnsTemplate",n)}}function At(i,r){i&1&&(l(0,"div",26),u(1,"mat-icon",43),l(2,"div",44),g(3," There are no notes! "),c()()),i&2&&(a(),m("svgIcon","heroicons_outline:document"))}function jt(i,r){i&1&&x(0,Rt,3,3,"fuse-masonry",28)(1,At,4,1,"div",26),i&2&&C(r.length?0:1)}function Ot(i,r){i&1&&(l(0,"div",26)(1,"div",44),g(2," Loading... "),c()())}var tt=(()=>{let r=class r{constructor(t,e,o,s){this._changeDetectorRef=t,this._fuseMediaWatcherService=e,this._matDialog=o,this._notesService=s,this.drawerMode="side",this.drawerOpened=!0,this.filter$=new $("notes"),this.searchQuery$=new $(null),this.masonryColumns=4,this._unsubscribeAll=new I}get filterStatus(){return this.filter$.value}ngOnInit(){this._notesService.getLabels().subscribe(),this._notesService.getNotes().subscribe(),this.labels$=this._notesService.labels$,this.notes$=be([this._notesService.notes$,this.filter$,this.searchQuery$]).pipe(ke(),T(([t,e,o])=>{if(!t||!t.length)return;let s=t;o&&(o=o.trim().toLowerCase(),s=s.filter(b=>b.title.toLowerCase().includes(o)||b.content.toLowerCase().includes(o)));let h=e==="archived";if(s=s.filter(b=>b.archived===h),e.startsWith("label:")){let b=e.split(":")[1];s=s.filter(nt=>!!nt.labels.find(ot=>ot.id===b))}return s})),this._fuseMediaWatcherService.onMediaChange$.pipe(O(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{t.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),t.includes("xl")?this.masonryColumns=5:t.includes("lg")?this.masonryColumns=4:t.includes("md")?this.masonryColumns=3:t.includes("sm")?this.masonryColumns=2:this.masonryColumns=1,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addNewNote(){this._matDialog.open(he,{autoFocus:!1,data:{note:{}}})}openEditLabelsDialog(){this._matDialog.open(et,{autoFocus:!1})}openNoteDialog(t){this._matDialog.open(he,{autoFocus:!1,data:{note:se(t)}})}filterByArchived(){this.filter$.next("archived")}filterByLabel(t){let e=`label:${t}`;this.filter$.next(e)}filterByQuery(t){this.searchQuery$.next(t)}resetFilter(){this.filter$.next("notes")}trackByFn(t,e){return e.id||t}};r.\u0275fac=function(e){return new(e||r)(w(W),w(Be),w(Ee),w(G))},r.\u0275cmp=D({type:r,selectors:[["notes-list"]],standalone:!0,features:[V],decls:37,vars:28,consts:[["drawer",""],["searchInput",""],["columnsTemplate",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","h-full","flex-auto","dark:bg-transparent"],[1,"bg-default","w-2/3","border-r-0","sm:w-72","lg:w-56",3,"mode","opened"],[1,"p-6","lg:py-8","lg:pl-4","lg:pr-0"],[1,"space-y-2"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium",3,"click","ngClass","matRippleDisabled"],[1,"text-current",3,"svgIcon"],[1,"text-default","ml-3","select-none","leading-5"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium","hover:bg-hover",3,"click"],[1,"text-hint",3,"svgIcon"],[1,"ml-3","select-none","leading-5"],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-auto","flex-col","p-6","md:p-8"],[1,"flex","items-center"],[1,"flex","flex-auto","items-center"],["mat-icon-button","",1,"-ml-2","flex","lg:hidden",3,"click"],[3,"svgIcon"],[1,"fuse-mat-rounded","fuse-mat-dense","ml-4","flex-auto","lg:ml-0",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","min-w-10","px-1","sm:px-4",3,"click","color"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","hidden","sm:inline-block"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium",3,"ngClass","matRippleDisabled"],[1,"-mx-2","mt-8",3,"items","columns","columnsTemplate"],[1,"flex-1","space-y-4","px-2"],[1,"bg-card","flex","cursor-pointer","flex-col","overflow-hidden","rounded-2xl","shadow"],[1,"bg-card","flex","cursor-pointer","flex-col","overflow-hidden","rounded-2xl","shadow",3,"click"],[1,"w-full","object-cover",3,"src"],[1,"flex","flex-auto","flex-col","space-y-4","p-6"],[1,"line-clamp-3","font-semibold"],[3,"text-xl"],[1,"space-y-1.5"],[1,"-m-1","flex","flex-wrap","items-center"],[1,"flex","h-5","w-5","items-center","justify-center"],[1,"text-hint","icon-size-5",3,"svgIcon"],[1,"ml-1.5","leading-5",3,"ngClass"],[1,"h-4","w-4","rounded-full","border-2"],[1,"m-1","rounded-full","bg-gray-100","px-3","py-0.5","text-sm","font-medium","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(e,o){if(e&1){let s=v();l(0,"div",3)(1,"mat-drawer-container",4)(2,"mat-drawer",5,0)(4,"div",6)(5,"div",7)(6,"div",8),f("click",function(){return d(s),_(o.resetFilter())}),u(7,"mat-icon",9),l(8,"div",10),g(9," Notes "),c()(),l(10,"div",8),f("click",function(){return d(s),_(o.filterByArchived())}),u(11,"mat-icon",9),l(12,"div",10),g(13," Archive "),c()(),x(14,kt,2,0),L(15,"async"),l(16,"div",11),f("click",function(){return d(s),_(o.openEditLabelsDialog())}),u(17,"mat-icon",12),l(18,"div",13),g(19," Edit labels "),c()()()()(),l(20,"mat-drawer-content",14)(21,"div",15)(22,"div",16)(23,"div",17)(24,"button",18),f("click",function(){d(s);let b=M(3);return _(b.toggle())}),u(25,"mat-icon",19),c(),l(26,"mat-form-field",20),u(27,"mat-icon",21),l(28,"input",22,1),f("input",function(){d(s);let b=M(29);return _(o.filterByQuery(b.value))}),c()()(),l(30,"button",23),f("click",function(){return d(s),_(o.addNewNote())}),u(31,"mat-icon",24),l(32,"span",25),g(33,"New note"),c()()(),x(34,jt,2,1),L(35,"async"),x(36,Ot,3,0,"div",26),c()()()()}if(e&2){let s,h;a(2),m("mode",o.drawerMode)("opened",o.drawerOpened),a(4),m("ngClass",Z(22,xe,o.filterStatus==="notes",o.filterStatus!=="notes"))("matRippleDisabled",o.filterStatus==="notes"),a(),m("svgIcon","heroicons_outline:pencil-square"),a(3),m("ngClass",Z(25,xe,o.filterStatus==="archived",o.filterStatus!=="archived"))("matRippleDisabled",o.filterStatus==="archived"),a(),m("svgIcon","heroicons_outline:archive-box"),a(3),C((s=E(15,18,o.labels$))?14:-1,s),a(3),m("svgIcon","heroicons_outline:pencil"),a(8),m("svgIcon","heroicons_outline:bars-3"),a(),m("subscriptSizing","dynamic"),a(),m("svgIcon","heroicons_solid:magnifying-glass"),a(),m("autocomplete","off")("placeholder","Search notes"),a(2),m("color","primary"),a(),m("svgIcon","heroicons_solid:plus-circle"),a(3),C((h=E(35,20,o.notes$))?34:36,h)}},dependencies:[Je,Ge,Qe,qe,ie,te,ee,q,H,U,ce,z,le,ae,re,fe,ue,Ke,P],encapsulation:2,changeDetection:0});let i=r;return i})();var it=(()=>{let r=class r{constructor(){}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=D({type:r,selectors:[["notes"]],standalone:!0,features:[V],decls:1,vars:0,template:function(e,o){e&1&&u(0,"router-outlet")},dependencies:[Fe],encapsulation:2,changeDetection:0});let i=r;return i})();var Vi=[{path:"",component:it,children:[{path:"",component:tt}]}];export{Vi as default};
