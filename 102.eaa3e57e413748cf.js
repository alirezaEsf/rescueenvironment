"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[102],{60102:(et,ce,c)=>{c.r(ce),c.d(ce,{default:()=>Yt});var e=c(4020),A=c(77920),ye=c(76939),w=c(60177),y=c(88834),de=c(82765),J=c(3),M=c(30636),R=c(99213),z=c(59042),K=c(59115),Me=c(61203),Fe=c(68955);const Re=["gray","red","orange","yellow","green","teal","blue","indigo","purple","pink"],oe={gray:{text:"text-gray-500",bg:"bg-gray-500",combined:"text-gray-800 bg-gray-100"},red:{text:"text-red-500",bg:"bg-red-500",combined:"text-red-800 bg-red-100"},orange:{text:"text-orange-500",bg:"bg-orange-500",combined:"text-orange-800 bg-orange-100"},yellow:{text:"text-yellow-500",bg:"bg-yellow-500",combined:"text-yellow-800 bg-yellow-100"},green:{text:"text-green-500",bg:"bg-green-500",combined:"text-green-800 bg-green-100"},teal:{text:"text-teal-500",bg:"bg-teal-500",combined:"text-teal-800 bg-teal-100"},blue:{text:"text-blue-500",bg:"bg-blue-500",combined:"text-blue-800 bg-blue-100"},indigo:{text:"text-indigo-500",bg:"bg-indigo-500",combined:"text-indigo-800 bg-indigo-100"},purple:{text:"text-purple-500",bg:"bg-purple-500",combined:"text-purple-800 bg-purple-100"},pink:{text:"text-pink-500",bg:"bg-pink-500",combined:"text-pink-800 bg-pink-100"}};var Z=c(21413),_=c(56977),se=c(91673),I=c(84412),$=c(88141),N=c(25558),P=c(18810),Y=c(7673),U=c(96697),H=c(96354),Ee=c(21626);let D=(()=>{class i{constructor(t){this._httpClient=t,this.selectedMailChanged=new I.t(null),this._category=new I.t(null),this._filters=new I.t(null),this._folders=new I.t(null),this._labels=new I.t(null),this._mails=new I.t(null),this._mailsLoading=new I.t(!1),this._mail=new I.t(null),this._pagination=new I.t(null)}get category$(){return this._category.asObservable()}get filters$(){return this._filters.asObservable()}get folders$(){return this._folders.asObservable()}get labels$(){return this._labels.asObservable()}get mails$(){return this._mails.asObservable()}get mailsLoading$(){return this._mailsLoading.asObservable()}get mail$(){return this._mail.asObservable()}get pagination$(){return this._pagination.asObservable()}getFilters(){return this._httpClient.get("api/apps/mailbox/filters").pipe((0,$.M)(t=>{this._filters.next(t)}))}getFolders(){return this._httpClient.get("api/apps/mailbox/folders").pipe((0,$.M)(t=>{this._folders.next(t)}))}getLabels(){return this._httpClient.get("api/apps/mailbox/labels").pipe((0,$.M)(t=>{this._labels.next(t)}))}getMailsByFilter(t,o="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{filter:t,page:o}}).pipe((0,$.M)(n=>{this._category.next({type:"filter",name:t}),this._mails.next(n.mails),this._pagination.next(n.pagination),this._mailsLoading.next(!1)}),(0,N.n)(n=>null===n.mails?(0,P.$)({message:"Requested page is not available!",pagination:n.pagination}):(0,Y.of)(n)))}getMailsByFolder(t,o="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{folder:t,page:o}}).pipe((0,$.M)(n=>{this._category.next({type:"folder",name:t}),this._mails.next(n.mails),this._pagination.next(n.pagination),this._mailsLoading.next(!1)}),(0,N.n)(n=>null===n.mails?(0,P.$)({message:"Requested page is not available!",pagination:n.pagination}):(0,Y.of)(n)))}getMailsByLabel(t,o="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{label:t,page:o}}).pipe((0,$.M)(n=>{this._category.next({type:"label",name:t}),this._mails.next(n.mails),this._pagination.next(n.pagination),this._mailsLoading.next(!1)}),(0,N.n)(n=>null===n.mails?(0,P.$)({message:"Requested page is not available!",pagination:n.pagination}):(0,Y.of)(n)))}getMailById(t){return this._mails.pipe((0,U.s)(1),(0,H.T)(o=>{const n=o.find(s=>s.id===t)||null;return this._mail.next(n),n}),(0,N.n)(o=>o?(0,Y.of)(o):(0,P.$)("Could not found mail with id of "+t+"!")))}updateMail(t,o){return this._httpClient.patch("api/apps/mailbox/mail",{id:t,mail:o}).pipe((0,$.M)(()=>{this.getFolders().subscribe()}))}resetMail(){return(0,Y.of)(!0).pipe((0,U.s)(1),(0,$.M)(()=>{this._mail.next(null)}))}addLabel(t){return this.labels$.pipe((0,U.s)(1),(0,N.n)(o=>this._httpClient.post("api/apps/mailbox/label",{label:t}).pipe((0,H.T)(n=>(this._labels.next([...o,n]),n)))))}updateLabel(t,o){return this.labels$.pipe((0,U.s)(1),(0,N.n)(n=>this._httpClient.patch("api/apps/mailbox/label",{id:t,label:o}).pipe((0,H.T)(s=>{const d=n.findIndex(u=>u.id===t);return n[d]=s,this._labels.next(n),s}))))}deleteLabel(t){return this.labels$.pipe((0,U.s)(1),(0,N.n)(o=>this._httpClient.delete("api/apps/mailbox/label",{params:{id:t}}).pipe((0,H.T)(n=>{const s=o.findIndex(d=>d.id===t);return o.splice(s,1),this._labels.next(o),n}))))}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(Ee.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ke=c(47987);const je=["infoDetailsPanelOrigin"],we=["infoDetailsPanel"],Te=()=>["./../"],Ie=i=>({"text-red-600 dark:text-red-500":i}),Se=i=>({"text-orange-500 dark:text-red-400":i});function $e(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",36),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.toggleLabel(n))}),e.j41(1,"mat-checkbox",37),e.EFF(2),e.k0s()()}if(2&i){const t=l.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("color","primary")("checked",o.mail.labels.includes(t.id))("disableRipple",!0),e.R7$(),e.SpI(" ",t.title," ")}}function De(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.toggleUnread(!1))}),e.nrm(1,"mat-icon",10),e.j41(2,"span"),e.EFF(3,"Mark as read"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:envelope-open"))}function Le(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.toggleUnread(!0))}),e.nrm(1,"mat-icon",10),e.j41(2,"span"),e.EFF(3,"Mark as unread"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:envelope"))}function Ge(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.moveToFolder("spam"))}),e.nrm(1,"mat-icon",10),e.j41(2,"span"),e.EFF(3,"Spam"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:exclamation-triangle"))}function ue(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.moveToFolder("inbox"))}),e.nrm(1,"mat-icon",10),e.j41(2,"span"),e.EFF(3,"Not spam"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:exclamation-triangle"))}function le(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.moveToFolder("trash"))}),e.nrm(1,"mat-icon",10),e.j41(2,"span"),e.EFF(3,"Delete"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:trash"))}function Oe(i,l){if(1&i&&(e.j41(0,"div",39),e.EFF(1),e.k0s()),2&i){const t=l.$implicit,o=e.XpG(3);e.Y8G("ngClass",o.labelColors[t.color].combined),e.R7$(),e.SpI(" ",t.title," ")}}function Ae(i,l){if(1&i&&(e.j41(0,"div",19),e.Z7z(1,Oe,2,2,"div",39,e.fX1),e.nI1(3,"fuseFindByKey"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Dyx(e.brH(3,0,t.mail.labels,"id",t.labels))}}function me(i,l){1&i&&e.EFF(0,"other")}function Be(i,l){1&i&&e.EFF(0,"others")}function Ne(i,l){if(1&i&&(e.j41(0,"div")(1,"span",40),e.EFF(2,"and"),e.k0s(),e.j41(3,"span",29),e.EFF(4),e.k0s(),e.j41(5,"span",41),e.DNE(6,me,1,0,"ng-template",42)(7,Be,1,0,"ng-template",43),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(4),e.JRh(t.mail.ccCount+t.mail.bccCount),e.R7$(),e.Y8G("ngPlural",t.mail.ccCount+t.mail.bccCount)}}function Ye(i,l){if(1&i&&(e.j41(0,"div",45)(1,"div",46),e.EFF(2," cc: "),e.k0s(),e.j41(3,"div",47),e.EFF(4),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(4),e.SpI(" ",t.mail.cc.join(",\n")," ")}}function Ve(i,l){if(1&i&&(e.j41(0,"div",45)(1,"div",46),e.EFF(2," bcc: "),e.k0s(),e.j41(3,"div",47),e.EFF(4),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(4),e.SpI(" ",t.mail.bcc.join(",\n")," ")}}function Xe(i,l){if(1&i&&(e.j41(0,"div",44)(1,"div",45)(2,"div",46),e.EFF(3," from: "),e.k0s(),e.j41(4,"div",47),e.EFF(5),e.k0s()(),e.j41(6,"div",45)(7,"div",46),e.EFF(8," to: "),e.k0s(),e.j41(9,"div",47),e.EFF(10),e.k0s()(),e.DNE(11,Ye,5,1,"div",45)(12,Ve,5,1,"div",45),e.j41(13,"div",45)(14,"div",46),e.EFF(15," date: "),e.k0s(),e.j41(16,"div",47),e.EFF(17),e.nI1(18,"date"),e.k0s()(),e.j41(19,"div",45)(20,"div",46),e.EFF(21," subject: "),e.k0s(),e.j41(22,"div",47),e.EFF(23),e.k0s()()()),2&i){const t=e.XpG(2);e.R7$(5),e.SpI(" ",t.mail.from.contact," "),e.R7$(5),e.SpI(" ",t.mail.to," "),e.R7$(),e.vxM(t.mail.cc?11:-1),e.R7$(),e.vxM(t.mail.bcc?12:-1),e.R7$(5),e.SpI(" ",e.i5U(18,6,t.mail.date,"EEEE, MMMM d, y - hh:mm a")," "),e.R7$(6),e.SpI(" ",t.mail.subject," ")}}function he(i,l){if(1&i&&e.nrm(0,"img",52),2&i){const t=e.XpG().$implicit;e.Y8G("src","images/apps/mailbox/"+t.preview,e.B4B)}}function fe(i,l){if(1&i&&(e.j41(0,"div",53)(1,"div",57),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.type.split("/")[1].trim().toUpperCase()," ")}}function pe(i,l){if(1&i&&(e.j41(0,"div",51),e.DNE(1,he,1,1,"img",52)(2,fe,3,1,"div",53),e.j41(3,"div",54)(4,"div",55),e.EFF(5),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"number"),e.k0s()()()),2&i){const t=l.$implicit;e.R7$(),e.vxM(t.type.startsWith("image/")?1:-1),e.R7$(),e.vxM(t.type.startsWith("application/")?2:-1),e.R7$(2),e.Y8G("title",t.name),e.R7$(),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("title",t.size),e.R7$(),e.SpI(" ",e.i5U(8,6,t.size/1e3,"1.0-2")," KB ")}}function Qe(i,l){if(1&i&&(e.j41(0,"div",33)(1,"div",48),e.nrm(2,"mat-icon",31),e.j41(3,"div",49),e.EFF(4),e.k0s()(),e.j41(5,"div",50),e.Z7z(6,pe,9,9,"div",51,e.fX1),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("svgIcon","heroicons_solid:paper-clip"),e.R7$(2),e.SpI(" ",t.mail.attachments.length," Attachments "),e.R7$(2),e.Dyx(t.mail.attachments)}}function qe(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",35)(1,"button",58),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.reply())}),e.nrm(2,"mat-icon",31),e.j41(3,"span",59),e.EFF(4,"Reply"),e.k0s()(),e.j41(5,"button",58),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.replyAll())}),e.nrm(6,"mat-icon",31),e.j41(7,"span",59),e.EFF(8,"Reply All"),e.k0s()(),e.j41(9,"button",58),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.forward())}),e.nrm(10,"mat-icon",60),e.j41(11,"span",59),e.EFF(12,"Forward"),e.k0s()()()}2&i&&(e.R7$(),e.Y8G("color","primary"),e.R7$(),e.Y8G("svgIcon","heroicons_solid:arrow-uturn-left"),e.R7$(3),e.Y8G("color","primary"),e.R7$(),e.Y8G("svgIcon","heroicons_solid:arrow-uturn-left"),e.R7$(3),e.Y8G("color","primary"),e.R7$(),e.Y8G("color","primary")("svgIcon","heroicons_solid:chevron-double-right"))}function ge(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",33,4)(2,"mat-form-field",61),e.nrm(3,"textarea",62),e.k0s(),e.j41(4,"div",63)(5,"div",64)(6,"button",65),e.nrm(7,"mat-icon",31),e.k0s(),e.j41(8,"button",65),e.nrm(9,"mat-icon",31),e.k0s(),e.j41(10,"button",65),e.nrm(11,"mat-icon",31),e.k0s(),e.j41(12,"button",65),e.nrm(13,"mat-icon",31),e.k0s()(),e.j41(14,"div",66)(15,"button",67),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.discard())}),e.EFF(16," Discard "),e.k0s(),e.j41(17,"button",68),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.send())}),e.EFF(18," Send "),e.k0s()()()()}2&i&&(e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("placeholder","Type your reply here")("rows",4),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:paper-clip"),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:link"),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:face-smile"),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:photo"),e.R7$(4),e.Y8G("color","primary"))}function be(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"a",9),e.nrm(3,"mat-icon",10),e.k0s(),e.j41(4,"button",11),e.nrm(5,"mat-icon",10),e.k0s(),e.j41(6,"mat-menu",null,0),e.Z7z(8,$e,3,4,"div",12,e.BUC().trackByFn,!0),e.k0s(),e.j41(10,"button",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.toggleImportant())}),e.nrm(11,"mat-icon",14),e.k0s(),e.j41(12,"button",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.toggleStar())}),e.nrm(13,"mat-icon",14),e.k0s(),e.j41(14,"button",15),e.nrm(15,"mat-icon",10),e.k0s(),e.j41(16,"mat-menu",null,1),e.DNE(18,De,4,1,"button",16)(19,Le,4,1,"button",16)(20,Ge,4,1,"button",16)(21,ue,4,1,"button",16)(22,le,4,1,"button",16),e.k0s()(),e.j41(23,"div",17)(24,"div",18),e.EFF(25),e.k0s(),e.DNE(26,Ae,4,4,"div",19),e.k0s()(),e.j41(27,"div",20)(28,"div",21)(29,"div",22)(30,"div",23)(31,"div",24),e.nrm(32,"img",25),e.k0s(),e.j41(33,"div",26)(34,"div",27),e.EFF(35),e.k0s(),e.j41(36,"div",28)(37,"div"),e.EFF(38,"to"),e.k0s(),e.j41(39,"div",29),e.EFF(40,"me"),e.k0s(),e.DNE(41,Ne,8,2,"div"),e.j41(42,"button",30,2),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openInfoDetailsPanel())}),e.nrm(44,"mat-icon",31),e.k0s(),e.DNE(45,Xe,24,9,"ng-template",null,3,e.C5r),e.k0s()()(),e.nrm(47,"div",32),e.DNE(48,Qe,8,2,"div",33),e.k0s(),e.j41(49,"div",34),e.DNE(50,qe,13,7,"div",35)(51,ge,19,8,"div",33),e.k0s()()()}if(2&i){const t=e.sdS(7),o=e.sdS(17),n=e.XpG();e.R7$(2),e.Y8G("routerLink",e.lJ4(25,Te)),e.R7$(),e.Y8G("svgIcon","heroicons_outline:arrow-long-left"),e.R7$(),e.Y8G("matMenuTriggerFor",t),e.R7$(),e.Y8G("svgIcon","heroicons_outline:tag"),e.R7$(3),e.Dyx(n.labels),e.R7$(3),e.Y8G("ngClass",e.eq3(26,Ie,n.mail.important))("svgIcon","heroicons_outline:exclamation-circle"),e.R7$(2),e.Y8G("ngClass",e.eq3(28,Se,n.mail.starred))("svgIcon","heroicons_outline:star"),e.R7$(),e.Y8G("matMenuTriggerFor",o),e.R7$(),e.Y8G("svgIcon","heroicons_outline:ellipsis-vertical"),e.R7$(3),e.vxM(n.mail.unread?18:-1),e.R7$(),e.vxM(n.mail.unread?-1:19),e.R7$(),e.vxM("spam"!==n.getCurrentFolder()&&"drafts"!==n.getCurrentFolder()?20:-1),e.R7$(),e.vxM("spam"===n.getCurrentFolder()?21:-1),e.R7$(),e.vxM("trash"!==n.getCurrentFolder()?22:-1),e.R7$(3),e.SpI(" ",n.mail.subject," "),e.R7$(),e.vxM(n.mail.labels&&n.mail.labels.length>0?26:-1),e.R7$(6),e.Y8G("src",n.mail.from.avatar,e.B4B),e.R7$(3),e.SpI(" ",n.mail.from.contact.split("<")[0].trim()," "),e.R7$(6),e.vxM(n.mail.ccCount+n.mail.bccCount>0?41:-1),e.R7$(3),e.Y8G("svgIcon","heroicons_solid:chevron-down"),e.R7$(3),e.Y8G("innerHTML",n.mail.content,e.npT),e.R7$(),e.vxM(n.mail.attachments&&n.mail.attachments.length>0?48:-1),e.R7$(2),e.vxM(n.replyFormActive?-1:50),e.R7$(),e.vxM(n.replyFormActive?51:-1)}}function ee(i,l){1&i&&(e.j41(0,"div",6),e.nrm(1,"mat-icon",69),e.j41(2,"div",70),e.EFF(3," Select a mail to read "),e.k0s()()),2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:envelope"))}let ze=(()=>{class i{constructor(t,o,n,s,d,u){this._activatedRoute=t,this._elementRef=o,this._mailboxService=n,this._overlay=s,this._router=d,this._viewContainerRef=u,this.replyFormActive=!1,this._unsubscribeAll=new Z.B,this.AppSettings=se.$}ngOnInit(){this.labelColors=oe,this._mailboxService.folders$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.folders=t}),this._mailboxService.labels$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.labels=t}),this._mailboxService.mail$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.mail=t}),this._mailboxService.selectedMailChanged.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(()=>{this.replyFormActive=!1})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getCurrentFolder(){return this._activatedRoute.snapshot.paramMap.get("folder")}moveToFolder(t){const o=this.folders.find(n=>n.slug===t);this.mail.folder!==o.id&&(this.mail.folder=o.id,this._mailboxService.updateMail(this.mail.id,{folder:this.mail.folder}).subscribe(),this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent}))}toggleLabel(t){let o=!1;this.mail.labels.includes(t.id)?(o=!0,this.mail.labels.splice(this.mail.labels.indexOf(t.id),1)):this.mail.labels.push(t.id),this._mailboxService.updateMail(this.mail.id,{labels:this.mail.labels}).subscribe(),o&&this._activatedRoute.snapshot.paramMap.get("label")&&this._activatedRoute.snapshot.paramMap.get("label")===t.slug&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleImportant(){this.mail.important=!this.mail.important,this._mailboxService.updateMail(this.mail.id,{important:this.mail.important}).subscribe(),this.mail.important||this._activatedRoute.snapshot.paramMap.get("filter")&&"important"===this._activatedRoute.snapshot.paramMap.get("filter")&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleStar(){this.mail.starred=!this.mail.starred,this._mailboxService.updateMail(this.mail.id,{starred:this.mail.starred}).subscribe(),this.mail.starred||this._activatedRoute.snapshot.paramMap.get("filter")&&"starred"===this._activatedRoute.snapshot.paramMap.get("filter")&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleUnread(t){this.mail.unread=t,this._mailboxService.updateMail(this.mail.id,{unread:this.mail.unread}).subscribe()}reply(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}replyAll(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}forward(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}discard(){this.replyFormActive=!1}send(){this.replyFormActive=!1}openInfoDetailsPanel(){this._overlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._infoDetailsPanelOrigin._elementRef.nativeElement).withFlexibleDimensions(!0).withViewportMargin(16).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])});const t=new ye.VA(this._infoDetailsPanel,this._viewContainerRef);this._overlayRef.attach(t),this._overlayRef.backdropClick().subscribe(()=>{this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),t&&t.isAttached&&t.detach()})}trackByFn(t,o){return o.id||t}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(A.nX),e.rXU(e.aKT),e.rXU(D),e.rXU(ke.hJ),e.rXU(A.Ix),e.rXU(e.c1b))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["mailbox-details"]],viewQuery:function(o,n){if(1&o&&(e.GBs(je,5),e.GBs(we,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._infoDetailsPanelOrigin=s.first),e.mGM(s=e.lsd())&&(n._infoDetailsPanel=s.first)}},decls:3,vars:1,consts:[["toggleLabelMenu","matMenu"],["mailMenu","matMenu"],["infoDetailsPanelOrigin",""],["infoDetailsPanel",""],["replyForm",""],[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"relative","z-10","flex","w-full","flex-0","flex-col","border-b"],[1,"flex","min-h-16","items-center","border-b","bg-gray-50","px-4","dark:bg-transparent","md:px-6"],["mat-icon-button","",1,"md:-ml-2","lg:hidden",3,"routerLink"],[3,"svgIcon"],["mat-icon-button","",1,"ml-auto",3,"matMenuTriggerFor"],["mat-menu-item","","matRipple",""],["mat-icon-button","",1,"ml-2",3,"click"],[3,"ngClass","svgIcon"],["mat-icon-button","",1,"ml-2",3,"matMenuTriggerFor"],["mat-menu-item",""],[1,"flex","flex-wrap","items-center","px-6","py-5"],[1,"my-1","mr-4","flex","flex-auto","text-2xl"],[1,"-mx-1","flex","flex-wrap","items-center","justify-start"],["fuseScrollReset","",1,"flex","flex-auto","shrink-0","flex-col","bg-gray-100","p-3","dark:bg-transparent","lg:shrink","lg:overflow-y-auto",2,"width","78%"],[1,"bg-card","flex","w-full","flex-0","flex-col","overflow-hidden","rounded-2xl","shadow","dark:bg-black","dark:bg-opacity-10"],[1,"flex","flex-col","px-6","py-8"],[1,"flex","w-full","items-center"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["alt","User avatar",1,"h-full","w-full",3,"src"],[1,"ml-4","min-w-0"],[1,"truncate","font-semibold"],[1,"mt-0.5","flex","items-center","leading-5"],[1,"ml-1","font-semibold"],["mat-icon-button","",1,"ml-1","h-5","min-h-5","w-5",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-8","flex","whitespace-pre-line","leading-relaxed",3,"innerHTML"],[1,"flex","w-full","flex-col"],[1,"flex","w-full","border-t","bg-gray-50","p-6","dark:bg-transparent"],[1,"-m-2","flex","w-full","flex-wrap"],["mat-menu-item","","matRipple","",3,"click"],[1,"pointer-events-none",3,"color","checked","disableRipple"],["mat-menu-item","",3,"click"],[1,"m-1","whitespace-nowrap","rounded-full","px-2.5","py-0.5","text-sm","font-medium",3,"ngClass"],[1,"ml-1"],[1,"ml-1","font-semibold",3,"ngPlural"],["ngPluralCase","=1"],["ngPluralCase","other"],[1,"bg-card","flex","w-full","max-w-160","flex-col","space-y-1.5","overflow-auto","rounded","border","px-6","py-4","text-md","shadow-md"],[1,"flex"],[1,"min-w-14","text-right","font-medium"],[1,"whitespace-pre-wrap","pl-2"],[1,"mt-12","flex","items-center"],[1,"ml-2","font-semibold"],[1,"-m-3","mt-3","flex","flex-wrap"],[1,"m-3","flex","items-center"],[1,"h-10","w-10","overflow-hidden","rounded-md",3,"src"],[1,"flex","h-10","w-10","items-center","justify-center","overflow-hidden","rounded-md","bg-primary-100"],[1,"ml-3"],[1,"truncate","text-md","font-medium",3,"title"],[1,"text-secondary","truncate","text-sm","font-medium",3,"title"],[1,"text-primary-500-800","flex","items-center","justify-center","text-sm","font-semibold"],["mat-stroked-button","",1,"m-2",3,"click","color"],[1,"ml-2"],[1,"icon-size-5",3,"color","svgIcon"],[3,"subscriptSizing"],["matInput","",1,"textarea",3,"placeholder","rows"],[1,"mt-4","flex","flex-col","justify-between","sm:mt-6","sm:flex-row","sm:items-center"],[1,"-ml-2"],["mat-icon-button",""],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"order-last","ml-3","sm:order-first","sm:ml-0",3,"click"],["mat-flat-button","",1,"sm:ml-3",3,"click","color"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(o,n){1&o&&(e.j41(0,"div",5),e.DNE(1,be,52,30)(2,ee,4,1,"div",6),e.k0s()),2&o&&(e.R7$(),e.vxM(n.mail?1:2))},dependencies:[y.Hl,y.$z,y.pQ,y.iY,A.Wk,R.m_,R.An,K.Cn,K.kk,K.fb,K.Cp,J.pZ,J.r6,de.g7,de.So,w.YU,Me.T,w.IJ,w.WO,M.RG,M.rl,z.fS,z.fg,Fe.H,w.QX,w.vh],encapsulation:2})}}return i})(),ve=(()=>{class i{constructor(){}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["mailbox-empty-details"]],decls:5,vars:1,consts:[[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"mat-icon",2),e.j41(3,"div",3),e.EFF(4," Select a mail to read "),e.k0s()()()),2&o&&(e.R7$(2),e.Y8G("svgIcon","heroicons_outline:envelope"))},dependencies:[R.m_,R.An],encapsulation:2})}}return i})();var xe=c(67575),te=c(90882),re=c(22780),h=c(89417),Pe=c(10467);const ae={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},_e=new e.nKC("config",{providedIn:"root",factory:()=>({modules:ae})});var f=c(345),p=c(71985);function b(i){i||((0,e.Af3)(b),i=(0,e.WQX)(e.abz));const l=new p.c(t=>i.onDestroy(t.next.bind(t)));return t=>t.pipe((0,_.Q)(l))}var j=c(59030),T=c(9350),B=c(47707),X=c(86648),ie=c(27468),ne=c(74402),G=c(33726),tt=c(18359),it=c(44668),nt=c(31397),Ue=c(70152);const ot=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],st=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function lt(i,l){1&i&&e.nrm(0,"div",0)}function rt(i,l){1&i&&e.nrm(0,"div",0)}const Ce=(i,l)=>i||l||"html";let ct=(()=>{class i{constructor(){var t=this;this.config=(0,e.WQX)(_e)||{modules:ae},this.document=(0,e.WQX)(w.qQ),this.quill$=(0,j.v)((0,Pe.A)(function*(){if(!t.Quill){const o=t.document.addEventListener;t.document.addEventListener=t.document.__zone_symbol__addEventListener||t.document.addEventListener;const n=yield c.e(1593).then(c.bind(c,71593));t.document.addEventListener=o,t.Quill=n.default?.default??n.default??n}return t.config.customOptions?.forEach(o=>{const n=t.Quill.import(o.import);n.whitelist=o.whitelist,t.Quill.register(n,!0,t.config.suppressGlobalRegisterWarning)}),function V(i,l){const t="object"==typeof l;return new Promise((o,n)=>{const s=new B.Ms({next:d=>{o(d),s.unsubscribe()},error:n,complete:()=>{t?o(l.defaultValue):n(new T.G)}});i.subscribe(s)})}(t.registerCustomModules(t.Quill,t.config.customModules,t.config.suppressGlobalRegisterWarning))})).pipe((0,it.t)({bufferSize:1,refCount:!1})),this.registeredModules=new Set}getQuill(){return this.quill$}beforeRender(t,o,n=this.config.beforeRender){const s=[this.registerCustomModules(t,o)];return n&&s.push((0,X.H)(n())),(0,ie.p)(s).pipe((0,H.T)(()=>t))}registerCustomModules(t,o,n){if(!Array.isArray(o))return(0,Y.of)(t);const s=[];for(const d of o){const{path:u,implementation:g}=d;this.registeredModules.has(u)||(this.registeredModules.add(u),(0,ne.A)(g)?s.push(g.pipe((0,$.M)(Q=>{t.register(u,Q,n)}))):t.register(u,g,n))}return s.length>0?(0,ie.p)(s).pipe((0,H.T)(()=>t)):(0,Y.of)(t)}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),dt=(()=>{class i{constructor(){this.format=(0,e.hFB)(void 0),this.theme=(0,e.hFB)(void 0),this.modules=(0,e.hFB)(void 0),this.debug=(0,e.hFB)(!1),this.readOnly=(0,e.hFB)(!1),this.placeholder=(0,e.hFB)(void 0),this.maxLength=(0,e.hFB)(void 0),this.minLength=(0,e.hFB)(void 0),this.required=(0,e.hFB)(!1),this.formats=(0,e.hFB)(void 0),this.customToolbarPosition=(0,e.hFB)("top"),this.sanitize=(0,e.hFB)(void 0),this.beforeRender=(0,e.hFB)(void 0),this.styles=(0,e.hFB)(null),this.registry=(0,e.hFB)(void 0),this.bounds=(0,e.hFB)(void 0),this.customOptions=(0,e.hFB)([]),this.customModules=(0,e.hFB)([]),this.trackChanges=(0,e.hFB)(void 0),this.classes=(0,e.hFB)(void 0),this.trimOnValidation=(0,e.hFB)(!1),this.linkPlaceholder=(0,e.hFB)(void 0),this.compareValues=(0,e.hFB)(!1),this.filterNull=(0,e.hFB)(!1),this.debounceTime=(0,e.hFB)(void 0),this.defaultEmptyValue=(0,e.hFB)(null),this.onEditorCreated=new e.bkB,this.onEditorChanged=new e.bkB,this.onContentChanged=new e.bkB,this.onSelectionChanged=new e.bkB,this.onFocus=new e.bkB,this.onBlur=new e.bkB,this.onNativeFocus=new e.bkB,this.onNativeBlur=new e.bkB,this.disabled=!1,this.toolbarPosition=(0,e.vPA)("top"),this.subscription=null,this.quillSubscription=null,this.elementRef=(0,e.WQX)(e.aKT),this.document=(0,e.WQX)(w.qQ),this.cd=(0,e.WQX)(e.gRc),this.domSanitizer=(0,e.WQX)(f.up),this.platformId=(0,e.WQX)(e.Agw),this.renderer=(0,e.WQX)(e.sFG),this.zone=(0,e.WQX)(e.SKi),this.service=(0,e.WQX)(ct),this.destroyRef=(0,e.WQX)(e.abz),this.valueGetter=(0,e.hFB)(t=>{let o=t.getSemanticHTML();this.isEmptyValue(o)&&(o=this.defaultEmptyValue());let n=o;const s=Ce(this.format(),this.service.config.format);if("text"===s)n=t.getText();else if("object"===s)n=t.getContents();else if("json"===s)try{n=JSON.stringify(t.getContents())}catch{n=t.getText()}return n}),this.valueSetter=(0,e.hFB)((t,o)=>{const n=Ce(this.format(),this.service.config.format);if("html"===n)return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(o=this.domSanitizer.sanitize(e.WPN.HTML,o)),t.clipboard.convert({html:o});if("json"===n)try{return JSON.parse(o)}catch{return[{insert:o}]}return o}),this.selectionChangeHandler=(t,o,n)=>{const s=this.trackChanges()||this.service.config.trackChanges,d=!t&&!!this.onModelTouched&&("user"===n||s&&"all"===s);!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!d||this.zone.run(()=>{null===t?this.onBlur.emit({editor:this.quillEditor,source:n}):null===o&&this.onFocus.emit({editor:this.quillEditor,source:n}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:o,range:t,source:n}),d&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(t,o,n)=>{const s=this.quillEditor.getText(),d=this.quillEditor.getContents();let u=this.quillEditor.getSemanticHTML();this.isEmptyValue(u)&&(u=this.defaultEmptyValue());const g=this.trackChanges()||this.service.config.trackChanges,Q=("user"===n||g&&"all"===g)&&!!this.onModelChange;!this.onContentChanged.observed&&!Q||this.zone.run(()=>{if(Q){const W=this.valueGetter();this.onModelChange(W(this.quillEditor))}this.onContentChanged.emit({content:d,delta:t,editor:this.quillEditor,html:u,oldDelta:o,source:n,text:s}),this.cd.markForCheck()})},this.editorChangeHandler=(t,o,n,s)=>{if(this.onEditorChanged.observed)if("text-change"===t){const d=this.quillEditor.getText(),u=this.quillEditor.getContents();let g=this.quillEditor.getSemanticHTML();this.isEmptyValue(g)&&(g=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:u,delta:o,editor:this.quillEditor,event:t,html:g,oldDelta:n,source:s,text:d}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:t,oldRange:n,range:o,source:s}),this.cd.markForCheck()})}}static normalizeClassNames(t){return t.trim().split(" ").reduce((n,s)=>{const d=s.trim();return d&&n.push(d),n},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){(0,w.Vy)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,nt.Z)(t=>this.service.beforeRender(t,this.customModules(),this.beforeRender()))).subscribe(t=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const o=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=Object.assign({},this.modules()||this.service.config.modules);o?n.toolbar=o:void 0===n.toolbar&&(n.toolbar=ae.toolbar);let s=void 0!==this.placeholder()?this.placeholder():this.service.config.placeholder;void 0===s&&(s="Insert text here ...");const d=this.styles();d&&Object.keys(d).forEach(O=>{this.renderer.setStyle(this.editorElem,O,d[O])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(O=>{const q=t.import(O.import);q.whitelist=O.whitelist,t.register(q,!0)});let u=this.bounds()&&"self"===this.bounds()?this.editorElem:this.bounds();u||(u=this.service.config.bounds?this.service.config.bounds:this.document.body);let g=this.debug();!g&&!1!==g&&this.service.config.debug&&(g=this.service.config.debug);let Q=this.readOnly();!Q&&!1!==this.readOnly()&&(Q=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let W=this.formats();if(!W&&void 0===W&&(W=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new t(this.editorElem,{bounds:u,debug:g,formats:W,modules:n,placeholder:s,readOnly:Q,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed){(0,G.R)(this.quillEditor.scroll.domNode,"blur").pipe(b(this.destroyRef)).subscribe(()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"}));const O=this.quillEditor.getModule("toolbar");O.container&&(0,G.R)(O.container,"mousedown").pipe(b(this.destroyRef)).subscribe(q=>q.preventDefault())}if(this.onNativeFocus.observed&&(0,G.R)(this.quillEditor.scroll.domNode,"focus").pipe(b(this.destroyRef)).subscribe(()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){const q=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");q?.dataset&&(q.dataset.link=this.linkPlaceholder())}}),this.content){if("text"===Ce(this.format(),this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const Vt=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(Vt,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&new p.c(i=>{const l=requestAnimationFrame(()=>{i.next(),i.complete()});return()=>cancelAnimationFrame(l)}).pipe(b(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.styles){const o=t.styles.currentValue,n=t.styles.previousValue;n&&Object.keys(n).forEach(s=>{this.renderer.removeStyle(this.editorElem,s)}),o&&Object.keys(o).forEach(s=>{this.renderer.setStyle(this.editorElem,s,this.styles()[s])})}if(t.classes){const o=t.classes.currentValue,n=t.classes.previousValue;n&&this.removeClasses(n),o&&this.addClasses(o)}t.debounceTime&&this.addQuillEventListeners()}}addClasses(t){i.normalizeClassNames(t).forEach(o=>{this.renderer.addClass(this.editorElem,o)})}removeClasses(t){i.normalizeClassNames(t).forEach(o=>{this.renderer.removeClass(this.editorElem,o)})}writeValue(t){if(this.filterNull()&&null===t||(this.content=t,!this.quillEditor))return;const o=Ce(this.format(),this.service.config.format),s=this.valueSetter()(this.quillEditor,t);if(this.compareValues()){const d=this.quillEditor.getContents();if(JSON.stringify(d)===JSON.stringify(s))return}t?"text"===o?this.quillEditor.setText(t):this.quillEditor.setContents(s):this.quillEditor.setText("")}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;const t={};let o=!0;const n=this.quillEditor.getText(),s=this.trimOnValidation()?n.trim().length:1===n.length&&0===n.trim().length?0:n.length-1,d=this.quillEditor.getContents().ops,u=!!d&&1===d.length&&["\n",""].includes(d[0].insert?.toString());return this.minLength()&&s&&s<this.minLength()&&(t.minLengthError={given:s,minLength:this.minLength()},o=!1),this.maxLength()&&s>this.maxLength()&&(t.maxLengthError={given:s,maxLength:this.maxLength()},o=!1),this.required()&&!s&&u&&(t.requiredError={empty:!0},o=!1),o?null:t}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new tt.yU,this.subscription.add((0,G.R)(this.quillEditor,"selection-change").subscribe(([n,s,d])=>{this.selectionChangeHandler(n,s,d)}));let t=(0,G.R)(this.quillEditor,"text-change"),o=(0,G.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime()&&(t=t.pipe((0,Ue.B)(this.debounceTime())),o=o.pipe((0,Ue.B)(this.debounceTime()))),this.subscription.add(t.subscribe(([n,s,d])=>{this.textChangeHandler(n,s,d)})),this.subscription.add(o.subscribe(([n,s,d,u])=>{this.editorChangeHandler(n,s,d,u)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}isEmptyValue(t){return"<p></p>"===t||"<div></div>"===t||"<p><br></p>"===t||"<div><br></div>"===t}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275dir=e.FsC({type:i,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[e.OA$]})}}return i})(),ut=(()=>{class i extends dt{static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.xGo(i)))(n||i)}})()}static{this.\u0275cmp=e.VBU({type:i,selectors:[["quill-editor"]],features:[e.Jv_([{multi:!0,provide:h.kq,useExisting:(0,e.Rfq)(()=>i)},{multi:!0,provide:h.cz,useExisting:(0,e.Rfq)(()=>i)}]),e.Vt3],ngContentSelectors:st,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(o,n){1&o&&(e.NAR(ot),e.DNE(0,lt,1,0,"div",0),e.SdG(1),e.SdG(2,1),e.SdG(3,2),e.DNE(4,rt,1,0,"div",0)),2&o&&(e.vxM("top"!==n.toolbarPosition()?0:-1),e.R7$(4),e.vxM("top"===n.toolbarPosition()?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return i})();var Ke=c(75351);function mt(i,l){if(1&i){const t=e.RV6();e.j41(0,"span",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showCopyField("cc"))}),e.EFF(1," Cc "),e.k0s()}}function ht(i,l){if(1&i){const t=e.RV6();e.j41(0,"span",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showCopyField("bcc"))}),e.EFF(1," Bcc "),e.k0s()}}function ft(i,l){1&i&&(e.j41(0,"mat-form-field")(1,"mat-label"),e.EFF(2,"Cc"),e.k0s(),e.nrm(3,"input",6),e.k0s()),2&i&&(e.R7$(3),e.Y8G("formControlName","cc"))}function pt(i,l){1&i&&(e.j41(0,"mat-form-field")(1,"mat-label"),e.EFF(2,"Bcc"),e.k0s(),e.nrm(3,"input",6),e.k0s()),2&i&&(e.R7$(3),e.Y8G("formControlName","bcc"))}let gt=(()=>{class i{constructor(t,o){this.matDialogRef=t,this._formBuilder=o,this.copyFields={cc:!1,bcc:!1},this.quillModules={toolbar:[["bold","italic","underline"],[{align:[]},{list:"ordered"},{list:"bullet"}],["clean"]]}}ngOnInit(){this.composeForm=this._formBuilder.group({to:["",[h.k0.required,h.k0.email]],cc:["",[h.k0.email]],bcc:["",[h.k0.email]],subject:[""],body:["",[h.k0.required]]})}showCopyField(t){"cc"!==t&&"bcc"!==t||(this.copyFields[t]=!0)}saveAndClose(){this.saveAsDraft(),this.matDialogRef.close()}discard(){}saveAsDraft(){}send(){}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(Ke.CP),e.rXU(h.ze))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["mailbox-compose"]],decls:39,vars:17,consts:[[1,"-m-6","flex","max-h-screen","max-w-240","flex-col","md:min-w-160"],[1,"flex","h-16","flex-0","items-center","justify-between","bg-primary","pl-6","pr-3","text-on-primary","sm:pl-8","sm:pr-5"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"click","tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-auto","flex-col","overflow-y-auto","p-6","sm:p-8",3,"formGroup"],["matInput","",3,"formControlName"],["matSuffix","",1,"copy-fields-toggles"],[1,"cursor-pointer","select-none","text-sm","font-medium","hover:underline"],[1,"ml-2","cursor-pointer","select-none","text-sm","font-medium","hover:underline"],[1,"mt-2",3,"formControlName","bounds","modules"],[1,"mt-4","flex","flex-col","justify-between","sm:mt-6","sm:flex-row","sm:items-center"],[1,"-ml-2"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-stroked-button","",1,"ml-auto","sm:ml-0",3,"click"],["mat-stroked-button","",1,"sm:mx-3",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"click","color"],[1,"cursor-pointer","select-none","text-sm","font-medium","hover:underline",3,"click"],[1,"ml-2","cursor-pointer","select-none","text-sm","font-medium","hover:underline",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"New Message"),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return n.saveAndClose()}),e.nrm(5,"mat-icon",4),e.k0s()(),e.j41(6,"form",5)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"To"),e.k0s(),e.nrm(10,"input",6),e.j41(11,"div",7),e.DNE(12,mt,2,0,"span",8)(13,ht,2,0,"span",9),e.k0s()(),e.DNE(14,ft,4,1,"mat-form-field")(15,pt,4,1,"mat-form-field"),e.j41(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Subject"),e.k0s(),e.nrm(19,"input",6),e.k0s(),e.nrm(20,"quill-editor",10),e.j41(21,"div",11)(22,"div",12)(23,"button",13),e.nrm(24,"mat-icon",14),e.k0s(),e.j41(25,"button",13),e.nrm(26,"mat-icon",14),e.k0s(),e.j41(27,"button",13),e.nrm(28,"mat-icon",14),e.k0s(),e.j41(29,"button",13),e.nrm(30,"mat-icon",14),e.k0s()(),e.j41(31,"div",15)(32,"button",16),e.bIt("click",function(){return n.discard()}),e.EFF(33," Discard "),e.k0s(),e.j41(34,"button",17),e.bIt("click",function(){return n.saveAsDraft()}),e.j41(35,"span"),e.EFF(36,"Save as draft"),e.k0s()(),e.j41(37,"button",18),e.bIt("click",function(){return n.send()}),e.EFF(38," Send "),e.k0s()()()()()),2&o&&(e.R7$(4),e.Y8G("tabIndex",-1),e.R7$(),e.Y8G("svgIcon","heroicons_outline:x-mark"),e.R7$(),e.Y8G("formGroup",n.composeForm),e.R7$(4),e.Y8G("formControlName","to"),e.R7$(2),e.vxM(n.copyFields.cc?-1:12),e.R7$(),e.vxM(n.copyFields.bcc?-1:13),e.R7$(),e.vxM(n.copyFields.cc?14:-1),e.R7$(),e.vxM(n.copyFields.bcc?15:-1),e.R7$(4),e.Y8G("formControlName","subject"),e.R7$(),e.Y8G("formControlName","body")("bounds","self")("modules",n.quillModules),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:paper-clip"),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:link"),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:face-smile"),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:photo"),e.R7$(7),e.Y8G("color","primary"))},dependencies:[y.Hl,y.$z,y.iY,R.m_,R.An,h.YN,h.qT,h.me,h.BC,h.cb,h.X1,h.j4,h.JD,M.RG,M.rl,M.nJ,M.yw,z.fS,z.fg,ut],encapsulation:2})}}return i})(),bt=(()=>{class i{constructor(t,o,n){this._mailboxService=t,this._matDialog=o,this._fuseNavigationService=n,this.menuData=[],this._filtersMenuData=[],this._foldersMenuData=[],this._labelsMenuData=[],this._otherMenuData=[],this._unsubscribeAll=new Z.B}ngOnInit(){this._mailboxService.filters$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.filters=t,this._generateFiltersMenuLinks()}),this._mailboxService.folders$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.folders=t,this._generateFoldersMenuLinks(),this._updateNavigationBadge(t)}),this._mailboxService.labels$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.labels=t,this._generateLabelsMenuLinks()}),this._generateOtherMenuLinks()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}openComposeDialog(){this._matDialog.open(gt).afterClosed().subscribe(o=>{console.log("Compose dialog was closed!")})}_generateFoldersMenuLinks(){this._foldersMenuData=[],this.folders.forEach(t=>{const o={id:t.id,title:t.title,type:"basic",icon:t.icon,link:"/apps/mailbox/"+t.slug};t.count&&t.count>0&&(o.badge={title:t.count+""}),this._foldersMenuData.push(o)}),this._updateMenuData()}_generateFiltersMenuLinks(){this._filtersMenuData=[],this.filters.forEach(t=>{this._filtersMenuData.push({id:t.id,title:t.title,type:"basic",icon:t.icon,link:"/apps/mailbox/filter/"+t.slug})}),this._updateMenuData()}_generateLabelsMenuLinks(){this._labelsMenuData=[],this.labels.forEach(t=>{this._labelsMenuData.push({id:t.id,title:t.title,type:"basic",icon:"heroicons_outline:tag",classes:{icon:oe[t.color].text},link:"/apps/mailbox/label/"+t.slug})}),this._updateMenuData()}_generateOtherMenuLinks(){this._otherMenuData.push({title:"Settings",type:"basic",icon:"heroicons_outline:cog-8-tooth",link:"/apps/mailbox/settings"}),this._updateMenuData()}_updateMenuData(){this.menuData=[{title:"MAILBOXES",type:"group",children:[...this._foldersMenuData]},{title:"FILTERS",type:"group",children:[...this._filtersMenuData]},{title:"LABELS",type:"group",children:[...this._labelsMenuData]},{type:"spacer"},...this._otherMenuData]}_updateNavigationBadge(t){const o=this.folders.find(s=>"inbox"===s.slug),n=this._fuseNavigationService.getComponent("mainNavigation");n&&(this._fuseNavigationService.getItem("apps.mailbox",n.navigation).badge.title=o.count+"",n.refresh())}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(D),e.rXU(Ke.bZ),e.rXU(re.L5))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["mailbox-sidebar"]],decls:8,vars:6,consts:[[1,"flex","w-full","flex-auto","flex-col"],[1,"mx-6","mb-8","mt-10","text-4xl","font-extrabold","leading-none","tracking-tight"],["mat-flat-button","",1,"mx-6",3,"click","color"],[3,"svgIcon"],[1,"ml-2"],[3,"navigation","inner","mode","opened"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," Mailbox "),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return n.openComposeDialog()}),e.nrm(4,"mat-icon",3),e.j41(5,"span",4),e.EFF(6,"Compose"),e.k0s()(),e.nrm(7,"fuse-vertical-navigation",5),e.k0s()),2&o&&(e.R7$(3),e.Y8G("color","primary"),e.R7$(),e.Y8G("svgIcon","heroicons_outline:plus"),e.R7$(3),e.Y8G("navigation",n.menuData)("inner",!0)("mode","side")("opened",!0))},dependencies:[y.Hl,y.$z,R.m_,R.An,re.Xs],styles:["mailbox-sidebar fuse-vertical-navigation .fuse-vertical-navigation-wrapper{box-shadow:none!important}\n"],encapsulation:2})}}return i})();var vt=c(27115);const xt=["drawer"];let He=(()=>{class i{constructor(t){this._fuseMediaWatcherService=t,this.drawerMode="side",this.drawerOpened=!0,this._unsubscribeAll=new Z.B}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{t.includes("md")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(vt.F))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["mailbox"]],viewQuery:function(o,n){if(1&o&&e.GBs(xt,5),2&o){let s;e.mGM(s=e.lsd())&&(n.drawer=s.first)}},decls:8,vars:2,consts:[["drawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"mode","opened"],[1,"flex","flex-col","overflow-hidden",2,"margin-left","0 !important"],[1,"flex","flex-auto","overflow-hidden"]],template:function(o,n){1&o&&(e.j41(0,"div",1)(1,"mat-drawer-container",2)(2,"mat-drawer",3,0),e.nrm(4,"mailbox-sidebar"),e.k0s(),e.j41(5,"mat-drawer-content",4)(6,"div",5),e.nrm(7,"router-outlet"),e.k0s()()()()),2&o&&(e.R7$(2),e.Y8G("mode",n.drawerMode)("opened",n.drawerOpened))},dependencies:[te.vg,te.qe,te.$C,te.$l,bt,A.n3],encapsulation:2})}}return i})();const _t=["mailList"],We=i=>[i],Ct=(i,l)=>({"border-primary":i,"bg-primary-50 dark:bg-black dark:bg-opacity-5":l}),yt=(i,l)=>({"absolute inset-0 z-20 flex lg:static lg:inset-auto":i,"hidden lg:flex":l});function Mt(i,l){1&i&&e.nrm(0,"mat-progress-bar",14),2&i&&e.Y8G("mode","indeterminate")}function Ft(i,l){1&i&&e.nrm(0,"mat-icon",21),2&i&&e.Y8G("svgIcon","heroicons_solid:exclamation-circle")}function Rt(i,l){1&i&&e.nrm(0,"mat-icon",27),2&i&&e.Y8G("svgIcon","heroicons_solid:paper-clip")}function Et(i,l){1&i&&e.nrm(0,"mat-icon",28),2&i&&e.Y8G("svgIcon","heroicons_solid:star")}function kt(i,l){if(1&i&&(e.j41(0,"div",25),e.DNE(1,Rt,1,1,"mat-icon",27)(2,Et,1,1,"mat-icon",28),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.vxM(t.attachments&&t.attachments.length>0?1:-1),e.R7$(),e.vxM(t.starred?2:-1)}}function jt(i,l){if(1&i){const t=e.RV6();e.j41(0,"a",17),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.onMailSelected(n))}),e.j41(1,"div",18)(2,"div",19)(3,"div",20),e.EFF(4),e.k0s(),e.DNE(5,Ft,1,1,"mat-icon",21),e.j41(6,"div",22),e.EFF(7),e.nI1(8,"date"),e.k0s()(),e.j41(9,"div",23)(10,"span",24),e.EFF(11),e.k0s(),e.DNE(12,kt,3,2,"div",25),e.k0s(),e.j41(13,"div",26),e.EFF(14),e.k0s()()()}if(2&i){const t=l.$implicit,o=e.XpG(2);e.Y8G("routerLink",e.eq3(11,We,t.id)),e.R7$(),e.Y8G("ngClass",e.l_i(13,Ct,t.unread,o.selectedMail&&o.selectedMail.id===t.id)),e.R7$(3),e.SpI(" ",t.from.contact.split("<")[0].trim()," "),e.R7$(),e.vxM(t.important?5:-1),e.R7$(2),e.SpI(" ",e.i5U(8,8,t.date,"LLL dd")," "),e.R7$(4),e.JRh(t.subject),e.R7$(),e.vxM(t.attachments&&t.attachments.length>0||t.starred?12:-1),e.R7$(2),e.SpI(" ",t.content,"... ")}}function wt(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",2)(1,"div",5)(2,"div",6)(3,"button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.mailboxComponent.drawer.toggle())}),e.nrm(4,"mat-icon",8),e.k0s(),e.j41(5,"div",9),e.EFF(6),e.k0s()(),e.j41(7,"div",6)(8,"div",10)(9,"span"),e.EFF(10),e.k0s(),e.j41(11,"span",11),e.EFF(12,"-"),e.k0s(),e.j41(13,"span"),e.EFF(14),e.k0s(),e.j41(15,"span",11),e.EFF(16,"of"),e.k0s(),e.j41(17,"span"),e.EFF(18),e.k0s()(),e.j41(19,"a",12),e.nrm(20,"mat-icon",13),e.k0s(),e.j41(21,"a",12),e.nrm(22,"mat-icon",13),e.k0s()(),e.DNE(23,Mt,1,1,"mat-progress-bar",14),e.k0s(),e.j41(24,"div",15,0),e.Z7z(26,jt,15,16,"a",16,e.BUC().trackByFn,!0),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("svgIcon","heroicons_outline:bars-3"),e.R7$(2),e.SpI(" ",t.category.name," "),e.R7$(4),e.JRh(t.pagination.startIndex+1),e.R7$(4),e.JRh(t.pagination.endIndex+1),e.R7$(4),e.JRh(t.pagination.totalResults),e.R7$(),e.Y8G("disabled",1===t.pagination.currentPage)("routerLink",e.eq3(12,We,"../"+(t.pagination.currentPage>1?t.pagination.currentPage-1:1))),e.R7$(),e.Y8G("svgIcon","heroicons_solid:chevron-left"),e.R7$(),e.Y8G("disabled",t.pagination.currentPage===t.pagination.lastPage)("routerLink",e.eq3(14,We,"../"+(t.pagination.currentPage<t.pagination.lastPage?t.pagination.currentPage+1:t.pagination.lastPage))),e.R7$(),e.Y8G("svgIcon","heroicons_solid:chevron-right"),e.R7$(),e.vxM(t.mailsLoading?23:-1),e.R7$(3),e.Dyx(t.mails)}}function Tt(i,l){1&i&&(e.j41(0,"div",3),e.nrm(1,"mat-icon",29),e.j41(2,"div",30),e.EFF(3," There are no e-mails "),e.k0s()()),2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:envelope"))}function It(i,l){if(1&i&&(e.j41(0,"div",4),e.nrm(1,"router-outlet"),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.l_i(1,yt,t.selectedMail&&t.selectedMail.id,!t.selectedMail||!t.selectedMail.id))}}let St=(()=>{class i{constructor(t,o){this.mailboxComponent=t,this._mailboxService=o,this.mailsLoading=!1,this._unsubscribeAll=new Z.B,this.AppSettings=se.$}ngOnInit(){this._mailboxService.category$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.category=t}),this._mailboxService.mails$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.mails=t}),this._mailboxService.mailsLoading$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.mailsLoading=t,this.mailList&&!t&&this.mailList.nativeElement.scrollTo(0,0)}),this._mailboxService.pagination$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t}),this._mailboxService.mail$.pipe((0,_.Q)(this._unsubscribeAll)).subscribe(t=>{this.selectedMail=t})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onMailSelected(t){t.unread&&(t.unread=!1,this._mailboxService.updateMail(t.id,{unread:!1}).subscribe()),this._mailboxService.selectedMailChanged.next(t)}trackByFn(t,o){return o.id||t}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(He),e.rXU(D))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["mailbox-list"]],viewQuery:function(o,n){if(1&o&&e.GBs(_t,5),2&o){let s;e.mGM(s=e.lsd())&&(n.mailList=s.first)}},decls:4,vars:2,consts:[["mailList",""],[1,"bg-card","relative","flex","w-full","flex-auto","dark:bg-transparent",2,"direction","ltr"],[1,"relative","z-10","flex","w-full","min-w-0","flex-auto","flex-col","border-r","lg:min-w-90","lg:max-w-90"],[1,"z-100","absolute","inset-0","flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"flex-auto",3,"ngClass"],[1,"relative","flex","h-16","flex-0","items-center","justify-between","border-b","bg-gray-50","px-4","dark:bg-transparent"],[1,"flex","items-center"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"ml-2","font-semibold","uppercase"],[1,"mr-3","flex","items-center","text-md","font-medium"],[1,"text-secondary","mx-1"],["mat-icon-button","",1,"h-8","min-h-8","w-8",3,"disabled","routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"absolute","inset-x-0","bottom-0","h-0.5",3,"mode"],[1,"overflow-y-auto"],[1,"relative","flex","border-t","hover:bg-hover","first:border-0",3,"routerLink"],[1,"relative","flex","border-t","hover:bg-hover","first:border-0",3,"click","routerLink"],[1,"flex","w-full","flex-col","items-start","justify-start","border-l-4","border-transparent","py-6","pl-5","pr-4",3,"ngClass"],[1,"flex","w-full","items-center"],[1,"mr-2","truncate","font-semibold"],[1,"mr-3","text-red-500","icon-size-4","dark:text-red-600",3,"svgIcon"],[1,"text-hint","ml-auto","whitespace-nowrap","text-right","text-md"],[1,"mt-1","flex","w-full","items-center"],[1,"truncate","leading-4"],[1,"ml-auto","flex","pl-2"],[1,"text-secondary","mt-2","line-clamp-2","leading-normal"],[1,"flex","justify-center","icon-size-4",3,"svgIcon"],[1,"ml-1","flex","justify-center","text-orange-500","icon-size-4","dark:text-orange-400",3,"svgIcon"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(o,n){1&o&&(e.j41(0,"div",1),e.DNE(1,wt,28,16,"div",2)(2,Tt,4,1,"div",3)(3,It,2,4,"div",4),e.k0s()),2&o&&(e.R7$(),e.vxM(n.mails&&n.mails.length>0?1:2),e.R7$(2),e.vxM(n.mails&&n.mails.length>0?3:-1))},dependencies:[y.Hl,y.pQ,y.iY,R.m_,R.An,A.Wk,xe.PO,xe.HM,w.YU,A.n3,w.vh],encapsulation:2})}}return i})();var Je=c(82798);function $t(i,l){1&i&&e.nrm(0,"mat-icon",21),2&i&&e.Y8G("svgIcon","heroicons_outline:check")}function Dt(i,l){if(1&i&&(e.j41(0,"mat-option",17,0),e.DNE(2,$t,1,1,"mat-icon",21),e.nrm(3,"span",22),e.k0s()),2&i){const t=l.$implicit,o=e.sdS(1),n=e.XpG();e.Y8G("value",t),e.R7$(2),e.vxM(o.selected?2:-1),e.R7$(),e.Y8G("ngClass",n.labelColorDefs[t].bg)}}function Lt(i,l){1&i&&e.nrm(0,"mat-icon",21),2&i&&e.Y8G("svgIcon","heroicons_outline:check")}function Gt(i,l){if(1&i&&(e.j41(0,"mat-option",17,0),e.DNE(2,Lt,1,1,"mat-icon",21),e.nrm(3,"span",22),e.k0s()),2&i){const t=l.$implicit,o=e.sdS(1),n=e.XpG(2);e.Y8G("value",t),e.R7$(2),e.vxM(o.selected?2:-1),e.R7$(),e.Y8G("ngClass",n.labelColorDefs[t].bg)}}function Ot(i,l){if(1&i){const t=e.RV6();e.j41(0,"mat-form-field",10),e.nrm(1,"input",23),e.j41(2,"mat-select",24)(3,"mat-select-trigger",13),e.nrm(4,"mat-icon",14),e.k0s(),e.j41(5,"div",15),e.EFF(6," Label color "),e.k0s(),e.j41(7,"div",16),e.Z7z(8,Gt,4,3,"mat-option",17,e.fX1),e.k0s()(),e.j41(10,"button",25),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteLabel(n.get("id").value))}),e.nrm(11,"mat-icon",19),e.k0s()()}if(2&i){const t=l.$implicit,o=e.XpG();e.R7$(),e.Y8G("formControl",t.get("title")),e.R7$(),e.Y8G("formControl",t.get("color"))("disableOptionCentering",!0),e.R7$(2),e.Y8G("ngClass",o.labelColorDefs[t.get("color").value].text)("svgIcon","heroicons_outline:tag"),e.R7$(4),e.Dyx(o.labelColors),e.R7$(3),e.Y8G("svgIcon","heroicons_solid:trash")}}let At=(()=>{class i{constructor(t,o,n){this.mailboxComponent=t,this._formBuilder=o,this._mailboxService=n,this.labelColors=Re,this.labelColorDefs=oe}ngOnInit(){this.labelsForm=this._formBuilder.group({labels:this._formBuilder.array([]),newLabel:this._formBuilder.group({title:["",h.k0.required],color:["orange"]})}),this._mailboxService.labels$.pipe((0,U.s)(1)).subscribe(t=>{this.labels=t,t.forEach(o=>{const n=this._formBuilder.group({id:[o.id],title:[o.title,h.k0.required],slug:[o.slug],color:[o.color]});this.labelsForm.get("labels").push(n)})}),this.labelsForm.get("labels").valueChanges.pipe((0,Ue.B)(500)).subscribe(()=>{this.updateLabels()})}addLabel(){this._mailboxService.addLabel(this.labelsForm.get("newLabel").value).subscribe(t=>{this.labelsForm.get("labels").push(this._formBuilder.group({id:[t.id],title:[t.title,h.k0.required],slug:[t.slug],color:[t.color]})),this.labelsForm.get("newLabel").markAsPristine(),this.labelsForm.get("newLabel").markAsUntouched(),this.labelsForm.get("newLabel.title").reset(),this.labelsForm.get("newLabel.title").clearValidators(),this.labelsForm.get("newLabel.title").updateValueAndValidity()})}deleteLabel(t){const o=this.labelsForm.get("labels");o.removeAt(o.value.findIndex(n=>n.id===t)),this._mailboxService.deleteLabel(t).subscribe()}updateLabels(){this.labelsForm.get("labels").controls.forEach(t=>{t.dirty&&this._mailboxService.updateLabel(t.value.id,t.value).subscribe()}),this.labelsForm.get("labels").markAsPristine(),this.labelsForm.get("labels").markAsUntouched()}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(He),e.rXU(h.ze),e.rXU(D))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["mailbox-settings"]],decls:29,vars:12,consts:[["matOption","matOption"],[1,"flex","flex-auto","flex-col","overflow-y-auto","p-8"],[1,"flex","items-center"],[1,"-ml-2","mr-3","md:hidden"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"text-3xl","font-extrabold","tracking-tight"],[1,"text-secondary"],[1,"mt-8",3,"formGroup"],[1,"mt-6","flex","w-full","max-w-80","items-center","justify-start",3,"formGroupName"],[1,"w-full"],["matInput","",3,"formControlName","placeholder"],["matPrefix","",3,"formControlName","disableOptionCentering"],[1,"h-6"],[3,"ngClass","svgIcon"],[1,"px-4","pt-5","text-xl","font-semibold"],[1,"mx-3","my-4","-mr-5","flex","w-48","flex-wrap"],[1,"relative","flex","h-12","w-12","cursor-pointer","rounded-full","bg-transparent","p-0",3,"value"],["mat-icon-button","","matSuffix","",3,"click","disabled"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","w-full","max-w-80","flex-col",3,"formArrayName"],[1,"absolute","m-3","text-white",3,"svgIcon"],[1,"m-1","flex","h-10","w-10","rounded-full",3,"ngClass"],["matInput","",3,"formControl"],["matPrefix","",3,"formControl","disableOptionCentering"],["mat-icon-button","","matSuffix","",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),e.bIt("click",function(){return n.mailboxComponent.drawer.toggle()}),e.nrm(4,"mat-icon",5),e.k0s()(),e.j41(5,"div")(6,"div",6),e.EFF(7," Manage Labels "),e.k0s(),e.j41(8,"div",7),e.EFF(9,"Create, update and delete labels"),e.k0s()()(),e.j41(10,"form",8)(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),e.EFF(14,"New Label"),e.k0s(),e.nrm(15,"input",11),e.j41(16,"mat-select",12)(17,"mat-select-trigger",13),e.nrm(18,"mat-icon",14),e.k0s(),e.j41(19,"div",15),e.EFF(20," Label color "),e.k0s(),e.j41(21,"div",16),e.Z7z(22,Dt,4,3,"mat-option",17,e.fX1),e.k0s()(),e.j41(24,"button",18),e.bIt("click",function(){return n.addLabel()}),e.nrm(25,"mat-icon",19),e.k0s()()(),e.j41(26,"div",20),e.Z7z(27,Ot,12,6,"mat-form-field",10,e.fX1),e.k0s()()()),2&o&&(e.R7$(4),e.Y8G("svgIcon","heroicons_outline:bars-3"),e.R7$(6),e.Y8G("formGroup",n.labelsForm),e.R7$(),e.Y8G("formGroupName","newLabel"),e.R7$(4),e.Y8G("formControlName","title")("placeholder","Label title"),e.R7$(),e.Y8G("formControlName","color")("disableOptionCentering",!0),e.R7$(2),e.Y8G("ngClass",n.labelColorDefs[n.labelsForm.get("newLabel.color").value].text)("svgIcon","heroicons_outline:tag"),e.R7$(4),e.Dyx(n.labelColors),e.R7$(2),e.Y8G("disabled",!n.labelsForm.get("newLabel").valid||!n.labelsForm.get("newLabel").dirty),e.R7$(),e.Y8G("svgIcon","heroicons_solid:plus-circle"),e.R7$(),e.Y8G("formArrayName","labels"),e.R7$(),e.Dyx(n.labelsForm.get("labels").controls))},dependencies:[y.Hl,y.iY,R.m_,R.An,h.YN,h.qT,h.me,h.BC,h.cb,h.X1,h.l_,h.j4,h.JD,h.$R,h.v8,M.RG,M.rl,M.nJ,M.JW,M.yw,z.fS,z.fg,Je.Ve,Je.VO,Je.$2,J.wT,w.YU,J.Sy],encapsulation:2})}}return i})();var Bt=c(67130),Nt=c(70980),Ze=c(99437);const Yt=[{path:"",redirectTo:"inbox/1",pathMatch:"full"},{path:"filter/:filter",redirectTo:"filter/:filter/1",pathMatch:"full"},{path:"label/:label",redirectTo:"label/:label/1",pathMatch:"full"},{path:":folder",redirectTo:":folder/1",pathMatch:"full"},{path:"",component:He,resolve:{filters:()=>(0,e.WQX)(D).getFilters(),folders:()=>(0,e.WQX)(D).getFolders(),labels:()=>(0,e.WQX)(D).getLabels()},children:[{component:St,matcher:i=>{let l=i;const t={};return"settings"===i[0].path?null:("filter"===i[0].path||"label"===i[0].path?(t[i[0].path]=i[1],t.page=i[2],i[3]&&(l=i.slice(0,-1))):(t.folder=i[0],t.page=i[1],i[2]&&(l=i.slice(0,-1))),{consumed:l,posParams:t})},runGuardsAndResolvers:(i,l)=>{let t=i;for(;t.firstChild;)t=t.firstChild;let o=l;for(;o.firstChild;)o=o.firstChild;if(t.paramMap.get("id")&&!o.paramMap.get("id"))return!0;const n={},s={};return i.paramMap.keys.forEach(d=>{n[d]=i.paramMap.get(d)}),l.paramMap.keys.forEach(d=>{s[d]=l.paramMap.get(d)}),!(0,Bt.A)(n,s)},resolve:{mails:(i,l)=>{const t=(0,e.WQX)(D),o=(0,e.WQX)(A.Ix);if(i.paramMap.get("page")&&parseInt(i.paramMap.get("page"),10)<=0){const s=l.url.split("/").slice(0,-1).join("/")+"/1";return o.navigateByUrl(s),!1}const n=[];return i.paramMap.get("folder")&&n.push(t.getMailsByFolder(i.paramMap.get("folder"),i.paramMap.get("page"))),i.paramMap.get("filter")&&n.push(t.getMailsByFilter(i.paramMap.get("filter"),i.paramMap.get("page"))),i.paramMap.get("label")&&n.push(t.getMailsByLabel(i.paramMap.get("label"),i.paramMap.get("page"))),(0,ie.p)(n).pipe((0,Nt.j)(()=>{let s=i;for(;s.firstChild;)s=s.firstChild;s.paramMap.get("id")||t.resetMail().subscribe()}),(0,Ze.W)(s=>{console.error(s.message);const d=l.url.split("/").slice(0,-1).join("/")+"/"+s.pagination.lastPage;return o.navigateByUrl(d),(0,P.$)(s)}))}},children:[{path:"",pathMatch:"full",component:ve},{path:":id",component:ze,resolve:{mail:(i,l)=>{const t=(0,e.WQX)(D),o=(0,e.WQX)(A.Ix);return t.getMailById(i.paramMap.get("id")).pipe((0,Ze.W)(n=>{console.error(n);const s=l.url.split("/").slice(0,-1).join("/");return o.navigateByUrl(s),(0,P.$)(n)}))}}}]},{path:"settings",component:At}]}]},67130:(et,ce,c)=>{c.d(ce,{A:()=>_e});var e=c(85401),A=c(72291);function M(r){var a=-1,f=null==r?0:r.length;for(this.__data__=new A.A;++a<f;)this.add(r[a])}M.prototype.add=M.prototype.push=function w(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},M.prototype.has=function de(r){return this.__data__.has(r)};const R=M,K=function z(r,a){for(var f=-1,p=null==r?0:r.length;++f<p;)if(a(r[f],f,r))return!0;return!1},Fe=function Me(r,a){return r.has(a)},_=function Z(r,a,f,p,b,m){var C=1&f,F=r.length,x=a.length;if(F!=x&&!(C&&x>F))return!1;var E=m.get(r),S=m.get(a);if(E&&S)return E==a&&S==r;var k=-1,v=!0,L=2&f?new R:void 0;for(m.set(r,a),m.set(a,r);++k<F;){var j=r[k],T=a[k];if(p)var B=C?p(T,j,k,a,r,m):p(j,T,k,r,a,m);if(void 0!==B){if(B)continue;v=!1;break}if(L){if(!K(a,function(V,X){if(!Fe(L,X)&&(j===V||b(j,V,f,p,m)))return L.push(X)})){v=!1;break}}else if(j!==T&&!b(j,T,f,p,m)){v=!1;break}}return m.delete(r),m.delete(a),v};var se=c(6944),I=c(26509),$=c(61319);const P=function N(r){var a=-1,f=Array(r.size);return r.forEach(function(p,b){f[++a]=[b,p]}),f},U=function Y(r){var a=-1,f=Array(r.size);return r.forEach(function(p){f[++a]=p}),f};var ue=se.A?se.A.prototype:void 0,le=ue?ue.valueOf:void 0;var me=c(67895),Ye=Object.prototype.hasOwnProperty;var he=c(81350),fe=c(43744),pe=c(39377),Qe=c(28885),ge="[object Arguments]",be="[object Array]",ee="[object Object]",ve=Object.prototype.hasOwnProperty;const te=function xe(r,a,f,p,b,m){var C=(0,fe.A)(r),F=(0,fe.A)(a),x=C?be:(0,he.A)(r),E=F?be:(0,he.A)(a),S=(x=x==ge?ee:x)==ee,k=(E=E==ge?ee:E)==ee,v=x==E;if(v&&(0,pe.A)(r)){if(!(0,pe.A)(a))return!1;C=!0,S=!1}if(v&&!S)return m||(m=new e.A),C||(0,Qe.A)(r)?_(r,a,f,p,b,m):function Oe(r,a,f,p,b,m,C){switch(f){case"[object DataView]":if(r.byteLength!=a.byteLength||r.byteOffset!=a.byteOffset)return!1;r=r.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=a.byteLength||!m(new I.A(r),new I.A(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,$.A)(+r,+a);case"[object Error]":return r.name==a.name&&r.message==a.message;case"[object RegExp]":case"[object String]":return r==a+"";case"[object Map]":var F=P;case"[object Set]":if(F||(F=U),r.size!=a.size&&!(1&p))return!1;var E=C.get(r);if(E)return E==a;p|=2,C.set(r,a);var S=_(F(r),F(a),p,b,m,C);return C.delete(r),S;case"[object Symbol]":if(le)return le.call(r)==le.call(a)}return!1}(r,a,x,f,p,b,m);if(!(1&f)){var L=S&&ve.call(r,"__wrapped__"),j=k&&ve.call(a,"__wrapped__");if(L||j){var T=L?r.value():r,B=j?a.value():a;return m||(m=new e.A),b(T,B,f,p,m)}}return!!v&&(m||(m=new e.A),function Ve(r,a,f,p,b,m){var C=1&f,F=(0,me.A)(r),x=F.length;if(x!=(0,me.A)(a).length&&!C)return!1;for(var k=x;k--;){var v=F[k];if(!(C?v in a:Ye.call(a,v)))return!1}var L=m.get(r),j=m.get(a);if(L&&j)return L==a&&j==r;var T=!0;m.set(r,a),m.set(a,r);for(var B=C;++k<x;){var V=r[v=F[k]],X=a[v];if(p)var ie=C?p(X,V,v,a,r,m):p(V,X,v,r,a,m);if(!(void 0===ie?V===X||b(V,X,f,p,m):ie)){T=!1;break}B||(B="constructor"==v)}if(T&&!B){var ne=r.constructor,G=a.constructor;ne!=G&&"constructor"in r&&"constructor"in a&&!("function"==typeof ne&&ne instanceof ne&&"function"==typeof G&&G instanceof G)&&(T=!1)}return m.delete(r),m.delete(a),T}(r,a,f,p,b,m))};var re=c(42661);const Pe=function h(r,a,f,p,b){return r===a||(null==r||null==a||!(0,re.A)(r)&&!(0,re.A)(a)?r!=r&&a!=a:te(r,a,f,p,h,b))},_e=function ae(r,a){return Pe(r,a)}}}]);